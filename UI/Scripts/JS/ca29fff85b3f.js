(function(e){var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var c=["January","February","March","April","May","June","July","August","September","October","November","December"];var a=[];a.Jan="01";a.Feb="02";a.Mar="03";a.Apr="04";a.May="05";a.Jun="06";a.Jul="07";a.Aug="08";a.Sep="09";a.Oct="10";a.Nov="11";a.Dec="12";e.formatDate=(function(){function j(l){return b[parseInt(l,10)]||l}function k(m){var l=parseInt(m,10)-1;return d[l]||m}function h(m){var l=parseInt(m,10)-1;return c[l]||m}var f=function(l){return a[l]||l};var g=function(o){var p=o;var m="";if(p.indexOf(".")!==-1){var n=p.split(".");p=n[0];m=n[1]}var l=p.split(":");if(l.length===3){hour=l[0];minute=l[1];second=l[2];return{time:p,hour:hour,minute:minute,second:second,millis:m}}else{return{time:"",hour:"",minute:"",second:"",millis:""}}};var i=function(o,n){var l=n-String(o).length;for(var m=0;m<l;m++){o="0"+o}return o};return{date:function(z,y){try{var m=null;var v=null;var t=null;var B=null;var n=null;var l=null;if(typeof z=="number"){return this.date(new Date(z),y)}else{if(typeof z.getFullYear=="function"){v=z.getFullYear();t=z.getMonth()+1;B=z.getDate();n=z.getDay();l=g(z.toTimeString())}else{if(z.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/)!=-1){var A=z.split(/[T\+-]/);v=A[0];t=A[1];B=A[2];l=g(A[3].split(".")[0]);m=new Date(v,t-1,B);n=m.getDay()}else{var A=z.split(" ");switch(A.length){case 6:v=A[5];t=f(A[1]);B=A[2];l=g(A[3]);m=new Date(v,t-1,B);n=m.getDay();break;case 2:var x=A[0].split("-");v=x[0];t=x[1];B=x[2];l=g(A[1]);m=new Date(v,t-1,B);n=m.getDay();break;case 7:case 9:case 10:v=A[3];t=f(A[1]);B=A[2];l=g(A[4]);m=new Date(v,t-1,B);n=m.getDay();break;case 1:var x=A[0].split("");v=x[0]+x[1]+x[2]+x[3];t=x[5]+x[6];B=x[8]+x[9];l=g(x[13]+x[14]+x[15]+x[16]+x[17]+x[18]+x[19]+x[20]);m=new Date(v,t-1,B);n=m.getDay();break;default:return z}}}}var u="";var q="";var r="";for(var p=0;p<y.length;p++){var w=y.charAt(p);u+=w;r="";switch(u){case"ddd":q+=j(n);u="";break;case"dd":if(y.charAt(p+1)=="d"){break}q+=i(B,2);u="";break;case"d":if(y.charAt(p+1)=="d"){break}q+=parseInt(B,10);u="";break;case"D":if(B==1||B==21||B==31){B=B+"st"}else{if(B==2||B==22){B=B+"nd"}else{if(B==3||B==23){B=B+"rd"}else{B=B+"th"}}}q+=B;u="";break;case"MMMM":q+=h(t);u="";break;case"MMM":if(y.charAt(p+1)==="M"){break}q+=k(t);u="";break;case"MM":if(y.charAt(p+1)=="M"){break}q+=i(t,2);u="";break;case"M":if(y.charAt(p+1)=="M"){break}q+=parseInt(t,10);u="";break;case"y":case"yyy":if(y.charAt(p+1)=="y"){break}q+=u;u="";break;case"yy":if(y.charAt(p+1)=="y"&&y.charAt(p+2)=="y"){break}q+=String(v).slice(-2);u="";break;case"yyyy":q+=v;u="";break;case"HH":q+=i(l.hour,2);u="";break;case"H":if(y.charAt(p+1)=="H"){break}q+=parseInt(l.hour,10);u="";break;case"hh":var o=(l.hour==0?12:l.hour<13?l.hour:l.hour-12);q+=i(o,2);u="";break;case"h":if(y.charAt(p+1)=="h"){break}var o=(l.hour==0?12:l.hour<13?l.hour:l.hour-12);q+=parseInt(o,10);u="";break;case"mm":q+=i(l.minute,2);u="";break;case"m":if(y.charAt(p+1)=="m"){break}q+=l.minute;u="";break;case"ss":q+=i(l.second.substring(0,2),2);u="";break;case"s":if(y.charAt(p+1)=="s"){break}q+=l.second;u="";break;case"S":case"SS":if(y.charAt(p+1)=="S"){break}q+=u;u="";break;case"SSS":q+=l.millis.substring(0,3);u="";break;case"a":q+=l.hour>=12?"PM":"AM";u="";break;case"p":q+=l.hour>=12?"p.m.":"a.m.";u="";break;default:q+=w;u="";break}}q+=r;return q}catch(s){console.log(s);return z}},prettyDate:function(o){var m;var n;var l;if(typeof o==="string"){m=new Date(o)}if(typeof o==="object"){m=new Date(o.toString())}n=(((new Date()).getTime()-m.getTime())/1000);l=Math.floor(n/86400);if(isNaN(l)||l<0){return}if(l>=31){return"more than 31 days"}return l==0&&(n<60&&"just now"||n<120&&"1 minute ago"||n<3600&&Math.floor(n/60)+" minutes ago"||n<7200&&"1 hour ago"||n<86400&&Math.floor(n/3600)+" hours ago")||l==1&&"Yesterday"||l<7&&l+" days ago"||l<31&&Math.ceil(l/7)+" weeks ago"},toBrowserTimeZone:function(l,m){return this.date(l,m||"MM/dd/yyyy")}}}())}(jQuery));
/*!
 * jQuery UI 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 // */
(function(f,e){function g(a){return !f(a).parents().andSelf().filter(function(){return f.css(this,"visibility")==="hidden"||f.expr.filters.hidden(this)}).length}function h(a,l){var k=a.nodeName.toLowerCase();if("area"===k){var j=a.parentNode,i=j.name,d;if(!a.href||!i||j.nodeName.toLowerCase()!=="map"){return !1}d=f("img[usemap=#"+i+"]")[0];return !!d&&g(d)}return(/input|select|textarea|button|object/.test(k)?!a.disabled:"a"==k?a.href||l:l)&&g(a)}f.ui=f.ui||{};f.ui.version||(f.extend(f.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),f.fn.extend({propAttr:f.fn.prop||f.fn.attr,_focus:f.fn.focus,focus:function(a,d){return typeof a=="number"?this.each(function(){var b=this;setTimeout(function(){f(b).focus(),d&&d.call(b)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;f.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(f.css(this,"position",1))&&/(auto|scroll)/.test(f.css(this,"overflow",1)+f.css(this,"overflow-y",1)+f.css(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(f.css(this,"overflow",1)+f.css(this,"overflow-y",1)+f.css(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!a.length?f(document):a},zIndex:function(j){if(j!==e){return this.css("zIndex",j)}if(this.length){var i=f(this[0]),b,a;while(i.length&&i[0]!==document){b=i.css("position");if(b==="absolute"||b==="relative"||b==="fixed"){a=parseInt(i.css("zIndex"),10);if(!isNaN(a)&&a!==0){return a}}i=i.parent()}}return 0},disableSelection:function(){return this.bind((f.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(b){b.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),f.each(["Width","Height"],function(l,k){function a(m,p,o,n){f.each(j,function(){p-=parseFloat(f.css(m,"padding"+this,!0))||0,o&&(p-=parseFloat(f.css(m,"border"+this+"Width",!0))||0),n&&(p-=parseFloat(f.css(m,"margin"+this,!0))||0)});return p}var j=k==="Width"?["Left","Right"]:["Top","Bottom"],i=k.toLowerCase(),b={innerWidth:f.fn.innerWidth,innerHeight:f.fn.innerHeight,outerWidth:f.fn.outerWidth,outerHeight:f.fn.outerHeight};f.fn["inner"+k]=function(d){if(d===e){return b["inner"+k].call(this)}return this.each(function(){f(this).css(i,a(this,d)+"px")})},f.fn["outer"+k]=function(d,m){if(typeof d!="number"){return b["outer"+k].call(this,d)}return this.each(function(){f(this).css(i,a(this,d,!0,m)+"px")})}}),f.extend(f.expr[":"],{data:function(a,j,i){return !!f.data(a,i[3])},focusable:function(a){return h(a,!isNaN(f.attr(a,"tabindex")))},tabbable:function(a){var i=f.attr(a,"tabindex"),c=isNaN(i);return(c||i>=0)&&h(a,!c)}}),f(function(){var a=document.body,d=a.appendChild(d=document.createElement("div"));f.extend(d.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),f.support.minHeight=d.offsetHeight===100,f.support.selectstart="onselectstart" in d,a.removeChild(d).style.display="none"}),f.extend(f.ui,{plugin:{add:function(a,l,k){var j=f.ui[a].prototype;for(var i in k){j.plugins[i]=j.plugins[i]||[],j.plugins[i].push([l,k[i]])}},call:function(j,i,m){var l=j.plugins[i];if(!!l&&!!j.element[0].parentNode){for(var k=0;k<l.length;k++){j.options[l[k][0]]&&l[k][1].apply(j.element,m)}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(a,k){if(f(a).css("overflow")==="hidden"){return !1}var j=k&&k==="left"?"scrollLeft":"scrollTop",i=!1;if(a[j]>0){return !0}a[j]=1,i=a[j]>0,a[j]=0;return i},isOverAxis:function(i,d,j){return i>d&&i<d+j},isOver:function(a,m,l,k,j,i){return f.ui.isOverAxis(a,l,j)&&f.ui.isOverAxis(m,k,i)}}))})(jQuery);
/*!
 * jQuery UI Widget 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(f,e){if(f.cleanData){var h=f.cleanData;f.cleanData=function(a){for(var j=0,i;(i=a[j])!=null;j++){try{f(i).triggerHandler("remove")}catch(c){}}h(a)}}else{var g=f.fn.remove;f.fn.remove=function(a,d){return this.each(function(){d||(!a||f.filter(a,[this]).length)&&f("*",this).add([this]).each(function(){try{f(this).triggerHandler("remove")}catch(c){}});return g.call(f(this),a,d)})}}f.widget=function(a,m,l){var k=a.split(".")[0],j;a=a.split(".")[1],j=k+"-"+a,l||(l=m,m=f.Widget),f.expr[":"][j]=function(b){return !!f.data(b,a)},f[k]=f[k]||{},f[k][a]=function(d,c){arguments.length&&this._createWidget(d,c)};var i=new m;i.options=f.extend(!0,{},i.options),f[k][a].prototype=f.extend(!0,i,{namespace:k,widgetName:a,widgetEventPrefix:f[k][a].prototype.widgetEventPrefix||a,widgetBaseClass:j},l),f.widget.bridge(a,f[k][a])},f.widget.bridge=function(b,a){f.fn[b]=function(j){var i=typeof j=="string",d=Array.prototype.slice.call(arguments,1),c=this;j=!i&&d.length?f.extend.apply(null,[!0,j].concat(d)):j;if(i&&j.charAt(0)==="_"){return c}i?this.each(function(){var l=f.data(this,b),k=l&&f.isFunction(l[j])?l[j].apply(l,d):l;if(k!==l&&k!==e){c=k;return !1}}):this.each(function(){var k=f.data(this,b);k?k.option(j||{})._init():f.data(this,b,new a(j,this))});return c}},f.Widget=function(d,c){arguments.length&&this._createWidget(d,c)},f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,j){f.data(j,this.widgetName,this),this.element=f(j),this.options=f.extend(!0,{},this.options,this._getCreateOptions(),a);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return f.metadata&&f.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,b){var a=i;if(arguments.length===0){return f.extend({},this.options)}if(typeof i=="string"){if(b===e){return this.options[i]}a={},a[i]=b}this._setOptions(a);return this},_setOptions:function(a){var d=this;f.each(a,function(i,c){d._setOption(i,c)});return this},_setOption:function(d,c){this.options[d]=c,d==="disabled"&&this.widget()[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",c);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,m,l){var k,j,i=this.options[a];l=l||{},m=f.Event(m),m.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),m.target=this.element[0],j=m.originalEvent;if(j){for(k in j){k in m||(m[k]=j[k])}}this.element.trigger(m,l);return !(f.isFunction(i)&&i.call(this.element[0],m,l)===!1||m.isDefaultPrevented())}}})(jQuery);(function(h,g){function i(){return ++k}function j(){return ++l}var l=0,k=0;h.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(d,c){if(d=="selected"){if(this.options.collapsible&&c==this.options.selected){return}this.select(c)}else{this.options[d]=c,this._tabify()}},_tabId:function(b){return b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+j()},_sanitizeSelector:function(b){return b.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+i());return h.cookie.apply(null,[a].concat(h.makeArray(arguments)))},_ui:function(d,c){return{tab:d,panel:c,index:this.anchors.index(d)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=h(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(A){function p(d,e){d.css("display",""),!h.support.opacity&&e.opacity&&d[0].style.removeAttribute("filter")}var z=this,y=this.options,x=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=h(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return h("a",this)[0]}),this.panels=h([]),this.anchors.each(function(d,B){var o=h(B).attr("href"),n=o.split("#")[0],m;n&&(n===location.toString().split("#")[0]||(m=h("base")[0])&&n===m.href)&&(o=B.hash,B.href=o);if(x.test(o)){z.panels=z.panels.add(z.element.find(z._sanitizeSelector(o)))}else{if(o&&o!=="#"){h.data(B,"href.tabs",o),h.data(B,"load.tabs",o.replace(/#.*$/,""));var f=z._tabId(B);B.href="#"+f;var e=z.element.find("#"+f);e.length||(e=h(y.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(z.panels[d-1]||z.list),e.data("destroy.tabs",!0)),z.panels=z.panels.add(e)}else{y.disabled.push(d)}}}),A?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),y.selected===g?(location.hash&&this.anchors.each(function(d,c){if(c.hash==location.hash){y.selected=d;return !1}}),typeof y.selected!="number"&&y.cookie&&(y.selected=parseInt(z._cookie(),10)),typeof y.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(y.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),y.selected=y.selected||(this.lis.length?0:-1)):y.selected===null&&(y.selected=-1),y.selected=y.selected>=0&&this.anchors[y.selected]||y.selected<0?y.selected:0,y.disabled=h.unique(y.disabled.concat(h.map(this.lis.filter(".ui-state-disabled"),function(d,c){return z.lis.index(d)}))).sort(),h.inArray(y.selected,y.disabled)!=-1&&y.disabled.splice(h.inArray(y.selected,y.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),y.selected>=0&&this.anchors.length&&(z.element.find(z._sanitizeSelector(z.anchors[y.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(y.selected).addClass("ui-tabs-selected ui-state-active"),z.element.queue("tabs",function(){z._trigger("show",null,z._ui(z.anchors[y.selected],z.element.find(z._sanitizeSelector(z.anchors[y.selected].hash))[0]))}),this.load(y.selected)),h(window).bind("unload",function(){z.lis.add(z.anchors).unbind(".tabs"),z.lis=z.anchors=z.panels=null})):y.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[y.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),y.cookie&&this._cookie(y.selected,y.cookie);for(var w=0,v;v=this.lis[w];w++){h(v)[h.inArray(w,y.disabled)!=-1&&!h(v).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}y.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(y.event!=="mouseover"){var u=function(d,c){c.is(":not(.ui-state-disabled)")&&c.addClass("ui-state-"+d)},s=function(d,c){c.removeClass("ui-state-"+d)};this.lis.bind("mouseover.tabs",function(){u("hover",h(this))}),this.lis.bind("mouseout.tabs",function(){s("hover",h(this))}),this.anchors.bind("focus.tabs",function(){u("focus",h(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){s("focus",h(this).closest("li"))})}var r,q;y.fx&&(h.isArray(y.fx)?(r=y.fx[0],q=y.fx[1]):r=q=y.fx);var b=q?function(d,e){h(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.hide().removeClass("ui-tabs-hide").animate(q,q.duration||"normal",function(){p(e,q),z._trigger("show",null,z._ui(d,e[0]))})}:function(d,e){h(d).closest("li").addClass("ui-tabs-selected ui-state-active"),e.removeClass("ui-tabs-hide"),z._trigger("show",null,z._ui(d,e[0]))},a=r?function(d,c){c.animate(r,r.duration||"normal",function(){z.lis.removeClass("ui-tabs-selected ui-state-active"),c.addClass("ui-tabs-hide"),p(c,r),z.element.dequeue("tabs")})}:function(e,d,f){z.lis.removeClass("ui-tabs-selected ui-state-active"),d.addClass("ui-tabs-hide"),z.element.dequeue("tabs")};this.anchors.bind(y.event+".tabs",function(){var d=this,n=h(d).closest("li"),m=z.panels.filter(":not(.ui-tabs-hide)"),e=z.element.find(z._sanitizeSelector(d.hash));if(n.hasClass("ui-tabs-selected")&&!y.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||z.panels.filter(":animated").length||z._trigger("select",null,z._ui(this,e[0]))===!1){this.blur();return !1}y.selected=z.anchors.index(this),z.abort();if(y.collapsible){if(n.hasClass("ui-tabs-selected")){y.selected=-1,y.cookie&&z._cookie(y.selected,y.cookie),z.element.queue("tabs",function(){a(d,m)}).dequeue("tabs"),this.blur();return !1}if(!m.length){y.cookie&&z._cookie(y.selected,y.cookie),z.element.queue("tabs",function(){b(d,e)}),z.load(z.anchors.index(this)),this.blur();return !1}}y.cookie&&z._cookie(y.selected,y.cookie);if(e.length){m.length&&z.element.queue("tabs",function(){a(d,m)}),z.element.queue("tabs",function(){b(d,e)}),z.load(z.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}h.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return !1})},_getIndex:function(b){typeof b=="string"&&(b=this.anchors.index(this.anchors.filter("[href$="+b+"]")));return b},destroy:function(){var a=this.options;this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var d=h.data(this,"href.tabs");d&&(this.href=d);var e=h(this).unbind(".tabs");h.each(["href","load","cache"],function(f,c){e.removeData(c+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){h.data(this,"destroy.tabs")?h(this).remove():h(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),a.cookie&&this._cookie(null,a.cookie);return this},add:function(r,q,p){p===g&&(p=this.anchors.length);var o=this,n=this.options,m=h(n.tabTemplate.replace(/#\{href\}/g,r).replace(/#\{label\}/g,q)),b=r.indexOf("#")?this._tabId(h("a",m)[0]):r.replace("#","");m.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var a=o.element.find("#"+b);a.length||(a=h(n.panelTemplate).attr("id",b).data("destroy.tabs",!0)),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),p>=this.lis.length?(m.appendTo(this.list),a.appendTo(this.list[0].parentNode)):(m.insertBefore(this.lis[p]),a.insertBefore(this.panels[p])),n.disabled=h.map(n.disabled,function(d,c){return d>=p?++d:d}),this._tabify(),this.anchors.length==1&&(n.selected=0,m.addClass("ui-tabs-selected ui-state-active"),a.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){o._trigger("show",null,o._ui(o.anchors[0],o.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[p],this.panels[p]));return this},remove:function(a){a=this._getIndex(a);var n=this.options,m=this.lis.eq(a).remove(),f=this.panels.eq(a).remove();m.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(a+(a+1<this.anchors.length?1:-1)),n.disabled=h.map(h.grep(n.disabled,function(b,d){return b!=a}),function(b,d){return b>=a?--b:b}),this._tabify(),this._trigger("remove",null,this._ui(m.find("a")[0],f[0]));return this},enable:function(a){a=this._getIndex(a);var d=this.options;if(h.inArray(a,d.disabled)!=-1){this.lis.eq(a).removeClass("ui-state-disabled"),d.disabled=h.grep(d.disabled,function(b,e){return b!=a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a]));return this}},disable:function(e){e=this._getIndex(e);var d=this,f=this.options;e!=f.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),f.disabled.push(e),f.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e])));return this},select:function(b){b=this._getIndex(b);if(b==-1){if(this.options.collapsible&&this.options.selected!=-1){b=this.options.selected}else{return this}}this.anchors.eq(b).trigger(this.options.event+".tabs");return this},load:function(a){a=this._getIndex(a);var q=this,p=this.options,o=this.anchors.eq(a)[0],n=h.data(o,"load.tabs");this.abort();if(!n||this.element.queue("tabs").length!==0&&h.data(o,"cache.tabs")){this.element.dequeue("tabs")}else{this.lis.eq(a).addClass("ui-state-processing");if(p.spinner){var m=h("span",o);m.data("label.tabs",m.html()).html(p.spinner)}this.xhr=h.ajax(h.extend({},p.ajaxOptions,{url:n,success:function(d,c){q.element.find(q._sanitizeSelector(o.hash)).html(d),q._cleanup(),p.cache&&h.data(o,"cache.tabs",!0),q._trigger("load",null,q._ui(q.anchors[a],q.panels[a]));try{p.ajaxOptions.success(d,c)}catch(b){}},error:function(b,d,c){q._cleanup(),q._trigger("load",null,q._ui(q.anchors[a],q.panels[a]));try{p.ajaxOptions.error(b,d,a,o)}catch(c){}}})),q.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup();return this},url:function(d,c){this.anchors.eq(d).removeData("cache.tabs").data("load.tabs",c);return this},length:function(){return this.anchors.length}}),h.extend(h.ui.tabs,{version:"1.8.17"}),h.extend(h.ui.tabs.prototype,{rotation:null,rotate:function(n,m){var r=this,q=this.options,p=r._rotate||(r._rotate=function(a){clearTimeout(r.rotation),r.rotation=setTimeout(function(){var b=q.selected;r.select(++b<r.anchors.length?b:0)},n),a&&a.stopPropagation()}),o=r._unrotate||(r._unrotate=m?function(b){t=q.selected,p()}:function(b){b.clientX&&r.rotate(null)});n?(this.element.bind("tabsshow",p),this.anchors.bind(q.event+".tabs",o),p()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",p),this.anchors.unbind(q.event+".tabs",o),delete this._rotate,delete this._unrotate);return this}})})(jQuery);
(function(c){c.removeDuplicate=function(g){if(!(g instanceof Array)){return}label:for(var f=0;f<g.length;f++){for(var e=0;e<g.length;e++){if(e==f){continue}if(g[e]==g[f]){g=g.slice(e);continue label}}}return g};c.extend(c.expr[":"],{inline:function(e){return(c(e).is("a")||c(e).is("em")||c(e).is("font")||c(e).is("span")||c(e).is("strong")||c(e).is("u"))}});var a=function(e,f){c.extend(this,{settings:f,createDOM:function(){this.textarea=e;this.container=document.createElement("div");this.iframe=document.createElement("iframe");this.iframe.frameBorder=0;this.iframe.name="uEditor";this.iframe.src="";this.iframe.scrolling="no";this.input=document.createElement("input");c(this.input).attr({type:"hidden",name:c(this.textarea).attr("name"),value:c(this.textarea).attr("value")});c(this.textarea).addClass("uEditorTextarea");c(this.textarea).attr("name",c(this.textarea).attr("name")+"uEditorTextarea");c(this.textarea).hide();c(this.container).addClass(f.containerClass);c(this.iframe).addClass("uEditorIframe");this.toolbar=new b(this);c(this.container).append(this.toolbar.itemsList);c(this.container).append(this.iframe);c(this.container).append(this.input);c(this.container).hide();this.input.uEditorObject=this;c(this.textarea).replaceWith(this.container)},writeDocument:function(g){var h='              <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">                <html>                  <head>                  <style type="text/css">html,body{height:100%}</style>                    INSERT:STYLESHEET:END                      </head>                        <body id="iframeBody" style="padding:0; width:540px !important; height: auto; min-height:136px;">                          INSERT:CONTENT:END                            </body>                              </html>                                ';h=(c.browser.msie)?h.replace(/INSERT:STYLESHEET:END/,'<link rel="stylesheet" type="text/css" href="'+g+'" />'):h.replace(/INSERT:STYLESHEET:END/,"");h=h.replace(/INSERT:CONTENT:END/,c(this.input).val());this.iframe.contentWindow.document.open();this.iframe.contentWindow.document.write(h);this.iframe.contentWindow.document.close();if(!c.browser.msie){c(this.iframe.contentWindow.document).find("head").append(c(this.iframe.contentWindow.document.createElement("link")).attr({rel:"stylesheet",type:"text/css",href:g}))}},convertSPANs:function(i){var h=this.iframe;if(i){var g=c(this.iframe.contentWindow.document).find("span");if(g.length){g.each(function(k,m){var l=c(m).contents();var o=null;var j=null;var n=c(m).attr("style").replace(/\s*/gi,"");switch(n){case"font-style:italic;":j=o=h.contentWindow.document.createElement("em");break;case"font-weight:bold;":j=o=h.contentWindow.document.createElement("strong");break;case"font-weight:bold;font-style:italic;":emElement=h.contentWindow.document.createElement("em");strongElement=h.contentWindow.document.createElement("strong");c(emElement).append(strongElement);j=emElement;o=strongElement;break;case"font-style:italic;font-weight:bold;":emElement=h.contentWindow.document.createElement("em");strongElement=h.contentWindow.document.createElement("strong");c(emElement).append(strongElement);j=emElement;o=strongElement;break;default:break}l.each(function(p,q){c(o).append(q)});c(m).before(j);c(elment).remove()})}}else{c(h.contentWindow.document).find("em").each(function(){var j=c(this).contents();var k=h.contentWindow.document.createElement("span");c(k).css("font-style","italic");j.each(function(){c(k).append(this)});c(this).replaceWith(k)});c(h.contentWindow.document).find("strong").each(function(){var j=c(this).contents();var k=h.contentWindow.document.createElement("span");c(k).css("font-weight","bold");j.each(function(){c(k).append(this)});c(this).replaceWith(k)})}},makeEditable:function(){var g=this;try{this.iframe.contentWindow.document.designMode="on"}catch(h){setTimeout((function(){g.makeEditable()}),250);return false}if(!c.browser.msie){this.convertSPANs(false)}c(this.textarea).show();c(this.container).show();c(this.iframe.contentWindow.document).mouseup(function(){g.toolbar.checkState(g)});c(this.iframe.contentWindow.document).keyup(function(){g.toolbar.checkState(g)});c(function(){g.heightControl()});c(this.iframe.contentWindow.document).bind("propertychange input keydown",function(j){var i=c(this).find("body").html();if(j.type==="input"){g.heightControl();g.detectPaste(j,true);return}else{if(j.type==="propertychange"){g.heightControl();g.detectPaste(j);return}else{if(j.type==="keydown"){if(j.keyCode===86&&j.ctrlKey){g.heightControl();g.detectPaste(j);return}else{if(j.keyCode===8||j.keyCode===46){g.heightControl();g.detectPaste(j,true);return}else{if(navigator.userAgent.indexOf("Trident")>0){var k=this;setTimeout(function(){var l=c(k).find("body").html();if(i!==l){g.heightControl();g.detectPaste(j,true);return}},0)}}}}else{}}}});this.locked=false},heightControl:function(){var g=this;setTimeout(function(){var j=c(g.iframe).contents().find("body");var i=0;if(c.browser.msie){var k=j.children().length;if(k>0){i+=parseInt(c(j.children()[k-1]).prop("offsetTop"))}i+=parseInt(j.prop("bottomMargin"))}var h=c.browser.msie?i:c(j).height();console.log(h);if(h>sogoke.MIN_HEIGHT_OF_UEDITOR){c(g.iframe).css({height:h})}else{c(g.iframe).css({height:150+"px"})}},200)},modifyFormSubmit:function(){var g=this;var h=c(this.container).parents("form");h.submit(function(){return g.updateuEditorInput()})},insertNewParagraph:function(h,i){var g=c(this.iframe).contents().find("body");var j=this.iframe.contentWindow.document.createElement("p");c(h).each(function(){c(j).append(this)});g.append(j)},paragraphise:function(){if(f.insertParagraphs&&this.wysiwyg){var i=c(this.iframe).contents().find("body").contents();i.each(function(){if(this.nodeName.toLowerCase()=="#text"&&this.data.search(/^\s*$/)!=-1){this.data=""}});var g=this;var h=new Array()}},switchMode:function(){if(!this.locked){this.locked=true;if(this.wysiwyg){this.updateuEditorInput();c(this.textarea).val(c(this.input).val());c(this.iframe).replaceWith(this.textarea);this.toolbar.disable();this.wysiwyg=false;this.locked=false}else{this.updateuEditorInput();c(this.textarea).replaceWith(this.iframe);this.writeDocument(this.input.value);this.toolbar.enable();this.makeEditable();this.wysiwyg=true}}},detectPaste:function(i,h){if(this.cleaning){return}var g=this;setTimeout(function(j){},100)},cleanSource:function(i){this.cleaning=true;var h="";var g=c(this.iframe.contentWindow.document).find("body");if(!c.browser.msie){this.convertSPANs(false)}c.each(f.undesiredTags,function(j,k){g.find(j).each(function(l,m){if(j==="div"||j==="a"){c(this).before("<br />")}switch(k){case"remove":c(this).remove();break;case"extractContent":var n=c(this);n.contents().each(function(){n.before(this)});n.remove();break;default:c(this).remove();break}})});if(this.wysiwyg){h=g.html()}else{h=c(this.textarea).val()}h=h.replace(/^\s*/,"");h=h.replace(/\s*$/,"");h=h.replace(/<--.*-->/,"");h=h.replace(/<[^>]*>/g,function(j){j=j.replace(/='(.*)' /g,'="$1" ');j=j.replace(/ ([^=]+)="?([^"]*)"?/g,function(k,l,m){if(c.inArray(l,f.allowedAttributes)==-1){return""}switch(l){case"id":if(c.inArray(m,f.allowedIDs)==-1){return""}break;case"class":if(m.indexOf("tmp_photo")!==-1){return k}else{if(m.indexOf("uploaded_photo")!==-1){return k}else{if(m.indexOf("inserted_links")!==-1){return k}}}if(c.inArray(m,f.allowedClasses)==-1){return""}break;default:return k}});return j});h=h.replace(/<a.*?href=\"(.*?)\">(.*?)<\/a>/gi,function(j){if(/class=\"inserted_links\"/ig.test(j)){return j}else{j=j.replace(/<a href[^>]*>/gi,"");j=j.replace(/<\/a>/gi,"");return j}});h=h.replace(/ style="[^"]*"/g,"");h=h.replace(/<br>/g,"<br />");h=h.replace(/<br \/>\s*<\/(h1|h2|h3|h4|h5|h6|li|p)/g,"</$1");h=h.replace(/(<br \/>)*\s*(<\/[^>]*>)/g,"$2$1");h=h.replace(/(<img [^>]+[^\/])>/g,"$1 />");h=h.replace(/(<[^\/]>|<[^\/][^>]*[^\/]>)\s*<\/[^>]*>/g,"");h=h.replace(/<\?xml[^>]*>/g,"");h=h.replace(/<[^ >]+:[^>]*>/g,"");h=h.replace(/<\/[^ >]+:[^>]*>/g,"");if(i){c(this.input).val(h);this.cleaning=false;return}else{h=h}if(this.wysiwyg){c(this.iframe.contentWindow.document).find("body").html(h)}else{c(this.textarea).val(h)}c(this.input).val(h);this.cleaning=false},refreshDisplay:function(){if(this.wysiwyg){c(this.iframe.contentWindow.document).find("body").html(c(this.input).val())}else{c(this.textarea).val(c(this.input).val())}},updateuEditorInput:function(){if(this.wysiwyg){this.paragraphise()}else{c(this.input).val(c(this.textarea).val())}},cleanHTML:function(){var h=this;var g=c(this.iframe).contents().find("body");return g.html()},text:function(){var g=c(this.iframe).contents().find("body");return g.text()},focus:function(){var g=c(this.iframe).contents().find("body");g.focus();g.append("<br>");return g.focus()},appendHtml:function(g){},insertUploadedPhoto:function(h,g){if(!c(this.iframe).contents().find("body").is(":focus")){c(this).focus()}this.iframe.contentWindow.focus();c(this.iframe).appendToSelection("br",{},null,true);c(this.iframe).appendToSelection("img",{src:h,alt:"","class":"tmp_photo","data-suid":g},null,true);c(this.iframe).appendToSelection("br",{},null,true)},init:function(g){if(typeof(document.designMode)!="string"&&document.designMode!="off"){return}this.locked=true;this.cleaning=false;this.DOMCache="";this.wysiwyg=true;this.createDOM();this.writeDocument(g.stylesheet);this.makeEditable();this.modifyFormSubmit();return this}});this.init(f)};var b=function(e){c.extend(this,{createDOM:function(){var f=this;this.itemsList=document.createElement("ul");c(this.itemsList).addClass("uEditorToolbar");c.each(this.uEditor.settings.toolbarItems,function(h,g){if(g=="formatblock"){f.addSelect(g)}else{f.addButton(g)}})},addButton:function(f){var h=c.uEditorToolbarItems[f];var i=c(document.createElement("li")).attr({id:h.id+"_wrapper","class":"wrapper"});var g=(typeof(this.uEditor.settings.translation[f])!="undefined")?this.uEditor.settings.translation[f]:h.label;var j=c(document.createElement("a")).attr({title:g,id:h.id,"class":h.className,href:"javascript:void(0)"});h.editor=this.uEditor;c(j).data("action",h);c(j).data("editor",this.uEditor);j.bind("click",h.action);i.append(j);c(this.itemsList).append(i)},addSelect:function(g){var i=this;var f=c.uEditorToolbarItems[g];var l=c(document.createElement("li")).attr("class","uEditorEditSelect");var j=c(document.createElement("select")).attr({name:f.name,"class":f.className});c(j).data("editor",this.uEditor);c(j).change(f.action);var k=c(document.createElement("option"));var h=(typeof(this.uEditor.settings.translation[g])!="undefined")?this.uEditor.settings.translation[g]:f.label;k.append(document.createTextNode(h));j.append(k);c.each(this.uEditor.settings.selectBlockOptions,function(m,o){var n=c(document.createElement("option")).attr("value",o);n.append(document.createTextNode(i.uEditor.settings.translation[o]));j.append(n)});l.append(j);c(this.itemsList).append(l)},disable:function(){c(this.itemsList).toggleClass("uEditorSource");c(this.itemsList).find("li select").attr("disabled","disabled")},enable:function(){c(this.itemsList).toggleClass("uEditorSource");c(this.itemsList).find("select").removeAttr("disabled")},checkState:function(h,j){if(!j){setTimeout(function(){h.toolbar.checkState(h,true);return true},500);return true}var i=null;var f=null;var g=null;c(h.toolbar.itemsList).find("a").removeClass("on");if(h.iframe.contentWindow.document.selection){i=h.iframe.contentWindow.document.selection;f=i.createRange();try{g=c(f.parentElement())}catch(k){return false}}else{try{i=h.iframe.contentWindow.getSelection()}catch(k){return false}f=i.getRangeAt(0);g=c(f.commonAncestorContainer)}while(g.nodeType==3){g=g.parent()}while(!g.is("body")){if(g.is("a")){h.toolbar.setState("link","on")}else{if(g.is("em")){h.toolbar.setState("italic","on")}else{if(g.is("strong")){h.toolbar.setState("bold","on")}else{if(g.is("span")||g.is("p")){if(g.css("font-style")=="italic"){h.toolbar.setState("italic","on")}if(g.css("font-weight")=="bold"){h.toolbar.setState("bold","on")}}else{if(g.is("ol")){h.toolbar.setState("orderedlist","on");h.toolbar.setState("unorderedlist","off")}else{if(g.is("ul")){h.toolbar.setState("orderedlist","on");h.toolbar.setState("unorderedlist","off")}else{h.toolbar.setState("formatblock",g[0].nodeName.toLowerCase())}}}}}}g=g.parent()}},setState:function(g,f){if(g!="SelectBlock"){c(this.itemsList).find("."+c.uEditorToolbarItems[g].className).addClass("on")}else{c(this.itemsList).find("."+c.uEditorToolbarItems[g].className).val(f)}},init:function(f){this.uEditor=f;this.createDOM()}});this.init(e)};var d=function(){uEditorToolbarItemsClass=this.constructor;if(typeof(uEditorToolbarItemsClass.singleton)!="undefined"){return uEditorToolbarItemsClass.singleton}else{uEditorToolbarItemsClass.singleton=this}c.extend(uEditorToolbarItemsClass.singleton,{bold:{className:"uEditorButtonBold",action:function(){var e=c.data(this,"editor");if(!e.wysiwyg){return}e.iframe.contentWindow.document.execCommand("bold",false,null);e.toolbar.setState("bold","on")}},italic:{className:"uEditorButtonItalic",action:function(){var e=c.data(this,"editor");if(!e.wysiwyg){return}e.iframe.contentWindow.document.execCommand("italic",false,null);e.toolbar.setState("italic","on")}},link:{className:"uEditorButtonHyperlink",action:function(){var g=c.data(this,"editor");if(!g.wysiwyg){return}if(c(this).hasClass("on")){g.iframe.contentWindow.document.execCommand("Unlink",false,null);return}var f=c(g.iframe).getSelection();if(f==""){alert(g.settings.translation.selectTextToHyperlink);return}var e=prompt(g.settings.translation.linkURL,"http://");if(e!=null){g.iframe.contentWindow.document.execCommand("insertHTML",false,'<a class="inserted_links" href="'+e+'">'+f+"</a>");g.toolbar.setState("link","on")}}},videolink:{className:"uEditorButtonVideo",action:function(){var g=c.data(this,"editor");if(!g.wysiwyg){return}var f=prompt("输入视频地址:","http://");if(f&&f.split("http://")[1]!==""){var e=sogoke.createVideo(f);g.iframe.contentWindow.document.execCommand("insertHTML",false,e)}else{alert("未插入视频")}}},orderedlist:{className:"uEditorButtonOrderedList",action:function(){var e=c.data(this,"editor");if(!e.wysiwyg){return}e.iframe.contentWindow.document.execCommand("insertorderedlist",false,null);e.toolbar.setState("orderedlist","on")}},unorderedlist:{className:"uEditorButtonUnorderedList",action:function(){var e=c.data(this,"editor");if(!e.wysiwyg){return}e.iframe.contentWindow.document.execCommand("insertunorderedlist",false,null);e.toolbar.setState("unorderedlist","on")}},image:{className:"uEditorButtonImage",action:function(){var f=c.data(this,"editor");if(!f.wysiwyg){return}var e=prompt(f.settings.translation.imageLocation,"");if(e!=null&&e!=""){var g=prompt(f.settings.translation.imageAlternateText,"");g=g.replace(/"/g,"'");c(f.iframe).appendToSelection("img",{src:e,alt:g},null,true)}}},htmlsource:{className:"uEditorButtonHTML",action:function(){var e=c.data(this,"editor");e.switchMode()}},formatblock:{className:"uEditorSelectformatblock",action:function(){var e=c.data(this,"editor");if(!e.wysiwyg){return}e.iframe.contentWindow.document.execCommand("formatblock",false,c(this).val())}}})};c.uEditorToolbarItems=new d();c.fn.extend({getSelection:function(){if(!this.is("iframe")){return}else{iframe=this[0]}return(iframe.contentWindow.document.selection)?iframe.contentWindow.document.selection.createRange().text:iframe.contentWindow.getSelection().toString()},appendToSelection:function(g,m,e,l){var n,k,f;if(!this.is("iframe")){return}else{f=this[0]}if(c.browser.msie){var j="<"+g;c.each(m,function(o,p){j+=" "+o+'="'+p+'"'});if(l){j+=" />"}else{j+=">";if(e&&typeof(e)!="undefined"){j+=e}j+="</"+g+">"}f.contentWindow.document.body.focus();k=f.contentWindow.document.selection.createRange();if(c(k.parentElement()).parents("body").is("#iframeBody ")){k.collapse(false);k.pasteHTML(j)}else{k.collapse(false);k.pasteHTML(j)}f.contentWindow.document.body.focus()}else{n=f.contentWindow.getSelection();k=n.getRangeAt(0);k.collapse(false);var h=f.contentWindow.document.createElement(g);c(h).attr(m);if(e&&typeof(e)!="undefined"){c(h).append(document.createTextNode(e))}k.insertNode(h);var i=f.contentWindow.document.createRange();i.setStartAfter(h);i.setEndAfter(h);i.selectNode(h);i.collapse(false);n.removeAllRanges();n.addRange(i)}},uEditor:function(h,k){var e={bold:"Bold",italic:"Italic",link:"Hyperlink",unorderedlist:"Unordered List",orderedlist:"Ordered List",image:"Insert image",htmlsource:"HTML Source",formatblock:"Change Block Type",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",selectTextToHyperlink:"Please select the text you wish to hyperlink.",linkURL:"Enter the URL for this link:",imageLocation:"Enter the location for this image:",imageAlternateText:"Enter the alternate text for this image:"};var j={b:"extractContent",h1:"extractContent",h2:"extractContent",h3:"extractContent",h4:"extractContent",h5:"extractContent",h6:"extractContent",script:"remove",meta:"remove",link:"remove",basefont:"remove",noscript:"extractContent",nobr:"extractContent",object:"remove",applet:"remove",form:"extractContent",fieldset:"extractContent",input:"remove",select:"remove",textarea:"remove",button:"remove",isindex:"remove",label:"extractContent",legend:"extractContent",div:"extractContent",table:"extractContent",thead:"extractContent",tbody:"extractContent",tr:"extractContent",td:"extractContent",tfoot:"extractContent",col:"extractContent",colgroup:"extractContent",center:"extractContent",area:"remove",dir:"extractContent",frame:"remove",style:"remove",frameset:"remove",noframes:"remove",iframe:"remove"};var f=["class","id","href","title","alt","src","data-suid","CLASS"],i=[],g=["tmp_photo","uploaded_photo","inserted_links"];h=c.extend({insertParagraphs:true,stylesheet:"uEditorContent.css",toolbarItems:["bold","italic","link","image","orderedlist","unorderedlist","htmlsource","formatblock"],selectBlockOptions:["h1","h2","h3","h4","h5","h6","p"],undesiredTags:j,allowedClasses:g,allowedIDs:i,allowedAttributes:f,containerClass:"uEditor",translation:e},h);h.undesiredTags=(h.undesiredTags.length!=j.length)?c.removeDuplicate(c.merge(h.undesiredTags,j)):h.undesiredTags;h.allowedAttributes=(h.allowedAttributes.length!=f.length)?c.removeDuplicate(c.merge(h.allowedAttributes,f)):h.allowedAttributes;h.allowedIDs=(h.allowedIDs.length!=i.length)?c.removeDuplicate(c.merge(h.allowedIDs,i)):h.allowedIDs;h.allowedClasses=(h.allowedClasses.length!=g.length)?c.removeDuplicate(c.merge(h.allowedClasses,g)):h.allowedClasses;return this.each(function(){k(new a(this,h))})}})})(jQuery);
var uEditorI18N={en:{bold:"Bold",italic:"Italic",link:"Hyperlink",unorderedlist:"Unordered List",orderedlist:"Ordered List",image:"Insert image",htmlsource:"HTML Source",formatblock:"Change Block Type",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6",p:"Paragraph",selectTextToHyperlink:"Please select the text you wish to hyperlink.",linkURL:"Enter the URL for this link:",imageLocation:"Enter the location for this image:",imageAlternateText:"Enter the alternate text for this image:"},zh_cn:{bold:"粗体",italic:"斜体",link:"超链接",unorderedlist:"乱序列表",orderedlist:"有序列表",image:"插入图片超链接",htmlsource:"HTML源代码",formatblock:"更改块标签",h1:"标题1",h2:"标题2",h3:"3",h4:"4",h5:"5",h6:"6",p:"段落",selectTextToHyperlink:"请选择你想要链接的文字.",linkURL:"填写链接地址:",imageLocation:"填写图片地址:",imageAlternateText:"填写图片的说明:"},fr:{bold:"Gras",italic:"Italique",link:"Lien",unorderedlist:"Liste",orderedlist:"Liste ordonnée",image:"Insérer une image",htmlsource:"Source HTML",formatblock:"Changer le type de bloc",h1:"Titre de niveau 1",h2:"Titre de niveau 2",h3:"Titre de niveau 3",h4:"Titre de niveau 4",h5:"Titre de niveau 5",h6:"Titre de niveau 6",p:"Paragraphe",selectTextToHyperlink:"Veuillez sélectionner le texte que vous souhaitez transformer en lien.",linkURL:"URL du lien:",imageLocation:"Location de l'image:",imageAlternateText:"Texte alternatif pour cette image:",askForCleaning:"Le texte que vous venez de coller semble déjà formaté. Souhaitez-vous le nettoyer ?"}};
(function(a){a.fn.endlessScroll=function(c){var f={bottomPixels:50,fireOnce:true,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return false},callback:function(){return true},ceaseFire:function(){return false}};var c=a.extend({},f,c);var d=true;var e=false;var b=0;if(c.ceaseFire.apply(this)===true){d=false}if(d===true){a(this).scroll(function(){if(c.ceaseFire.apply(this)===true){d=false;return}if(this==document||this==window){var h=a(document).height()-a(window).height()<=a(window).scrollTop()+c.bottomPixels}else{var g=a(".endless_scroll_inner_wrap",this);if(g.length==0){g=a(this).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")}var h=g.length>0&&(g.height()-a(this).height()<=a(this).scrollTop()+c.bottomPixels)}if(h&&(c.fireOnce==false||(c.fireOnce==true&&e!=true))){if(c.resetCounter.apply(this)===true){b=0}e=true;b++;a(c.insertAfter).after('<div id="endless_scroll_loader">'+c.loader+"</div>");data=typeof c.data=="function"?c.data.apply(this,[b]):c.data;if(data!==false){a(c.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>");a("div#endless_scroll_data").hide().fadeIn();a("div#endless_scroll_data").removeAttr("id");c.callback.apply(this,[b]);if(c.fireDelay!==false||c.fireDelay!==0){a("body").after('<div id="endless_scroll_marker"></div>');a("div#endless_scroll_marker").fadeTo(c.fireDelay,1,function(){a(this).remove();e=false})}else{e=false}}a("div#endless_scroll_loader").remove()}})}}})(jQuery);
(function(a){a.loadingDots=function(c,b){var d=this;d.$el=a(c);d.oldWord=d.$el.val();d.$el.data("loadingDots",d);d.stopInterval=function(){clearInterval(d.theInterval);d.$el.val(d.oldWord)};d.dotItUp=function(){d.i=++d.i%4;d.$el.val(d.options.word+Array(d.i+1).join("."))};d.init=function(){d.i=0;d.options=a.extend({},a.loadingDots.defaultOptions,b);d.theInterval=setInterval(d.dotItUp,d.options.speed)};d.init()};a.loadingDots.defaultOptions={speed:500,maxDots:3,word:"Loading"};a.fn.loadingDots=function(b){if(typeof(b)=="string"){var c=a(this).data("loadingDots");if(c){c.stopInterval()}}else{return this.each(function(){(new a.loadingDots(this,b))})}}})(jQuery);(function(a){a.loadingDots2=function(c,b){var d=this;d.$el=a(c);d.oldWord=d.$el.text();d.$el.data("loadingDots",d);d.stopInterval=function(){clearInterval(d.theInterval);d.$el.text(d.oldWord)};d.dotItUp=function(){d.i=++d.i%4;d.$el.text(d.options.word+Array(d.i+1).join("."))};d.init=function(){d.i=0;d.options=a.extend({},a.loadingDots2.defaultOptions,b);d.theInterval=setInterval(d.dotItUp,d.options.speed)};d.init()};a.loadingDots2.defaultOptions={speed:500,maxDots:3,word:"Loading"};a.fn.loadingDots2=function(b){if(typeof(b)=="string"){var c=a(this).data("loadingDots");if(c){c.stopInterval()}}else{return this.each(function(){(new a.loadingDots2(this,b))})}}})(jQuery);
/*!
 * jQuery Form Plugin
 * version: 2.95 (30-JAN-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(d){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this}var c,t,f,h=this;if(typeof d=="function"){d={success:d}}c=this.attr("method");t=this.attr("action");f=(typeof t==="string")?b.trim(t):"";f=f||window.location.href||"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}console.log(c);d=b.extend(true,{url:f,success:b.ajaxSettings.success,type:c||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);var m={};this.trigger("form-pre-serialize",[this,d,m]);if(m.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(d.beforeSerialize&&d.beforeSerialize(this,d)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g=d.traditional;if(g===undefined){g=b.ajaxSettings.traditional}var x,s,j,y=this.formToArray(d.semantic);if(d.data){d.extraData=d.data;x=b.param(d.data,g)}if(d.beforeSubmit&&d.beforeSubmit(y,this,d)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[y,this,d,m]);if(m.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var r=b.param(y,g);if(x){r=(r?(r+"&"+x):x)}if(d.type.toUpperCase()=="GET"){d.url+=(d.url.indexOf("?")>=0?"&":"?")+r;d.data=null}else{d.data=r}var A=[];if(d.resetForm){A.push(function(){h.resetForm()})}if(d.clearForm){A.push(function(){h.clearForm(d.includeHidden)})}if(!d.dataType&&d.target){var e=d.success||function(){};A.push(function(q){var n=d.replaceTarget?"replaceWith":"html";b(d.target)[n](q).each(e,arguments)})}else{if(d.success){A.push(d.success)}}d.success=function(C,q,D){var B=d.context||d;for(var v=0,n=A.length;v<n;v++){A[v].apply(B,[C,q,D||h,h])}};var w=b("input:file:enabled[value]",this);var i=w.length>0;var u="multipart/form-data";var p=(h.attr("enctype")==u||h.attr("encoding")==u);var o=!!(i&&w.get(0).files&&window.FormData);a("fileAPI :"+o);var k=(i||p)&&!o;if(d.iframe!==false&&(d.iframe||k)){if(d.closeKeepAlive){b.get(d.closeKeepAlive,function(){z(y)})}else{z(y)}}else{if((i||p)&&o){d.progress=d.progress||b.noop;l(y)}else{b.ajax(d)}}this.trigger("form-submit-notify",[this,d]);return this;function l(q){var n=new FormData();for(var B=0;B<q.length;B++){if(q[B].type=="file"){continue}n.append(q[B].name,q[B].value)}h.find("input:file:enabled").each(function(){var E=b(this).attr("name"),G=this.files;if(E){for(var F=0;F<G.length;F++){n.append(E,G[F])}}});if(d.extraData){for(var v in d.extraData){n.append(v,d.extraData[v])}}d.data=null;var D=b.extend(true,{},b.ajaxSettings,d,{contentType:false,processData:false,cache:false,type:"POST"});D.data=null;var C=D.beforeSend;D.beforeSend=function(F,E){E.data=n;if(F.upload){F.upload.onprogress=function(G){E.progress(G.position,G.total)}}if(C){C.call(E,F,d)}};b.ajax(D)}function z(Z){var E=h[0],D,V,P,X,S,G,K,I,J,T,W,N;var H=!!b.fn.prop;if(Z){if(H){for(V=0;V<Z.length;V++){D=b(E[Z[V].name]);D.prop("disabled",false)}}else{for(V=0;V<Z.length;V++){D=b(E[Z[V].name]);D.removeAttr("disabled")}}}if(b(":input[name=submit],:input[id=submit]",E).length){alert('Error: Form elements must not have name or id of "submit".');return}P=b.extend(true,{},b.ajaxSettings,d);P.context=P.context||P;S="jqFormIO"+(new Date().getTime());if(P.iframeTarget){G=b(P.iframeTarget);T=G.attr("name");if(T==null){G.attr("name",S)}else{S=T}}else{G=b('<iframe name="'+S+'" src="'+P.iframeSrc+'" />');G.css({position:"absolute",top:"-1000px",left:"-1000px"})}K=G[0];I={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var ac=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+ac);this.aborted=1;G.attr("src",P.iframeSrc);I.error=ac;P.error&&P.error.call(P.context,I,ac,n);X&&b.event.trigger("ajaxError",[I,P,ac]);P.complete&&P.complete.call(P.context,I,ac)}};X=P.global;if(X&&!b.active++){b.event.trigger("ajaxStart")}if(X){b.event.trigger("ajaxSend",[I,P])}if(P.beforeSend&&P.beforeSend.call(P.context,I,P)===false){if(P.global){b.active--}return}if(I.aborted){return}J=E.clk;if(J){T=J.name;if(T&&!J.disabled){P.extraData=P.extraData||{};P.extraData[T]=J.value;if(J.type=="image"){P.extraData[T+".x"]=E.clk_x;P.extraData[T+".y"]=E.clk_y}}}var O=1;var L=2;function M(ac){var n=ac.contentWindow?ac.contentWindow.document:ac.contentDocument?ac.contentDocument:ac.document;return n}var C=b("meta[name=csrf-token]").attr("content");var B=b("meta[name=csrf-param]").attr("content");if(B&&C){P.extraData=P.extraData||{};P.extraData[B]=C}function U(){var ae=h.attr("target"),ac=h.attr("action");E.setAttribute("target",S);if(!c){E.setAttribute("method","POST")}if(ac!=P.url){E.setAttribute("action",P.url)}if(!P.skipEncodingOverride&&(!c||/post/i.test(c))){h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(P.timeout){N=setTimeout(function(){W=true;R(O)},P.timeout)}function af(){try{var n=M(K).readyState;a("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(af,50)}}catch(ah){a("Server abort: ",ah," (",ah.name,")");R(L);N&&clearTimeout(N);N=undefined}}var ad=[];try{if(P.extraData){for(var ag in P.extraData){ad.push(b('<input type="hidden" name="'+ag+'">').attr("value",P.extraData[ag]).appendTo(E)[0])}}if(!P.iframeTarget){G.appendTo("body");K.attachEvent?K.attachEvent("onload",R):K.addEventListener("load",R,false)}setTimeout(af,15);E.submit()}finally{E.setAttribute("action",ac);if(ae){E.setAttribute("target",ae)}else{h.removeAttr("target")}b(ad).remove()}}if(P.forceSync){U()}else{setTimeout(U,10)}var aa,ab,Y=50,F;function R(ag){if(I.aborted||F){return}try{ab=M(K)}catch(aj){a("cannot access response document: ",aj);ag=L}if(ag===O&&I){I.abort("timeout");return}else{if(ag==L&&I){I.abort("server abort");return}}if(!ab||ab.location.href==P.iframeSrc){if(!W){return}}K.detachEvent?K.detachEvent("onload",R):K.removeEventListener("load",R,false);var ae="success",ai;try{if(W){throw"timeout"}var ad=P.dataType=="xml"||ab.XMLDocument||b.isXMLDoc(ab);a("isXml="+ad);if(!ad&&window.opera&&(ab.body==null||ab.body.innerHTML=="")){if(--Y){a("requeing onLoad callback, DOM not available");setTimeout(R,250);return}}var ak=ab.body?ab.body:ab.documentElement;I.responseText=ak?ak.innerHTML:null;I.responseXML=ab.XMLDocument?ab.XMLDocument:ab;if(ad){P.dataType="xml"}I.getResponseHeader=function(an){var am={"content-type":P.dataType};return am[an]};if(ak){I.status=Number(ak.getAttribute("status"))||I.status;I.statusText=ak.getAttribute("statusText")||I.statusText}var n=(P.dataType||"").toLowerCase();var ah=/(json|script|text)/.test(n);if(ah||P.textarea){var af=ab.getElementsByTagName("textarea")[0];if(af){I.responseText=af.value;I.status=Number(af.getAttribute("status"))||I.status;I.statusText=af.getAttribute("statusText")||I.statusText}else{if(ah){var ac=ab.getElementsByTagName("pre")[0];var al=ab.getElementsByTagName("body")[0];if(ac){I.responseText=ac.textContent?ac.textContent:ac.innerText}else{if(al){I.responseText=al.textContent?al.textContent:al.innerText}}}}}else{if(n=="xml"&&!I.responseXML&&I.responseText!=null){I.responseXML=Q(I.responseText)}}try{aa=q(I,n,P)}catch(ag){ae="parsererror";I.error=ai=(ag||ae)}}catch(ag){a("error caught: ",ag);ae="error";I.error=ai=(ag||ae)}if(I.aborted){a("upload aborted");ae=null}if(I.status){ae=(I.status>=200&&I.status<300||I.status===304)?"success":"error"}if(ae==="success"){P.success&&P.success.call(P.context,aa,"success",I);X&&b.event.trigger("ajaxSuccess",[I,P])}else{if(ae){if(ai==undefined){ai=I.statusText}P.error&&P.error.call(P.context,I,ae,ai);X&&b.event.trigger("ajaxError",[I,P,ai])}}X&&b.event.trigger("ajaxComplete",[I,P]);if(X&&!--b.active){b.event.trigger("ajaxStop")}P.complete&&P.complete.call(P.context,I,ae);F=true;if(P.timeout){clearTimeout(N)}setTimeout(function(){if(!P.iframeTarget){G.remove()}I.responseXML=null},100)}var Q=b.parseXML||function(n,ac){if(window.ActiveXObject){ac=new ActiveXObject("Microsoft.XMLDOM");ac.async="false";ac.loadXML(n)}else{ac=(new DOMParser()).parseFromString(n,"text/xml")}return(ac&&ac.documentElement&&ac.documentElement.nodeName!="parsererror")?ac:null};var v=b.parseJSON||function(n){return window["eval"]("("+n+")")};var q=function(ag,ae,ad){var ac=ag.getResponseHeader("content-type")||"",n=ae==="xml"||!ae&&ac.indexOf("xml")>=0,af=n?ag.responseXML:ag.responseText;if(n&&af.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(ad&&ad.dataFilter){af=ad.dataFilter(af,ae)}if(typeof af==="string"){if(ae==="json"||!ae&&ac.indexOf("json")>=0){af=v(af)}else{if(ae==="script"||!ae&&ac.indexOf("javascript")>=0){b.globalEval(af)}}}return af}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val(),type:e.type});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r,type:e.type})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return b(c).val()};b.fn.clearForm=function(c){return this.each(function(){b("input,select,textarea",this).clearFields(c)})};b.fn.clearFields=b.fn.clearInputs=function(c){var d=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var f=this.type,e=this.tagName.toLowerCase();if(d.test(f)||e=="textarea"||(c&&/hidden/.test(f))){this.value=""}else{if(f=="checkbox"||f=="radio"){this.checked=false}else{if(e=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};b.fn.ajaxSubmit.debug=false;function a(){if(!b.fn.ajaxSubmit.debug){return}var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);
var sina={$:function(objName){if(document.getElementById){return eval('document.getElementById("'+objName+'")')}else{return eval("document.all."+objName)}},isIE:navigator.appVersion.indexOf("MSIE")!=-1?true:false,addEvent:function(a,c,b){if(a.attachEvent){a.attachEvent("on"+c,b)}else{a.addEventListener(c,b,false)}},delEvent:function(a,c,b){if(a.detachEvent){a.detachEvent("on"+c,b)}else{a.removeEventListener(c,b,false)}},readCookie:function(d){var e="",a=d+"=";if(document.cookie.length>0){var c=document.cookie.indexOf(a);if(c!=-1){c+=a.length;var b=document.cookie.indexOf(";",c);if(b==-1){b=document.cookie.length}e=unescape(document.cookie.substring(c,b))}}return e},writeCookie:function(d,a,f,g){var e="",b="";if(f!=null){e=new Date((new Date).getTime()+f*3600000);e="; expires="+e.toGMTString()}if(g!=null){b=";domain="+g}document.cookie=d+"="+escape(a)+e+b},readStyle:function(b,a){if(b.style[a]){return b.style[a]}else{if(b.currentStyle){return b.currentStyle[a]}else{if(document.defaultView&&document.defaultView.getComputedStyle){var c=document.defaultView.getComputedStyle(b,null);return c.getPropertyValue(a)}else{return null}}}}};function ScrollPic(b,g,f,e){this.scrollContId=b;this.arrLeftId=g;this.arrRightId=f;this.dotListId=e;this.dotClassName="dotItem";this.dotOnClassName="dotItemOn";this.dotObjArr=[];this.pageWidth=0;this.frameWidth=0;this.speed=10;this.space=10;this.pageIndex=0;this.autoPlay=true;this.autoPlayTime=5;var a,d,c="ready";this.stripDiv=document.createElement("DIV");this.listDiv01=document.createElement("DIV");this.listDiv02=document.createElement("DIV");if(!ScrollPic.childs){ScrollPic.childs=[]}this.ID=ScrollPic.childs.length;ScrollPic.childs.push(this);this.initialize=function(){if(!this.scrollContId){throw new Error("必须指定scrollContId.");return}this.scrollContDiv=sina.$(this.scrollContId);if(!this.scrollContDiv){throw new Error('scrollContId不是正确的对象.(scrollContId = "'+this.scrollContId+'")');return}this.scrollContDiv.style.width=this.frameWidth+"px";this.scrollContDiv.style.overflow="hidden";this.listDiv01.innerHTML=this.listDiv02.innerHTML=this.scrollContDiv.innerHTML;this.scrollContDiv.innerHTML="";this.scrollContDiv.appendChild(this.stripDiv);this.stripDiv.appendChild(this.listDiv01);this.stripDiv.appendChild(this.listDiv02);this.stripDiv.style.overflow="hidden";this.stripDiv.style.zoom="1";this.stripDiv.style.width="1360px";this.listDiv01.style.cssFloat="left";this.listDiv02.style.cssFloat="left";sina.addEvent(this.scrollContDiv,"mouseover",Function("ScrollPic.childs["+this.ID+"].stop()"));sina.addEvent(this.scrollContDiv,"mouseout",Function("ScrollPic.childs["+this.ID+"].play()"));if(this.arrLeftId){this.arrLeftObj=sina.$(this.arrLeftId);if(this.arrLeftObj){sina.addEvent(this.arrLeftObj,"mousedown",Function("ScrollPic.childs["+this.ID+"].rightMouseDown()"));sina.addEvent(this.arrLeftObj,"mouseup",Function("ScrollPic.childs["+this.ID+"].rightEnd()"));sina.addEvent(this.arrLeftObj,"mouseout",Function("ScrollPic.childs["+this.ID+"].rightEnd()"))}}if(this.arrRightId){this.arrRightObj=sina.$(this.arrRightId);if(this.arrRightObj){sina.addEvent(this.arrRightObj,"mousedown",Function("ScrollPic.childs["+this.ID+"].leftMouseDown()"));sina.addEvent(this.arrRightObj,"mouseup",Function("ScrollPic.childs["+this.ID+"].leftEnd()"));sina.addEvent(this.arrRightObj,"mouseout",Function("ScrollPic.childs["+this.ID+"].leftEnd()"))}}if(this.dotListId){this.dotListObj=sina.$(this.dotListId);if(this.dotListObj){var h=Math.round(this.listDiv01.offsetWidth/this.frameWidth+0.4),k,j;for(k=0;k<h;k++){j=document.createElement("span");this.dotListObj.appendChild(j);this.dotObjArr.push(j);if(k==this.pageIndex){j.className=this.dotClassName}else{j.className=this.dotOnClassName}j.title="第"+(k+1)+"页";sina.addEvent(j,"click",Function("ScrollPic.childs["+this.ID+"].pageTo("+k+")"))}}}if(this.autoPlay){this.play()}};this.leftMouseDown=function(){if(c!="ready"){return}c="floating";d=setInterval("ScrollPic.childs["+this.ID+"].moveLeft()",this.speed)};this.rightMouseDown=function(){if(c!="ready"){return}c="floating";d=setInterval("ScrollPic.childs["+this.ID+"].moveRight()",this.speed)};this.moveLeft=function(){if(this.scrollContDiv.scrollLeft+this.space>=this.listDiv01.scrollWidth){this.scrollContDiv.scrollLeft=this.scrollContDiv.scrollLeft+this.space-this.listDiv01.scrollWidth}else{this.scrollContDiv.scrollLeft+=this.space}this.accountPageIndex()};this.moveRight=function(){if(this.scrollContDiv.scrollLeft-this.space<=0){this.scrollContDiv.scrollLeft=this.listDiv01.scrollWidth+this.scrollContDiv.scrollLeft-this.space}else{this.scrollContDiv.scrollLeft-=this.space}this.accountPageIndex()};this.leftEnd=function(){if(c!="floating"){return}c="stoping";clearInterval(d);var h=this.pageWidth-this.scrollContDiv.scrollLeft%this.pageWidth;this.move(h)};this.rightEnd=function(){if(c!="floating"){return}c="stoping";clearInterval(d);var h=-this.scrollContDiv.scrollLeft%this.pageWidth;this.move(h)};this.move=function(i,j){var k=i/5;if(!j){if(k>this.space){k=this.space}if(k<-this.space){k=-this.space}}if(Math.abs(k)<1&&k!=0){k=k>=0?1:-1}else{k=Math.round(k)}var h=this.scrollContDiv.scrollLeft+k;if(k>0){if(this.scrollContDiv.scrollLeft+k>=this.listDiv01.scrollWidth){this.scrollContDiv.scrollLeft=this.scrollContDiv.scrollLeft+k-this.listDiv01.scrollWidth}else{this.scrollContDiv.scrollLeft+=k}}else{if(this.scrollContDiv.scrollLeft-k<=0){this.scrollContDiv.scrollLeft=this.listDiv01.scrollWidth+this.scrollContDiv.scrollLeft-k}else{this.scrollContDiv.scrollLeft+=k}}i-=k;if(Math.abs(i)==0){c="ready";if(this.autoPlay){this.play()}this.accountPageIndex();return}else{this.accountPageIndex();setTimeout("ScrollPic.childs["+this.ID+"].move("+i+","+j+")",this.speed)}};this.next=function(){if(c!="ready"){return}c="stoping";this.move(this.pageWidth,true)};this.play=function(){if(!this.autoPlay){return}clearInterval(a);a=setInterval("ScrollPic.childs["+this.ID+"].next()",this.autoPlayTime*1000)};this.stop=function(){clearInterval(a)};this.pageTo=function(h){if(c!="ready"){return}c="stoping";var i=h*this.frameWidth-this.scrollContDiv.scrollLeft;this.move(i,true)};this.accountPageIndex=function(){this.pageIndex=Math.round(this.scrollContDiv.scrollLeft/this.frameWidth);if(this.pageIndex>Math.round(this.listDiv01.offsetWidth/this.frameWidth+0.4)-1){this.pageIndex=0}var h;for(h=0;h<this.dotObjArr.length;h++){if(h==this.pageIndex){this.dotObjArr[h].className=this.dotClassName}else{this.dotObjArr[h].className=this.dotOnClassName}}}};
/*! http://mths.be/placeholder v1.8.7 by @mathias */
(function(f,h,c){var a="placeholder" in h.createElement("input"),d="placeholder" in h.createElement("textarea"),i=c.fn,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){return this.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind("focus.placeholder",b).bind("blur.placeholder",e).trigger("blur.placeholder").end()};j.input=a;j.textarea=d;c(function(){c(h).delegate("form","submit.placeholder",function(){var k=c(".placeholder",this).each(b);setTimeout(function(){k.each(e)},10)})});c(f).bind("unload.placeholder",function(){c(".placeholder").val("")})}function g(l){var k={},m=/^jQuery\d+$/;c.each(l.attributes,function(o,n){if(n.specified&&!m.test(n.name)){k[n.name]=n.value}});return k}function b(){var k=c(this);if(k.val()===k.attr("placeholder")&&k.hasClass("placeholder")){if(k.data("placeholder-password")){k.hide().next().show().focus().attr("id",k.removeAttr("id").data("placeholder-id"))}else{k.val("").removeClass("placeholder")}}}function e(){var o,n=c(this),k=n,m=this.id;if(n.val()===""){if(n.is(":password")){if(!n.data("placeholder-textinput")){try{o=n.clone().attr({type:"text"})}catch(l){o=c("<input>").attr(c.extend(g(this),{type:"text"}))}o.removeAttr("name").data("placeholder-password",true).data("placeholder-id",m).bind("focus.placeholder",b);n.data("placeholder-textinput",o).data("placeholder-id",m).before(o)}n=n.removeAttr("id").hide().prev().attr("id",m).show()}n.addClass("placeholder").val(n.attr("placeholder"))}else{n.removeClass("placeholder")}}}(this,document,jQuery));
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){var d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});if(c.settings.submitHandler){d.filter(":submit").click(function(){c.submitButton=this})}this.submit(function(e){if(c.settings.debug){e.preventDefault()}function f(){if(c.settings.submitHandler){if(c.submitButton){var g=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);if(c.submitButton){g.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return f()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return f()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c&=b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(g),a.validator.classRules(g),a.validator.attributeRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");f.settings[e]&&f.settings[e].call(f,this[0],g)}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c);if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(c){c=this.validationTargetFor(this.clean(c));var h=a(c).rules();var d=false;for(var i in h){var g={method:i,parameters:h[i]};try{var b=a.validator.methods[i].call(this,c.value.replace(/\r/g,""),c,g.parameters);if(b=="dependency-mismatch"){d=true;continue}d=false;if(b=="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){this.settings.debug&&window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",f);throw f}}if(d){return}if(this.objectLength(h)){this.successList.push(c)}return true},customMetaMessage:function(b,d){if(!a.metadata){return}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d]},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=jQuery.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(var c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass(this.settings.validClass).addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,e){return e.form==c&&e.name==b&&e||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}});return d},attributeRules:function(c){var e={};var b=a(c);for(var f in a.validator.methods){var d;if(f==="required"&&typeof a.fn.prop==="function"){d=b.prop(f)}else{d=b.attr(f)}if(d){e[f]=d}else{if(b[0].getAttribute("type")===f){e[f]=true}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},metadataRules:function(b){if(!a.metadata){return{}}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])]}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}if(c.messages){delete c.messages}return c},normalizeRule:function(c){if(typeof c=="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(c,b)>0}default:return a.trim(c).length>0}},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g=="string"&&{url:g}||g;if(this.pending[c.name]){return"pending"}if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true;if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"},minlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)>=d},maxlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)<=d},rangelength:function(d,b,e){var c=this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c))},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(f,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(f)){return false}var g=0,e=0,b=false;f=f.replace(/\D/g,"");for(var h=f.length-1;h>=0;h--){var d=f.charAt(h);var e=parseInt(d,10);if(b){if((e*=2)>9){e-=9}}g+=e;b=!b}return(g%10)==0},accept:function(c,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+d+")$","i"))},equalTo:function(c,b,e){var d=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return c==d.val()}}});a.format=a.validator.format})(jQuery);(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode=="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f=="abort"){if(a[d]){a[d].abort()}return(a[d]=b.apply(this,arguments))}return b.apply(this,arguments)}}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f)}})}a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})})(jQuery);
(function(e){e.fn.raty=function(r){if(this.length==0){a("Selector invalid or missing!");return}else{if(this.length>1){return this.each(function(){e.fn.raty.apply(e(this),[r])})}}var o=e.extend({},e.fn.raty.defaults,r),v=e(this),m=this.attr("id"),n=0,w=o.starOn,s="",u=o.target,l=(o.width)?o.width:(o.number*o.size+o.number*4);if(m===undefined){m="raty-"+v.index();v.attr("id",m)}if(o.number>20){o.number=20}else{if(o.number<0){o.number=0}}if(o.path.substring(o.path.length-1,o.path.length)!="/"){o.path+="/"}v.data("options",o);if(!isNaN(parseInt(o.start))&&o.start>0){n=(o.start>o.number)?o.number:o.start}for(var t=1;t<=o.number;t++){w=(n>=t)?o.starOn:o.starOff;s=(t<=o.hintList.length&&o.hintList[t-1]!==null)?o.hintList[t-1]:t;v.append('<img id="'+m+"-"+t+'" src="'+o.path+w+'" alt="'+t+'" title="'+s+'" class="'+m+'"/>').append((t<o.number)?"&nbsp;":"")}if(o.iconRange&&n>0){b(m,n,o)}var q=e("<input/>",{id:m+"-score",type:"hidden",name:o.scoreName}).appendTo(v);if(n>0){q.val(n)}if(o.half){c(v,e("input#"+m+"-score").val(),o)}if(!o.readOnly){if(u!==null){u=e(u);if(u.length==0){a("Target selector invalid or missing!")}}if(o.cancel){var p=e("img."+m),x='<img src="'+o.path+o.cancelOff+'" alt="x" title="'+o.cancelHint+'" class="button-cancel"/>';if(o.cancelPlace=="left"){v.prepend(x+"&nbsp;")}else{v.append("&nbsp;").append(x)}e("#"+m+" img.button-cancel").mouseenter(function(){e(this).attr("src",o.path+o.cancelOn);p.attr("src",o.path+o.starOff);d(u,"",o)}).mouseleave(function(){e(this).attr("src",o.path+o.cancelOff);v.mouseout()}).click(function(y){e("input#"+m+"-score").removeAttr("value");if(o.click){o.click.apply(v,[null,y])}});v.css("width",l+o.size+4)}else{v.css("width",l)}v.css("cursor","pointer");h(v,o,u)}else{v.css("cursor","default");k(v,n,o)}return v};function h(n,m,o){var q=n.attr("id"),p=e("input#"+q+"-score"),l=n.children("img."+q);n.mouseleave(function(){g(n,p.val(),m);f(o,p,m)});l.bind(((m.half)?"mousemove":"mouseover"),function(s){b(q,this.alt,m);if(m.half){var r=parseFloat(((s.pageX-e(this).offset().left)/m.size).toFixed(1));r=(r>=0&&r<0.5)?0.5:1;n.data("score",parseFloat(this.alt)+r-1);c(n,n.data("score"),m)}else{b(q,this.alt,m)}d(o,this.alt,m)}).click(function(r){p.val(m.half?n.data("score"):this.alt);if(m.click){m.click.apply(n,[p.val(),r])}})}function f(n,o,l){if(n!==null){var m="";if(l.targetKeep){m=o.val();if(l.targetType=="hint"){if(o.val()==""&&l.cancel){m=l.cancelHint}else{m=l.hintList[Math.ceil(o.val())-1]}}}if(i(n)){n.val(m)}else{n.html(m)}}}function b(l,n,m){var o=e("img."+l).length,t=0,r=0,s,p;for(var q=1;q<=o;q++){s=e("img#"+l+"-"+q);if(q<=n){if(m.iconRange&&m.iconRange.length>t){p=m.iconRange[t][0];r=m.iconRange[t][1];if(q<=r){s.attr("src",m.path+p)}if(q==r){t++}}else{s.attr("src",m.path+m.starOn)}}else{s.attr("src",m.path+m.starOff)}}}function k(m,o,l){var n="";if(o!=0){o=parseInt(o);n=(o>0&&l.number<=l.hintList.length&&l.hintList[o-1]!==null)?l.hintList[o-1]:o}else{n=l.noRatedMsg}m.attr("title",n).children("img").attr("title",n)}function i(l){return l.is("input")||l.is("select")||l.is("textarea")}function g(m,n,l){var o=m.attr("id");if(isNaN(parseInt(n))){m.children("img."+o).attr("src",l.path+l.starOff);e("input#"+o+"-score").removeAttr("value");return}if(n<0){n=0}else{if(n>l.number){n=l.number}}b(o,n,l);if(n>0){e("input#"+o+"-score").val(n);if(l.half){c(m,n,l)}}if(l.readOnly||m.css("cursor")=="default"){k(m,n,l)}}function d(o,n,l){if(o!==null){var m=n;if(l.targetType=="hint"){if(n==0&&l.cancel){m=l.cancelHint}else{m=l.hintList[n-1]}}if(i(o)){o.val(m)}else{o.html(m)}}}function c(n,p,m){var q=n.attr("id"),l=Math.ceil(p),o=(l-p).toFixed(1);if(o>0.25&&o<=0.75){l=l-0.5;e("img#"+q+"-"+Math.ceil(l)).attr("src",m.path+m.starHalf)}else{if(o>0.75){l--}else{e("img#"+q+"-"+l).attr("src",m.path+m.starOn)}}}e.fn.raty.cancel=function(l,n){var m=(n===undefined)?false:true;if(m){return e.fn.raty.click("",l,"cancel")}else{return e.fn.raty.start("",l,"cancel")}};e.fn.raty.click=function(o,m){var n=j(o,m,"click"),l=e(m).data("options");if(m.indexOf(".")>=0){return}g(n,o,l);if(l.click){l.click.apply(n,[o])}else{a('You must add the "click: function(score, evt) { }" callback.')}return n};e.fn.raty.readOnly=function(o,m){var n=j(o,m,"readOnly"),l=e(m).data("options"),p=n.children("img.button-cancel");if(m.indexOf(".")>=0){return}if(p[0]){(o)?p.hide():p.show()}if(o){e("img."+n.attr("id")).unbind();n.css("cursor","default").unbind()}else{h(n,l);n.css("cursor","pointer")}return n};e.fn.raty.start=function(o,m){var n=j(o,m,"start"),l=e(m).data("options");if(m.indexOf(".")>=0){return}g(n,o,l);return n};function j(p,m,l){var n=undefined;if(m==undefined){a("Specify an ID or class to be the target of the action.");return}if(m){if(m.indexOf(".")>=0){var o;return e(m).each(function(){o="#"+e(this).attr("id");if(l=="start"){e.fn.raty.start(p,o)}else{if(l=="click"){e.fn.raty.click(p,o)}else{if(l=="readOnly"){e.fn.raty.readOnly(p,o)}}}})}n=e(m);if(!n.length){a('"'+m+'" is a invalid identifier for the public funtion $.fn.raty.'+l+"().");return}}return n}function a(l){if(window.console&&window.console.log){}}e.fn.raty.defaults={cancel:false,cancelHint:"cancel this rating!",cancelOff:"cancel-off.png",cancelOn:"cancel-on.png",cancelPlace:"left",click:null,half:false,hintList:["bad","poor","regular","good","gorgeous"],noRatedMsg:"not rated yet",number:5,path:"img/",iconRange:[],readOnly:false,scoreName:"score",size:16,starHalf:"star-half.png",starOff:"star-off.png",starOn:"star-on.png",start:0,target:null,targetKeep:false,targetType:"hint",width:null}})(jQuery);
(function(a){a.fn.tagzy=function(c){a(this).data("tagzy",{settings:{emaily:false,left_invitations:5,tagClass:"tagged",containerClass:"tags",placeholderClass:"tagged_before",inputClass:"tagzy_tag",inputHTML:'<input type="text" class="tagzy_tag">',max_length_of_tags:5,max_length_of_tag_name:8,inputWrongID:"tag_name_notice",tooManyInputsID:"tag_notice"},current_field:a(document.getElementById("myForm"))});var d=a.extend(a(this).data("tagzy").settings,c);function e(h){var i=false,j="";if(h.length>d.max_length_of_tag_name){j="标签名最多8个字"}else{if(h.length<=1){j="标签名最少2个字"}else{i=true}}return{isValid:i,msg:j}}function b(h){var j=false,k="",i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(i.test(a.trim(h))){j=true}else{k="邮箱地址非法"}return{isValid:j,msg:k}}function g(k){var h=[],j=0,l=k.val().split(" ");for(;j<l.length;++j){if(l[j]&&l[j]!==""){h.push(l[j])}}return h}function f(h){var j="",i;a('div[data-for="'+h+'"]').find("."+d.tagClass+":not(a)").each(function(k){i=a(this).text();j+=i.substring(0,i.length-1)+" "});a('input[data-tagzy-identifier="'+h+'"]').val(j.substring(0,j.length-1))}return this.each(function(l,i){if(typeof data!="undefined"){data++}else{data=0}var r,q,t,k,h,p;var j=a(this);var o=a("<div/>",{"class":d.containerClass,style:"cursor:text;"});o.attr("data-for",data);a(i).attr("data-tagzy-identifier",data);var m=a("<input/>",{type:"text","class":d.inputClass});var s=a(this).val().split(" ");a.each(s,function(u,v){if(v.length>=1){q=a("<a/>",{href:"#",title:"删除","class":"delete"}).append("x");r=a("<span/>").addClass(d.tagClass).append(v);o.append(r.append(q));f(m.parent("."+d.containerClass).attr("data-for"))}});var n=o.append(m);a(this).parent().append(n);a("."+d.containerClass).on("click",function(u){u.preventDefault();a("."+d.placeholderClass).hide();a(this).find("."+d.inputClass).focus();a("."+d.placeholderClass).hide()});a("."+d.placeholderClass).on("click",function(u){u.preventDefault();a("."+d.placeholderClass).hide();a("."+d.inputClass).focus()});a("."+d.containerClass).focusout(function(u){setTimeout(function(){a("#"+d.tooManyInputsID).hide();a("#"+d.inputWrongID).hide();h=a("."+d.inputClass).val();p=g(j);if(h.length&&p.length<d.max_length_of_tags){if(d.emaily){k=b(h)}else{k=e(h)}if(k.isValid){q=a("<a/>",{href:"#",title:"删除","class":"delete"}).append("x");r=a("<span/>").addClass(d.tagClass).append(h.substr(0,h.length));a("."+d.inputClass).before(r.append(q));f(a("."+d.containerClass).attr("data-for"));a("."+d.inputClass).val("")}}},1000)});a("."+d.inputClass).keydown(function(u){a("#"+d.tooManyInputsID).hide();a("#"+d.inputWrongID).hide();h=a(this).val();p=g(j);if(u.keyCode===13){u.preventDefault()}else{if(u.keyCode===8){if(a(this).val().length===0){u.preventDefault();a("."+d.tagClass+":last").remove();f(a(this).parent().attr("data-for"))}else{}}else{if(u.keyCode===32){if(d.emaily){k=b(h)}else{k=e(h)}if(!d.emaily&&p.length>=d.max_length_of_tags){u.preventDefault();a("#"+d.tooManyInputsID).show()}else{if(d.emaily&&p.length>=d.left_invitations){u.preventDefault();a("#"+d.tooManyInputsID).show()}else{if(!k.isValid){u.preventDefault();a("#"+d.inputWrongID+" span").text(k.msg);a("#"+d.inputWrongID).show()}else{u.preventDefault();q=a("<a/>",{href:"#",title:"删除","class":"delete"}).append("x");r=a("<span/>").addClass(d.tagClass).append(this.value.substr(0,this.value.length));a(this).before(r.append(q));f(a(this).parent("."+d.containerClass).attr("data-for"));a(this).val("").focus()}}}}}}});a("."+d.containerClass).find("."+d.tagClass+" a").live("click",function(v){v.preventDefault();var u=a(this).parent().parent().attr("data-for");a(this).parent().remove();f(u);a(this).parent().parent().find("."+d.inputClass).focus()})})}})(jQuery);
(function(a){a.fn.autoTextarea=function(b){var d={maxHeight:null,minHeight:a(this).height()};var c=a.extend({},d,b);return a(this).each(function(){a(this).bind("paste cut keydown keyup focus blur",function(){var e,f=this.style;this.style.height=c.minHeight+"px";if(this.scrollHeight>c.minHeight){if(c.maxHeight&&this.scrollHeight>c.maxHeight){e=c.maxHeight;f.overflowY="scroll"}else{e=this.scrollHeight;f.overflowY="hidden"}f.height=e+"px"}})})}})(jQuery);
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(){var u=this;var r=u._;var b={};var i=Array.prototype,B=Object.prototype,E=Function.prototype;var s=i.slice,w=i.unshift,v=B.toString,o=B.hasOwnProperty;var m=i.forEach,h=i.map,z=i.reduce,e=i.reduceRight,l=i.filter,a=i.every,y=i.some,t=i.indexOf,f=i.lastIndexOf,c=Array.isArray,A=Object.keys,j=E.bind;var D=function(F){return new g(F)};if(typeof module!=="undefined"&&module.exports){module.exports=D;D._=D}else{u._=D}D.VERSION="1.2.0";var d=D.each=D.forEach=function(K,J,I){if(K==null){return}if(m&&K.forEach===m){K.forEach(J,I)}else{if(K.length===+K.length){for(var H=0,F=K.length;H<F;H++){if(H in K&&J.call(I,K[H],H,K)===b){return}}}else{for(var G in K){if(o.call(K,G)){if(J.call(I,K[G],G,K)===b){return}}}}}};D.map=function(I,H,G){var F=[];if(I==null){return F}if(h&&I.map===h){return I.map(H,G)}d(I,function(L,J,K){F[F.length]=H.call(G,L,J,K)});return F};D.reduce=D.foldl=D.inject=function(J,I,F,H){var G=F!==void 0;if(J==null){J=[]}if(z&&J.reduce===z){if(H){I=D.bind(I,H)}return G?J.reduce(I,F):J.reduce(I)}d(J,function(M,K,L){if(!G){F=M;G=true}else{F=I.call(H,F,M,K,L)}});if(!G){throw new TypeError("Reduce of empty array with no initial value")}return F};D.reduceRight=D.foldr=function(I,H,F,G){if(I==null){I=[]}if(e&&I.reduceRight===e){if(G){H=D.bind(H,G)}return F!==void 0?I.reduceRight(H,F):I.reduceRight(H)}var J=(D.isArray(I)?I.slice():D.toArray(I)).reverse();return D.reduce(J,H,F,G)};D.find=D.detect=function(I,H,G){var F;p(I,function(L,J,K){if(H.call(G,L,J,K)){F=L;return true}});return F};D.filter=D.select=function(I,H,G){var F=[];if(I==null){return F}if(l&&I.filter===l){return I.filter(H,G)}d(I,function(L,J,K){if(H.call(G,L,J,K)){F[F.length]=L}});return F};D.reject=function(I,H,G){var F=[];if(I==null){return F}d(I,function(L,J,K){if(!H.call(G,L,J,K)){F[F.length]=L}});return F};D.every=D.all=function(I,H,G){var F=true;if(I==null){return F}if(a&&I.every===a){return I.every(H,G)}d(I,function(L,J,K){if(!(F=F&&H.call(G,L,J,K))){return b}});return F};var p=D.some=D.any=function(I,H,G){H=H||D.identity;var F=false;if(I==null){return F}if(y&&I.some===y){return I.some(H,G)}d(I,function(L,J,K){if(F|=H.call(G,L,J,K)){return b}});return !!F};D.include=D.contains=function(H,G){var F=false;if(H==null){return F}if(t&&H.indexOf===t){return H.indexOf(G)!=-1}p(H,function(I){if(F=I===G){return true}});return F};D.invoke=function(G,H){var F=s.call(arguments,2);return D.map(G,function(I){return(H.call?H||I:I[H]).apply(I,F)})};D.pluck=function(G,F){return D.map(G,function(H){return H[F]})};D.max=function(I,H,G){if(!H&&D.isArray(I)){return Math.max.apply(Math,I)}if(!H&&D.isEmpty(I)){return -Infinity}var F={computed:-Infinity};d(I,function(M,J,L){var K=H?H.call(G,M,J,L):M;K>=F.computed&&(F={value:M,computed:K})});return F.value};D.min=function(I,H,G){if(!H&&D.isArray(I)){return Math.min.apply(Math,I)}if(!H&&D.isEmpty(I)){return Infinity}var F={computed:Infinity};d(I,function(M,J,L){var K=H?H.call(G,M,J,L):M;K<F.computed&&(F={value:M,computed:K})});return F.value};D.shuffle=function(H){var F=[],G;d(H,function(K,I,J){if(I==0){F[0]=K}else{G=Math.floor(Math.random()*(I+1));F[I]=F[G];F[G]=K}});return F};D.sortBy=function(H,G,F){return D.pluck(D.map(H,function(K,I,J){return{value:K,criteria:G.call(F,K,I,J)}}).sort(function(L,K){var J=L.criteria,I=K.criteria;return J<I?-1:J>I?1:0}),"value")};D.groupBy=function(H,G){var F={};d(H,function(K,I){var J=G(K,I);(F[J]||(F[J]=[])).push(K)});return F};D.sortedIndex=function(K,J,H){H||(H=D.identity);var F=0,I=K.length;while(F<I){var G=(F+I)>>1;H(K[G])<H(J)?F=G+1:I=G}return F};D.toArray=function(F){if(!F){return[]}if(F.toArray){return F.toArray()}if(D.isArray(F)){return s.call(F)}if(D.isArguments(F)){return s.call(F)}return D.values(F)};D.size=function(F){return D.toArray(F).length};D.first=D.head=function(H,G,F){return(G!=null)&&!F?s.call(H,0,G):H[0]};D.initial=function(H,G,F){return s.call(H,0,H.length-((G==null)||F?1:G))};D.last=function(H,G,F){return(G!=null)&&!F?s.call(H,H.length-G):H[H.length-1]};D.rest=D.tail=function(H,F,G){return s.call(H,(F==null)||G?1:F)};D.compact=function(F){return D.filter(F,function(G){return !!G})};D.flatten=function(F){return D.reduce(F,function(G,H){if(D.isArray(H)){return G.concat(D.flatten(H))}G[G.length]=H;return G},[])};D.without=function(F){return D.difference(F,s.call(arguments,1))};D.uniq=D.unique=function(J,I,H){var G=H?D.map(J,H):J;var F=[];D.reduce(G,function(K,M,L){if(0==L||(I===true?D.last(K)!=M:!D.include(K,M))){K[K.length]=M;F[F.length]=J[L]}return K},[]);return F};D.union=function(){return D.uniq(D.flatten(arguments))};D.intersection=D.intersect=function(G){var F=s.call(arguments,1);return D.filter(D.uniq(G),function(H){return D.every(F,function(I){return D.indexOf(I,H)>=0})})};D.difference=function(G,F){return D.filter(G,function(H){return !D.include(F,H)})};D.zip=function(){var F=s.call(arguments);var I=D.max(D.pluck(F,"length"));var H=new Array(I);for(var G=0;G<I;G++){H[G]=D.pluck(F,""+G)}return H};D.indexOf=function(J,H,I){if(J==null){return -1}var G,F;if(I){G=D.sortedIndex(J,H);return J[G]===H?G:-1}if(t&&J.indexOf===t){return J.indexOf(H)}for(G=0,F=J.length;G<F;G++){if(J[G]===H){return G}}return -1};D.lastIndexOf=function(H,G){if(H==null){return -1}if(f&&H.lastIndexOf===f){return H.lastIndexOf(G)}var F=H.length;while(F--){if(H[F]===G){return F}}return -1};D.range=function(K,I,J){if(arguments.length<=1){I=K||0;K=0}J=arguments[2]||1;var G=Math.max(Math.ceil((I-K)/J),0);var F=0;var H=new Array(G);while(F<G){H[F++]=K;K+=J}return H};D.bind=function(G,H){if(G.bind===j&&j){return j.apply(G,s.call(arguments,1))}var F=s.call(arguments,2);return function(){return G.apply(H,F.concat(s.call(arguments)))}};D.bindAll=function(G){var F=s.call(arguments,1);if(F.length==0){F=D.functions(G)}d(F,function(H){G[H]=D.bind(G[H],G)});return G};D.memoize=function(H,G){var F={};G||(G=D.identity);return function(){var I=G.apply(this,arguments);return o.call(F,I)?F[I]:(F[I]=H.apply(this,arguments))}};D.delay=function(G,H){var F=s.call(arguments,2);return setTimeout(function(){return G.apply(G,F)},H)};D.defer=function(F){return D.delay.apply(D,[F,1].concat(s.call(arguments,1)))};var x=function(G,I,F){var H;return function(){var K=this,J=arguments;var L=function(){H=null;G.apply(K,J)};if(F){clearTimeout(H)}if(F||!H){H=setTimeout(L,I)}}};D.throttle=function(F,G){return x(F,G,false)};D.debounce=function(F,G){return x(F,G,true)};D.once=function(H){var F=false,G;return function(){if(F){return G}F=true;return G=H.apply(this,arguments)}};D.wrap=function(F,G){return function(){var H=[F].concat(s.call(arguments));return G.apply(this,H)}};D.compose=function(){var F=s.call(arguments);return function(){var G=s.call(arguments);for(var H=F.length-1;H>=0;H--){G=[F[H].apply(this,G)]}return G[0]}};D.after=function(G,F){return function(){if(--G<1){return F.apply(this,arguments)}}};D.keys=A||function(H){if(H!==Object(H)){throw new TypeError("Invalid object")}var G=[];for(var F in H){if(o.call(H,F)){G[G.length]=F}}return G};D.values=function(F){return D.map(F,D.identity)};D.functions=D.methods=function(H){var G=[];for(var F in H){if(D.isFunction(H[F])){G.push(F)}}return G.sort()};D.extend=function(F){d(s.call(arguments,1),function(G){for(var H in G){if(G[H]!==void 0){F[H]=G[H]}}});return F};D.defaults=function(F){d(s.call(arguments,1),function(G){for(var H in G){if(F[H]==null){F[H]=G[H]}}});return F};D.clone=function(F){return D.isArray(F)?F.slice():D.extend({},F)};D.tap=function(G,F){F(G);return G};function C(U,S,I){if(U===S){return U!==0||1/U==1/S}if(U==null){return U===S}var O=typeof U;if(O!=typeof S){return false}if(!U!=!S){return false}if(D.isNaN(U)){return D.isNaN(S)}var R=D.isString(U),Q=D.isString(S);if(R||Q){return R&&Q&&String(U)==String(S)}var V=D.isNumber(U),T=D.isNumber(S);if(V||T){return V&&T&&+U==+S}var G=D.isBoolean(U),F=D.isBoolean(S);if(G||F){return G&&F&&+U==+S}var M=D.isDate(U),L=D.isDate(S);if(M||L){return M&&L&&U.getTime()==S.getTime()}var K=D.isRegExp(U),J=D.isRegExp(S);if(K||J){return K&&J&&U.source==S.source&&U.global==S.global&&U.multiline==S.multiline&&U.ignoreCase==S.ignoreCase}if(O!="object"){return false}if(U._chain){U=U._wrapped}if(S._chain){S=S._wrapped}if(D.isFunction(U.isEqual)){return U.isEqual(S)}var H=I.length;while(H--){if(I[H]==U){return true}}I.push(U);var P=0,N=true;if(U.length===+U.length||S.length===+S.length){P=U.length;N=P==S.length;if(N){while(P--){if(!(N=P in U==P in S&&C(U[P],S[P],I))){break}}}}else{for(var W in U){if(o.call(U,W)){P++;if(!(N=o.call(S,W)&&C(U[W],S[W],I))){break}}}if(N){for(W in S){if(o.call(S,W)&&!P--){break}}N=!P}}I.pop();return N}D.isEqual=function(G,F){return C(G,F,[])};D.isEmpty=function(G){if(D.isArray(G)||D.isString(G)){return G.length===0}for(var F in G){if(o.call(G,F)){return false}}return true};D.isElement=function(F){return !!(F&&F.nodeType==1)};D.isArray=c||function(F){return v.call(F)==="[object Array]"};D.isObject=function(F){return F===Object(F)};D.isArguments=function(F){return !!(F&&o.call(F,"callee"))};D.isFunction=function(F){return !!(F&&F.constructor&&F.call&&F.apply)};D.isString=function(F){return !!(F===""||(F&&F.charCodeAt&&F.substr))};D.isNumber=function(F){return !!(F===0||(F&&F.toExponential&&F.toFixed))};D.isNaN=function(F){return F!==F};D.isBoolean=function(F){return F===true||F===false||v.call(F)=="[object Boolean]"};D.isDate=function(F){return !!(F&&F.getTimezoneOffset&&F.setUTCFullYear)};D.isRegExp=function(F){return !!(F&&F.test&&F.exec&&(F.ignoreCase||F.ignoreCase===false))};D.isNull=function(F){return F===null};D.isUndefined=function(F){return F===void 0};D.noConflict=function(){u._=r;return this};D.identity=function(F){return F};D.times=function(I,H,G){for(var F=0;F<I;F++){H.call(G,F)}};D.escape=function(F){return(""+F).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};D.mixin=function(F){d(D.functions(F),function(G){q(G,D[G]=F[G])})};var k=0;D.uniqueId=function(F){var G=k++;return F?F+G:G};D.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};D.template=function(I,H){var J=D.templateSettings;var F="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+I.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(J.escape,function(K,L){return"',_.escape("+L.replace(/\\'/g,"'")+"),'"}).replace(J.interpolate,function(K,L){return"',"+L.replace(/\\'/g,"'")+",'"}).replace(J.evaluate||null,function(K,L){return"');"+L.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');";var G=new Function("obj",F);return H?G(H):G};var g=function(F){this._wrapped=F};D.prototype=g.prototype;var n=function(G,F){return F?D(G).chain():G};var q=function(F,G){g.prototype[F]=function(){var H=s.call(arguments);w.call(H,this._wrapped);return n(G.apply(D,H),this._chain)}};D.mixin(D);d(["pop","push","reverse","shift","sort","splice","unshift"],function(F){var G=i[F];g.prototype[F]=function(){G.apply(this._wrapped,arguments);return n(this._wrapped,this._chain)}});d(["concat","join","slice"],function(F){var G=i[F];g.prototype[F]=function(){return n(G.apply(this._wrapped,arguments),this._chain)}});g.prototype.chain=function(){this._chain=true;return this};g.prototype.value=function(){return this._wrapped}})();
(function(){var o=this;var n=o.Backbone;var b;if(typeof exports!=="undefined"){b=exports}else{b=o.Backbone={}}b.VERSION="0.5.3";var w=o._;if(!w&&(typeof require!=="undefined")){w=require("underscore")._}var e=o.jQuery||o.Zepto;b.noConflict=function(){o.Backbone=n;return this};b.emulateHTTP=false;b.emulateJSON=false;b.Events={bind:function(z,B,y){var x=this._callbacks||(this._callbacks={});var A=x[z]||(x[z]=[]);A.push([B,y]);return this},unbind:function(A,C){var z;if(!A){this._callbacks={}}else{if(z=this._callbacks){if(!C){z[A]=[]}else{var B=z[A];if(!B){return this}for(var y=0,x=B.length;y<x;y++){if(B[y]&&C===B[y][0]){B[y]=null;break}}}}}return this},trigger:function(z){var A,F,D,E,B;var C=2;if(!(F=this._callbacks)){return this}while(C--){D=C?z:"all";if(A=F[D]){for(var y=0,x=A.length;y<x;y++){if(!(E=A[y])){A.splice(y,1);y--;x--}else{B=C?Array.prototype.slice.call(arguments,1):arguments;E[0].apply(E[1]||this,B)}}}}return this}};b.Model=function(x,y){var z;x||(x={});if(z=this.defaults){if(w.isFunction(z)){z=z.call(this)}x=w.extend({},z,x)}this.attributes={};this._escapedAttributes={};this.cid=w.uniqueId("c");this.set(x,{silent:true});this._changed=false;this._previousAttributes=w.clone(this.attributes);if(y&&y.collection){this.collection=y.collection}this.initialize(x,y)};w.extend(b.Model.prototype,b.Events,{_previousAttributes:null,_changed:false,idAttribute:"id",initialize:function(){},toJSON:function(){return w.clone(this.attributes)},get:function(x){return this.attributes[x]},escape:function(x){var y;if(y=this._escapedAttributes[x]){return y}var z=this.attributes[x];return this._escapedAttributes[x]=m(z==null?"":""+z)},has:function(x){return this.attributes[x]!=null},set:function(A,z){z||(z={});if(!A){return this}if(A.attributes){A=A.attributes}var y=this.attributes,C=this._escapedAttributes;if(!z.silent&&this.validate&&!this._performValidation(A,z)){return false}if(this.idAttribute in A){this.id=A[this.idAttribute]}var B=this._changing;this._changing=true;for(var x in A){var D=A[x];if(!w.isEqual(y[x],D)){y[x]=D;delete C[x];this._changed=true;if(!z.silent){this.trigger("change:"+x,this,D,z)}}}if(!B&&!z.silent&&this._changed){this.change(z)}this._changing=false;return this},unset:function(x,y){if(!(x in this.attributes)){return this}y||(y={});var A=this.attributes[x];var z={};z[x]=void 0;if(!y.silent&&this.validate&&!this._performValidation(z,y)){return false}delete this.attributes[x];delete this._escapedAttributes[x];if(x==this.idAttribute){delete this.id}this._changed=true;if(!y.silent){this.trigger("change:"+x,this,void 0,y);this.change(y)}return this},clear:function(z){z||(z={});var x;var y=this.attributes;var A={};for(x in y){A[x]=void 0}if(!z.silent&&this.validate&&!this._performValidation(A,z)){return false}this.attributes={};this._escapedAttributes={};this._changed=true;if(!z.silent){for(x in y){this.trigger("change:"+x,this,void 0,z)}this.change(z)}return this},fetch:function(y){y||(y={});var x=this;var z=y.success;y.success=function(C,A,B){if(!x.set(x.parse(C,B),y)){return false}if(z){z(x,C)}};y.error=c(y.error,x,y);return(this.sync||b.sync).call(this,"read",this,y)},save:function(z,y){y||(y={});if(z&&!this.set(z,y)){return false}var x=this;var A=y.success;y.success=function(E,C,D){if(!x.set(x.parse(E,D),y)){return false}if(A){A(x,E,D)}};y.error=c(y.error,x,y);var B=this.isNew()?"create":"update";return(this.sync||b.sync).call(this,B,this,y)},destroy:function(y){y||(y={});if(this.isNew()){return this.trigger("destroy",this,this.collection,y)}var x=this;var z=y.success;y.success=function(A){x.trigger("destroy",x,x.collection,y);if(z){z(x,A)}};y.error=c(y.error,x,y);return(this.sync||b.sync).call(this,"delete",this,y)},url:function(){var x=p(this.collection)||this.urlRoot||r();if(this.isNew()){return x}return x+(x.charAt(x.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(y,x){return y},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(x){this.trigger("change",this,x);this._previousAttributes=w.clone(this.attributes);this._changed=false},hasChanged:function(x){if(x){return this._previousAttributes[x]!=this.attributes[x]}return this._changed},changedAttributes:function(z){z||(z=this.attributes);var y=this._previousAttributes;var A=false;for(var x in z){if(!w.isEqual(y[x],z[x])){A=A||{};A[x]=z[x]}}return A},previous:function(x){if(!x||!this._previousAttributes){return null}return this._previousAttributes[x]},previousAttributes:function(){return w.clone(this._previousAttributes)},_performValidation:function(z,y){var x=this.validate(z);if(x){if(y.error){y.error(this,x,y)}else{this.trigger("error",this,x,y)}return false}return true}});b.Collection=function(y,x){x||(x={});if(x.comparator){this.comparator=x.comparator}w.bindAll(this,"_onModelEvent","_removeReference");this._reset();if(y){this.reset(y,{silent:true})}this.initialize.apply(this,arguments)};w.extend(b.Collection.prototype,b.Events,{model:b.Model,initialize:function(){},toJSON:function(){return this.map(function(x){return x.toJSON()})},add:function(A,y){if(w.isArray(A)){for(var z=0,x=A.length;z<x;z++){this._add(A[z],y)}}else{this._add(A,y)}return this},remove:function(A,y){if(w.isArray(A)){for(var z=0,x=A.length;z<x;z++){this._remove(A[z],y)}}else{this._remove(A,y)}return this},get:function(x){if(x==null){return null}return this._byId[x.id!=null?x.id:x]},getByCid:function(x){return x&&this._byCid[x.cid||x]},at:function(x){return this.models[x]},sort:function(x){x||(x={});if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}this.models=this.sortBy(this.comparator);if(!x.silent){this.trigger("reset",this,x)}return this},pluck:function(x){return w.map(this.models,function(y){return y.get(x)})},reset:function(y,x){y||(y=[]);x||(x={});this.each(this._removeReference);this._reset();this.add(y,{silent:true});if(!x.silent){this.trigger("reset",this,x)}return this},fetch:function(x){x||(x={});var z=this;var y=x.success;x.success=function(C,A,B){z[x.add?"add":"reset"](z.parse(C,B),x);if(y){y(z,C)}};x.error=c(x.error,z,x);return(this.sync||b.sync).call(this,"read",this,x)},create:function(y,x){var z=this;x||(x={});y=this._prepareModel(y,x);if(!y){return false}var A=x.success;x.success=function(B,D,C){z.add(B,x);if(A){A(B,D,C)}};y.save(null,x);return y},parse:function(y,x){return y},chain:function(){return w(this.models).chain()},_reset:function(x){this.length=0;this.models=[];this._byId={};this._byCid={}},_prepareModel:function(z,y){if(!(z instanceof b.Model)){var x=z;z=new this.model(x,{collection:this});if(z.validate&&!z._performValidation(x,y)){z=false}}else{if(!z.collection){z.collection=this}}return z},_add:function(z,y){y||(y={});z=this._prepareModel(z,y);if(!z){return false}var A=this.getByCid(z);if(A){throw new Error(["Can't add the same model to a set twice",A.id])}this._byId[z.id]=z;this._byCid[z.cid]=z;var x=y.at!=null?y.at:this.comparator?this.sortedIndex(z,this.comparator):this.length;this.models.splice(x,0,z);z.bind("all",this._onModelEvent);this.length++;if(!y.silent){z.trigger("add",z,this,y)}return z},_remove:function(y,x){x||(x={});y=this.getByCid(y)||this.get(y);if(!y){return null}delete this._byId[y.id];delete this._byCid[y.cid];this.models.splice(this.indexOf(y),1);this.length--;if(!x.silent){y.trigger("remove",y,this,x)}this._removeReference(y);return y},_removeReference:function(x){if(this==x.collection){delete x.collection}x.unbind("all",this._onModelEvent)},_onModelEvent:function(z,y,A,x){if((z=="add"||z=="remove")&&A!=this){return}if(z=="destroy"){this._remove(y,x)}if(y&&z==="change:"+y.idAttribute){delete this._byId[y.previous(y.idAttribute)];this._byId[y.id]=y}this.trigger.apply(this,arguments)}});var u=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"];w.each(u,function(x){b.Collection.prototype[x]=function(){return w[x].apply(w,[this.models].concat(w.toArray(arguments)))}});b.Router=function(x){x||(x={});if(x.routes){this.routes=x.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var g=/:([\w\d]+)/g;var v=/\*([\w\d]+)/g;var d=/[-[\]{}()+?.,\\^$|#\s]/g;w.extend(b.Router.prototype,b.Events,{initialize:function(){},route:function(x,y,z){b.history||(b.history=new b.History);if(!w.isRegExp(x)){x=this._routeToRegExp(x)}b.history.route(x,w.bind(function(B){var A=this._extractParameters(x,B);z.apply(this,A);this.trigger.apply(this,["route:"+y].concat(A))},this))},navigate:function(x,y){b.history.navigate(x,y)},_bindRoutes:function(){if(!this.routes){return}var y=[];for(var z in this.routes){y.unshift([z,this.routes[z]])}for(var A=0,x=y.length;A<x;A++){this.route(y[A][0],y[A][1],this[y[A][1]])}},_routeToRegExp:function(x){x=x.replace(d,"\\$&").replace(g,"([^/]*)").replace(v,"(.*?)");return new RegExp("^"+x+"$")},_extractParameters:function(x,y){return x.exec(y).slice(1)}});b.History=function(){this.handlers=[];w.bindAll(this,"checkUrl")};var l=/^#*/;var h=/msie [\w.]+/;var j=false;w.extend(b.History.prototype,{interval:50,getFragment:function(y,x){if(y==null){if(this._hasPushState||x){y=window.location.pathname;var z=window.location.search;if(z){y+=z}if(y.indexOf(this.options.root)==0){y=y.substr(this.options.root.length)}}else{y=window.location.hash}}return decodeURIComponent(y.replace(l,""))},start:function(z){if(j){throw new Error("Backbone.history has already been started")}this.options=w.extend({},{root:"/"},this.options,z);this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var y=this.getFragment();var x=document.documentMode;var B=(h.exec(navigator.userAgent.toLowerCase())&&(!x||x<=7));if(B){this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(y)}if(this._hasPushState){e(window).bind("popstate",this.checkUrl)}else{if("onhashchange" in window&&!B){e(window).bind("hashchange",this.checkUrl)}else{setInterval(this.checkUrl,this.interval)}}this.fragment=y;j=true;var C=window.location;var A=C.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!A){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+"#"+this.fragment);return true}else{if(this._wantsPushState&&this._hasPushState&&A&&C.hash){this.fragment=C.hash.replace(l,"");window.history.replaceState({},document.title,C.protocol+"//"+C.host+this.options.root+this.fragment)}}if(!this.options.silent){return this.loadUrl()}},route:function(x,y){this.handlers.unshift({route:x,callback:y})},checkUrl:function(y){var x=this.getFragment();if(x==this.fragment&&this.iframe){x=this.getFragment(this.iframe.location.hash)}if(x==this.fragment||x==decodeURIComponent(this.fragment)){return false}if(this.iframe){this.navigate(x)}this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(z){var y=this.fragment=this.getFragment(z);var x=w.any(this.handlers,function(A){if(A.route.test(y)){A.callback(y);return true}});return x},navigate:function(x,y){var A=(x||"").replace(l,"");if(this.fragment==A||this.fragment==decodeURIComponent(A)){return}if(this._hasPushState){var z=window.location;if(A.indexOf(this.options.root)!=0){A=this.options.root+A}this.fragment=A;window.history.pushState({},document.title,z.protocol+"//"+z.host+A)}else{window.location.hash=this.fragment=A;if(this.iframe&&(A!=this.getFragment(this.iframe.location.hash))){this.iframe.document.open().close();this.iframe.location.hash=A}}if(y){this.loadUrl(x)}}});b.View=function(x){this.cid=w.uniqueId("view");this._configure(x||{});this._ensureElement();this.delegateEvents();this.initialize.apply(this,arguments)};var k=function(x){return e(x,this.el)};var a=/^(\S+)\s*(.*)$/;var s=["model","collection","el","id","attributes","className","tagName"];w.extend(b.View.prototype,b.Events,{tagName:"div",$:k,initialize:function(){},render:function(){return this},remove:function(){e(this.el).remove();return this},make:function(y,x,A){var z=document.createElement(y);if(x){e(z).attr(x)}if(A){e(z).html(A)}return z},delegateEvents:function(B){if(!(B||(B=this.events))){return}if(w.isFunction(B)){B=B.call(this)}e(this.el).unbind(".delegateEvents"+this.cid);for(var A in B){var C=this[B[A]];if(!C){throw new Error('Event "'+B[A]+'" does not exist')}var z=A.match(a);var y=z[1],x=z[2];C=w.bind(C,this);y+=".delegateEvents"+this.cid;if(x===""){e(this.el).bind(y,C)}else{e(this.el).delegate(x,y,C)}}},_configure:function(z){if(this.options){z=w.extend({},this.options,z)}for(var A=0,y=s.length;A<y;A++){var x=s[A];if(z[x]){this[x]=z[x]}}this.options=z},_ensureElement:function(){if(!this.el){var x=this.attributes||{};if(this.id){x.id=this.id}if(this.className){x["class"]=this.className}this.el=this.make(this.tagName,x)}else{if(w.isString(this.el)){this.el=e(this.el).get(0)}}}});var t=function(x,y){var z=i(this,x,y);z.extend=this.extend;return z};b.Model.extend=b.Collection.extend=b.Router.extend=b.View.extend=t;var q={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};b.sync=function(B,y,x){var z=q[B];var A=w.extend({type:z,dataType:"json"},x);if(!A.url){A.url=p(y)||r()}if(!A.data&&y&&(B=="create"||B=="update")){A.contentType="application/json";A.data=JSON.stringify(y.toJSON())}if(b.emulateJSON){A.contentType="application/x-www-form-urlencoded";A.data=A.data?{model:A.data}:{}}if(b.emulateHTTP){if(z==="PUT"||z==="DELETE"){if(b.emulateJSON){A.data._method=z}A.type="POST";A.beforeSend=function(C){C.setRequestHeader("X-HTTP-Method-Override",z)}}}if(A.type!=="GET"&&!b.emulateJSON){A.processData=false}return e.ajax(A)};var f=function(){};var i=function(y,x,z){var A;if(x&&x.hasOwnProperty("constructor")){A=x.constructor}else{A=function(){return y.apply(this,arguments)}}w.extend(A,y);f.prototype=y.prototype;A.prototype=new f();if(x){w.extend(A.prototype,x)}if(z){w.extend(A,z)}A.prototype.constructor=A;A.__super__=y.prototype;return A};var p=function(x){if(!(x&&x.url)){return null}return w.isFunction(x.url)?x.url():x.url};var r=function(){throw new Error('A "url" property or function must be specified')};var c=function(z,y,x){return function(A){if(z){z(y,A,x)}else{y.trigger("error",y,A,x)}}};var m=function(x){return x.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}).call(this);
!function(a){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){define([],a)}else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pingpp=a()}}}(function(){return function a(g,d,e){function b(k,m){if(!d[k]){if(!g[k]){var h="function"==typeof require&&require;if(!m&&h){return h(k,!0)}if(c){return c(k,!0)}var j=new Error("Cannot find module '"+k+"'");throw j.code="MODULE_NOT_FOUND",j}var i=d[k]={exports:{}};g[k][0].call(i.exports,function(n){var l=g[k][1][n];return b(l?l:n)},i,i.exports,a,g,d,e)}return d[k].exports}for(var c="function"==typeof require&&require,f=0;f<e.length;f++){b(e[f])}return b}({1:[function(c,d,b){d.exports={userCallback:void 0,innerCallback:function(f,g){"function"==typeof this.userCallback&&("undefined"==typeof g&&(g=this.error()),this.userCallback(f,g),this.userCallback=void 0)},error:function(f,g){return f="undefined"==typeof f?"":f,g="undefined"==typeof g?"":g,{msg:f,extra:g}}}},{}],2:[function(f,g,c){var d=f("../utils"),b={}.hasOwnProperty;g.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(k){var m=k.channel,j=k.credential[m],h=this.ALIPAY_PC_DIRECT_URL;b.call(j,"channel_url")&&(h=j.channel_url),b.call(j,"_input_charset")||(j._input_charset="utf-8");var l=d.stringifyData(j,m,!0);d.redirectTo(h+"?"+l)}}},{"../utils":23}],3:[function(g,h,d){var f=g("../utils"),b=g("../mods"),c={}.hasOwnProperty;h.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(m){var r=m.channel,j=m.credential[r],p=this.ALIPAY_WAP_URL;c.call(j,"req_data")?p=this.ALIPAY_WAP_URL_OLD:c.call(j,"channel_url")&&(p=j.channel_url),c.call(j,"_input_charset")||(j._input_charset="utf-8");var q=f.stringifyData(j,r,!0),i=p+"?"+q,k=b.getExtraModule("ap");f.inWeixin()&&"undefined"!=typeof k?k.pay(i):f.redirectTo(i)}}},{"../mods":20,"../utils":23}],4:[function(g,h,d){var f=g("../utils"),b=g("../callbacks"),c={}.hasOwnProperty;h.exports={handleCharge:function(j){var k=j.channel,i=j.credential[k];return c.call(i,"url")?void f.redirectTo(i.url+"?"+f.stringifyData(i,k)):void b.innerCallback("fail",b.error("invalid_credential","missing_field:url"))}}},{"../callbacks":1,"../utils":23}],5:[function(g,h,d){var f=g("../../utils"),b=g("../../callbacks"),c={}.hasOwnProperty;h.exports={handleCharge:function(j){var k,i=j.credential[j.channel];if("string"==typeof i){k=i}else{if(!c.call(i,"url")){return void b.innerCallback("fail",b.error("invalid_credential","credential format is incorrect"))}k=i.url}f.redirectTo(k)}}},{"../../callbacks":1,"../../utils":23}],6:[function(d,f,b){var c=d("../utils");f.exports={CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0",handleCharge:function(g){var h=g.credential[g.channel];c.formSubmit(this.CP_B2B_URL,"post",h)}}},{"../utils":23}],7:[function(f,g,c){var d=f("../../stash"),b={}.hasOwnProperty;!function(){var i={},h={};h.PADCHAR="=",h.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(j){var k=new Error("DOM Exception 5");return k.code=k.number=5,k.name=k.description="INVALID_CHARACTER_ERR",k.toString=function(){return"Error: "+k.name+": "+k.message},k}},h.getbyte64=function(k,l){var j=h.ALPHA.indexOf(k.charAt(l));if(-1===j){throw h.makeDOMException()}return j},h.decode=function(m){m=""+m;var s,l,j,k=h.getbyte64,p=m.length;if(0===p){return m}if(p%4!==0){throw h.makeDOMException()}s=0,m.charAt(p-1)===h.PADCHAR&&(s=1,m.charAt(p-2)===h.PADCHAR&&(s=2),p-=4);var q=[];for(l=0;p>l;l+=4){j=k(m,l)<<18|k(m,l+1)<<12|k(m,l+2)<<6|k(m,l+3),q.push(String.fromCharCode(j>>16,j>>8&255,255&j))}switch(s){case 1:j=k(m,l)<<18|k(m,l+1)<<12|k(m,l+2)<<6,q.push(String.fromCharCode(j>>16,j>>8&255));break;case 2:j=k(m,l)<<18|k(m,l+1)<<12,q.push(String.fromCharCode(j>>16))}return q.join("")},h.getbyte=function(k,l){var j=k.charCodeAt(l);if(j>255){throw h.makeDOMException()}return j},h.encode=function(q){if(1!==arguments.length){throw new SyntaxError("Not enough arguments")}var u,p,k=h.PADCHAR,m=h.ALPHA,s=h.getbyte,t=[];q=""+q;var j=q.length-q.length%3;if(0===q.length){return q}for(u=0;j>u;u+=3){p=s(q,u)<<16|s(q,u+1)<<8|s(q,u+2),t.push(m.charAt(p>>18)),t.push(m.charAt(p>>12&63)),t.push(m.charAt(p>>6&63)),t.push(m.charAt(63&p))}switch(q.length-j){case 1:p=s(q,u)<<16,t.push(m.charAt(p>>18)+m.charAt(p>>12&63)+k+k);break;case 2:p=s(q,u)<<16|s(q,u+1)<<8,t.push(m.charAt(p>>18)+m.charAt(p>>12&63)+m.charAt(p>>6&63)+k)}return t.join("")},i.url="pay.htm",i.pay=function(j){var e=encodeURIComponent(h.encode(j));b.call(d,"APURL")&&(i.url=d.APURL),location.href=i.url+"?goto="+e},i.decode=function(j){return h.decode(decodeURIComponent(j))},g.exports=i}()},{"../../stash":21}],8:[function(d,f,b){var c=d("./commons/redirect_base");f.exports={handleCharge:function(g){c.handleCharge(g)}}},{"./commons/redirect_base":5}],9:[function(c,d,b){arguments[4][8][0].apply(b,arguments)},{"./commons/redirect_base":5,dup:8}],10:[function(f,g,c){var d=f("../utils"),b={}.hasOwnProperty;g.exports={JDPAY_WAP_URL_OLD:"https://m.jdpay.com/wepay/web/pay",JDPAY_H5_URL:"https://h5pay.jd.com/jdpay/saveOrder",JDPAY_PC_URL:"https://wepay.jd.com/jdpay/saveOrder",handleCharge:function(i){var j=i.credential[i.channel],h=this.JDPAY_H5_URL;b.call(j,"channelUrl")?(h=j.channelUrl,delete j.channelUrl):b.call(j,"merchantRemark")&&(h=this.JDPAY_WAP_URL_OLD),d.formSubmit(h,"post",j)}}},{"../utils":23}],11:[function(d,f,b){var c=d("../utils");f.exports={UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(g){var h=g.credential[g.channel];c.formSubmit(this.UPACP_PC_URL,"post",h)}}},{"../utils":23}],12:[function(d,f,b){var c=d("../utils");f.exports={UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(g){var h=g.credential[g.channel];c.formSubmit(this.UPACP_WAP_URL,"post",h)}}},{"../utils":23}],13:[function(h,l,f){var g=h("../callbacks"),b=h("../utils"),d=h("../stash"),j=h("../mods"),k={}.hasOwnProperty;l.exports={PINGPP_NOTIFY_URL_BASE:"https://api.pingxx.com/notify/charges/",handleCharge:function(m){for(var o=m.credential[m.channel],i=["appId","timeStamp","nonceStr","package","signType","paySign"],c=0;c<i.length;c++){if(!k.call(o,i[c])){return void g.innerCallback("fail",g.error("invalid_credential","missing_field_"+i[c]))}}d.jsApiParameters=o,this.callpay()},callpay:function(){var i=this,m=j.getExtraModule("wx_jssdk");if("undefined"!=typeof m&&m.jssdkEnabled()){m.callpay()}else{if("undefined"==typeof WeixinJSBridge){var c=function(){i.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c))}else{this.jsApiCall()}}},jsApiCall:function(){k.call(d,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",d.jsApiParameters,function(c){delete d.jsApiParameters,"get_brand_wcpay_request:ok"==c.err_msg?g.innerCallback("success"):"get_brand_wcpay_request:cancel"==c.err_msg?g.innerCallback("cancel"):g.innerCallback("fail",g.error("wx_result_fail",c.err_msg))})},runTestMode:function(c){var i=confirm("模拟付款？");i&&b.request(this.PINGPP_NOTIFY_URL_BASE+c.id+"?livemode=false","GET",null,function(o,p){if(p>=200&&400>p&&"success"==o){g.innerCallback("success")}else{var m="http_code:"+p+";response:"+o;g.innerCallback("fail",g.error("testmode_notify_fail",m))}},function(){g.innerCallback("fail",g.error("network_err"))})}}},{"../callbacks":1,"../mods":20,"../stash":21,"../utils":23}],14:[function(g,h,d){var f=g("../utils"),b=g("../callbacks"),c={}.hasOwnProperty;h.exports={handleCharge:function(i){var j=i.credential[i.channel];"string"==typeof j?f.redirectTo(j):"object"==typeof j&&c.call(j,"url")?f.redirectTo(j.url):b.innerCallback("fail",b.error("invalid_credential","credential 格式不正确"))}}},{"../callbacks":1,"../utils":23}],15:[function(g,h,d){var f=g("../utils"),b=g("../callbacks"),c={}.hasOwnProperty;h.exports={YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",handleCharge:function(k){for(var q=k.channel,j=k.credential[q],m=["merchantaccount","encryptkey","data"],p=0;p<m.length;p++){if(!c.call(j,m[p])){return void b.innerCallback("fail",b.error("invalid_credential","missing_field_"+m[p]))}}var i;i=c.call(j,"mode")&&"test"==j.mode?this.YEEPAY_WAP_TEST_URL:this.YEEPAY_WAP_URL,f.redirectTo(i+"?"+f.stringifyData(j,q,!0))}}},{"../callbacks":1,"../utils":23}],16:[function(j,f,p){var b=j("./utils"),m=j("./stash"),h=j("./libs/md5"),d={seperator:"###",limit:1,report_url:"https://statistics.pingxx.com/one_stats",timeout:100},k=function(l,o){var c=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),i=l.substr(0).match(c);return null!==i?unescape(i[2]):null},g=function(){return navigator.userAgent},q=function(){return window.location.host};d.store=function(l){if("undefined"!=typeof localStorage&&null!==localStorage){var o=this,c={};c.app_id=l.app_id||m.app_id||"app_not_defined",c.ch_id=l.ch_id||"",c.channel=l.channel||"",c.type=l.type||"",c.user_agent=g(),c.host=q(),c.time=(new Date).getTime(),c.puid=m.puid;var i="app_id="+c.app_id+"&channel="+c.channel+"&ch_id="+c.ch_id+"&host="+c.host+"&time="+c.time+"&type="+c.type+"&user_agent="+c.user_agent+"&puid="+c.puid;"undefined"==typeof localStorage.PPP_ONE_STATS||0===localStorage.PPP_ONE_STATS.length?localStorage.PPP_ONE_STATS=i:localStorage.PPP_ONE_STATS=localStorage.PPP_ONE_STATS+o.seperator+i}},d.send=function(){if("undefined"!=typeof localStorage&&null!==localStorage){var s=this;if(!("undefined"==typeof localStorage.PPP_ONE_STATS||localStorage.PPP_ONE_STATS.split(s.seperator).length<s.limit)){try{for(var v=[],r=localStorage.PPP_ONE_STATS.split(s.seperator),i=h(r.join("&")),u=0;u<r.length;u++){v.push({app_id:k(r[u],"app_id"),channel:k(r[u],"channel"),ch_id:k(r[u],"ch_id"),host:k(r[u],"host"),time:k(r[u],"time"),type:k(r[u],"type"),user_agent:k(r[u],"user_agent"),puid:k(r[u],"puid")})}b.request(s.report_url,"POST",v,function(l,o){200==o&&localStorage.removeItem("PPP_ONE_STATS")},void 0,{"X-Pingpp-Report-Token":i})}catch(c){}}}},d.report=function(c){var i=this;i.store(c),setTimeout(function(){i.send()},i.timeout)},f.exports=d},{"./libs/md5":18,"./stash":21,"./utils":23}],17:[function(g,h,d){var f=g("./stash"),b=g("./utils"),c=g("./collection");h.exports={SRC_URL:"https://cookie.pingxx.com",init:function(){var i=this;b.documentReady(function(){i.initPuid()})},initPuid:function(){if("undefined"!=typeof window&&"undefined"!=typeof localStorage){var i;if("undefined"==typeof localStorage.pingpp_uid?(i=b.randomString(),localStorage.pingpp_uid=i):i=localStorage.pingpp_uid,f.puid=i,!document.getElementById("p_analyse_iframe")){var j=document.createElement("iframe");j.id="p_analyse_iframe",j.src=this.SRC_URL+"/?puid="+i,j.style.display="none",document.body.appendChild(j)}setTimeout(function(){c.send()},0)}}}},{"./collection":16,"./stash":21,"./utils":23}],18:[function(c,d,b){!function(){function H(h,i){var f=(65535&h)+(65535&i),g=(h>>16)+(i>>16)+(f>>16);return g<<16|65535&f}function q(f,g){return f<<g|f>>>32-g}function x(m,g,e,f,h,l){return H(q(H(H(g,m),H(f,l)),h),e)}function K(l,r,h,f,g,m,p){return x(r&h|~r&f,l,r,g,m,p)}function D(l,r,h,f,g,m,p){return x(r&f|h&~f,l,r,g,m,p)}function A(l,r,h,f,g,m,p){return x(r^h^f,l,r,g,m,p)}function J(l,r,h,f,g,m,p){return x(h^(r|~f),l,r,g,m,p)}function C(i,O){i[O>>5]|=128<<O%32,i[(O+64>>>9<<4)+14]=O;var e,m,P,N,y,g=1732584193,v=-271733879,o=-1732584194,M=271733878;for(e=0;e<i.length;e+=16){m=g,P=v,N=o,y=M,g=K(g,v,o,M,i[e],7,-680876936),M=K(M,g,v,o,i[e+1],12,-389564586),o=K(o,M,g,v,i[e+2],17,606105819),v=K(v,o,M,g,i[e+3],22,-1044525330),g=K(g,v,o,M,i[e+4],7,-176418897),M=K(M,g,v,o,i[e+5],12,1200080426),o=K(o,M,g,v,i[e+6],17,-1473231341),v=K(v,o,M,g,i[e+7],22,-45705983),g=K(g,v,o,M,i[e+8],7,1770035416),M=K(M,g,v,o,i[e+9],12,-1958414417),o=K(o,M,g,v,i[e+10],17,-42063),v=K(v,o,M,g,i[e+11],22,-1990404162),g=K(g,v,o,M,i[e+12],7,1804603682),M=K(M,g,v,o,i[e+13],12,-40341101),o=K(o,M,g,v,i[e+14],17,-1502002290),v=K(v,o,M,g,i[e+15],22,1236535329),g=D(g,v,o,M,i[e+1],5,-165796510),M=D(M,g,v,o,i[e+6],9,-1069501632),o=D(o,M,g,v,i[e+11],14,643717713),v=D(v,o,M,g,i[e],20,-373897302),g=D(g,v,o,M,i[e+5],5,-701558691),M=D(M,g,v,o,i[e+10],9,38016083),o=D(o,M,g,v,i[e+15],14,-660478335),v=D(v,o,M,g,i[e+4],20,-405537848),g=D(g,v,o,M,i[e+9],5,568446438),M=D(M,g,v,o,i[e+14],9,-1019803690),o=D(o,M,g,v,i[e+3],14,-187363961),v=D(v,o,M,g,i[e+8],20,1163531501),g=D(g,v,o,M,i[e+13],5,-1444681467),M=D(M,g,v,o,i[e+2],9,-51403784),o=D(o,M,g,v,i[e+7],14,1735328473),v=D(v,o,M,g,i[e+12],20,-1926607734),g=A(g,v,o,M,i[e+5],4,-378558),M=A(M,g,v,o,i[e+8],11,-2022574463),o=A(o,M,g,v,i[e+11],16,1839030562),v=A(v,o,M,g,i[e+14],23,-35309556),g=A(g,v,o,M,i[e+1],4,-1530992060),M=A(M,g,v,o,i[e+4],11,1272893353),o=A(o,M,g,v,i[e+7],16,-155497632),v=A(v,o,M,g,i[e+10],23,-1094730640),g=A(g,v,o,M,i[e+13],4,681279174),M=A(M,g,v,o,i[e],11,-358537222),o=A(o,M,g,v,i[e+3],16,-722521979),v=A(v,o,M,g,i[e+6],23,76029189),g=A(g,v,o,M,i[e+9],4,-640364487),M=A(M,g,v,o,i[e+12],11,-421815835),o=A(o,M,g,v,i[e+15],16,530742520),v=A(v,o,M,g,i[e+2],23,-995338651),g=J(g,v,o,M,i[e],6,-198630844),M=J(M,g,v,o,i[e+7],10,1126891415),o=J(o,M,g,v,i[e+14],15,-1416354905),v=J(v,o,M,g,i[e+5],21,-57434055),g=J(g,v,o,M,i[e+12],6,1700485571),M=J(M,g,v,o,i[e+3],10,-1894986606),o=J(o,M,g,v,i[e+10],15,-1051523),v=J(v,o,M,g,i[e+1],21,-2054922799),g=J(g,v,o,M,i[e+8],6,1873313359),M=J(M,g,v,o,i[e+15],10,-30611744),o=J(o,M,g,v,i[e+6],15,-1560198380),v=J(v,o,M,g,i[e+13],21,1309151649),g=J(g,v,o,M,i[e+4],6,-145523070),M=J(M,g,v,o,i[e+11],10,-1120210379),o=J(o,M,g,v,i[e+2],15,718787259),v=J(v,o,M,g,i[e+9],21,-343485551),g=H(g,m),v=H(v,P),o=H(o,N),M=H(M,y)}return[g,v,o,M]}function w(g){var h,f="";for(h=0;h<32*g.length;h+=8){f+=String.fromCharCode(g[h>>5]>>>h%32&255)}return f}function n(g){var h,f=[];for(f[(g.length>>2)-1]=void 0,h=0;h<f.length;h+=1){f[h]=0}for(h=0;h<8*g.length;h+=8){f[h>>5]|=(255&g.charCodeAt(h/8))<<h%32}return f}function I(f){return w(C(n(f),8*f.length))}function z(m,s){var h,l,f=n(m),g=[],p=[];for(g[15]=p[15]=void 0,f.length>16&&(f=C(f,8*m.length)),h=0;16>h;h+=1){g[h]=909522486^f[h],p[h]=1549556828^f[h]}return l=C(g.concat(n(s)),512+8*s.length),w(C(p.concat(l),640))}function G(i){var l,g,h="0123456789abcdef",f="";for(g=0;g<i.length;g+=1){l=i.charCodeAt(g),f+=h.charAt(l>>>4&15)+h.charAt(15&l)}return f}function E(f){return unescape(encodeURIComponent(f))}function L(f){return I(E(f))}function j(f){return G(L(f))}function B(f,g){return z(E(f),E(g))}function F(f,g){return G(B(f,g))}function k(g,h,f){return h?f?B(h,g):F(h,g):f?L(g):j(g)}d.exports=k}()},{}],19:[function(k,g,q){var b=k("./version").v,p=k("./testmode"),j=k("./callbacks"),f=k("./mods"),m=k("./stash"),h=k("./collection"),u={}.hasOwnProperty,d=function(){k("./init").init()};d.prototype={version:b,createPayment:function(v,x,i,l){"function"==typeof x&&(j.userCallback=x);var c;if("string"==typeof v){try{c=JSON.parse(v)}catch(w){return void j.innerCallback("fail",j.error("json_decode_fail",w))}}else{c=v}if("undefined"==typeof c){return void j.innerCallback("fail",j.error("json_decode_fail"))}if(!u.call(c,"id")){return void j.innerCallback("fail",j.error("invalid_charge","no_charge_id"))}if(!u.call(c,"channel")){return void j.innerCallback("fail",j.error("invalid_charge","no_channel"))}u.call(c,"app")&&("string"==typeof c.app?m.app_id=c.app:"object"==typeof c.app&&"string"==typeof c.app.id&&(m.app_id=c.app.id)),h.report({type:"pure_sdk_click",channel:c.channel,ch_id:c.id});var s=c.channel;if(!u.call(c,"credential")){return void j.innerCallback("fail",j.error("invalid_charge","no_credential"))}if(!c.credential){return void j.innerCallback("fail",j.error("invalid_credential","credential_is_undefined"))}if(!u.call(c.credential,s)){return void j.innerCallback("fail",j.error("invalid_credential","credential_is_incorrect"))}if(!u.call(c,"livemode")){return void j.innerCallback("fail",j.error("invalid_charge","no_livemode_field"))}var o=f.getChannelModule(s);return"undefined"==typeof o?(console.error('channel module "'+s+'" is undefined'),void j.innerCallback("fail",j.error("invalid_channel",'channel module "'+s+'" is undefined'))):c.livemode===!1?void (u.call(o,"runTestMode")?o.runTestMode(c):p.runTestMode(c)):("undefined"!=typeof i&&(m.signature=i),"boolean"==typeof l&&(m.debug=l),void o.handleCharge(c))},setAPURL:function(c){m.APURL=c}},g.exports=new d},{"./callbacks":1,"./collection":16,"./init":17,"./mods":20,"./stash":21,"./testmode":22,"./version":24}],20:[function(f,g,c){var d={}.hasOwnProperty,b={};g.exports=b,b.channels={alipay_pc_direct:f("./channels/alipay_pc_direct"),alipay_wap:f("./channels/alipay_wap"),bfb_wap:f("./channels/bfb_wap"),cp_b2b:f("./channels/cp_b2b"),fqlpay_qr:f("./channels/fqlpay_qr"),fqlpay_wap:f("./channels/fqlpay_wap"),jdpay_wap:f("./channels/jdpay_wap"),upacp_pc:f("./channels/upacp_pc"),upacp_wap:f("./channels/upacp_wap"),wx_pub:f("./channels/wx_pub"),wx_wap:f("./channels/wx_wap"),yeepay_wap:f("./channels/yeepay_wap")},b.extras={ap:f("./channels/extras/ap")},b.getChannelModule=function(h){return d.call(b.channels,h)?b.channels[h]:void 0},b.getExtraModule=function(h){return d.call(b.extras,h)?b.extras[h]:void 0}},{"./channels/alipay_pc_direct":2,"./channels/alipay_wap":3,"./channels/bfb_wap":4,"./channels/cp_b2b":6,"./channels/extras/ap":7,"./channels/fqlpay_qr":8,"./channels/fqlpay_wap":9,"./channels/jdpay_wap":10,"./channels/upacp_pc":11,"./channels/upacp_wap":12,"./channels/wx_pub":13,"./channels/wx_wap":14,"./channels/yeepay_wap":15}],21:[function(c,d,b){d.exports={}},{}],22:[function(f,g,c){var d=f("./utils"),b={}.hasOwnProperty;g.exports={PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",runTestMode:function(h){var i={ch_id:h.id,scheme:"http",channel:h.channel};b.call(h,"order_no")?i.order_no=h.order_no:b.call(h,"orderNo")&&(i.order_no=h.orderNo),b.call(h,"time_expire")?i.time_expire=h.time_expire:b.call(h,"timeExpire")&&(i.time_expire=h.timeExpire),b.call(h,"extra")&&(i.extra=encodeURIComponent(JSON.stringify(h.extra))),d.redirectTo(this.PINGPP_MOCK_URL+"?"+d.stringifyData(i))}}},{"./utils":23}],23:[function(f,g,c){var d={}.hasOwnProperty,b=g.exports={stringifyData:function(l,m,k){"undefined"==typeof k&&(k=!1);var h=[];for(var j in l){d.call(l,j)&&"function"!=typeof l[j]&&("bfb_wap"==m&&"url"==j||"yeepay_wap"==m&&"mode"==j||"channel_url"!=j&&h.push(j+"="+(k?encodeURIComponent(l[j]):l[j])))}return h.join("&")},request:function(p,u,k,j,q,r){if("undefined"==typeof XMLHttpRequest){return void console.log("Function XMLHttpRequest is undefined.")}var h=new XMLHttpRequest;if("undefined"!=typeof h.timeout&&(h.timeout=6000),u=u.toUpperCase(),"GET"===u&&"object"==typeof k&&k&&(p+="?"+b.stringifyData(k,"",!0)),h.open(u,p,!0),"undefined"!=typeof r){for(var m in r){d.call(r,m)&&h.setRequestHeader(m,r[m])}}"POST"===u?(h.setRequestHeader("Content-type","application/json; charset=utf-8"),h.send(JSON.stringify(k))):h.send(),"undefined"==typeof j&&(j=function(){}),"undefined"==typeof q&&(q=function(){}),h.onreadystatechange=function(){4==h.readyState&&j(h.responseText,h.status,h)},h.onerror=function(i){q(h,0,i)}},formSubmit:function(l,p,k){if("undefined"==typeof window){return void console.log("Not a browser, form submit url: "+l)}var h=document.createElement("form");h.setAttribute("method",p),h.setAttribute("action",l);for(var j in k){if(d.call(k,j)){var m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name",j),m.setAttribute("value",k[j]),h.appendChild(m)}}document.body.appendChild(h),h.submit()},randomString:function(k){"undefined"==typeof k&&(k=32);for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=l.length,j="",h=0;k>h;h++){j+=l.charAt(Math.floor(Math.random()*i))}return j},redirectTo:function(h){return"undefined"==typeof window?void console.log("Not a browser, redirect url: "+h):void (window.location.href=h)},inWeixin:function(){if("undefined"==typeof navigator){return !1}var h=navigator.userAgent.toLowerCase();return -1!==h.indexOf("micromessenger")},documentReady:function(h){return"undefined"==typeof document?void h():void ("loading"!=document.readyState?h():document.addEventListener("DOMContentLoaded",h))}}},{}],24:[function(c,d,b){d.exports={v:"2.1.3"}},{}]},{},[19])(19)});
(function(a){a.ajaxSetup({cache:false,beforeSend:function(d,c){function b(e){var j=null;if(document.cookie&&document.cookie!==""){var h=document.cookie.split(";");for(var g=0;g<h.length;g++){var f=jQuery.trim(h[g]);if(f.substring(0,e.length+1)==(e+"=")){j=decodeURIComponent(f.substring(e.length+1));break}}}return j}if(!(/^http:.*/.test(c.url)||/^https:.*/.test(c.url))){d.setRequestHeader("X-CSRFToken",b("csrftoken"))}}});a.fn.extend({insertAtCaret:function(d){if(document.selection){this.focus();sel=document.selection.createRange();sel.text=d;this.focus()}else{if(this.selectionStart||this.selectionStart=="0"){var c=this.selectionStart;var b=this.selectionEnd;var e=this.scrollTop;this.value=this.value.substring(0,c)+d+this.value.substring(b,this.value.length);this.focus();this.selectionStart=c+d.length;this.selectionEnd=c+d.length;this.scrollTop=e}else{this.value+=d;this.focus()}}}})})(jQuery);
$.smartPoller=function(b,a){if($.isFunction(b)){a=b;b=1000}(function c(){setTimeout(function(){a.call(this,c)},b);b=b*1.5})()};$.smartPusher=function(d,b){if($.isFunction(d)){b=d;d=2000}var a=d;(function c(){setTimeout(function(){b.call(this,c)},d);d=d+a})()};$.periodicPoller=function(b,a){if($.isFunction(b)){a=b;b=10*1000}(function c(){setTimeout(function(){a.call(this,c)},b)})()};
$.validator.addMethod("notEqual",function(b,a,c){return this.optional(a)||b!=c},"Please specify a different (non-default) value");$.validator.addMethod("userNameUniqueness",function(b,a,c){return sogoke.checkAccount("username",b)},"Name is not unique");$.validator.addMethod("userEmailUniqueness",function(b,a,c){return sogoke.checkAccount("email",b)},"Email is not unique");$.validator.addMethod("userNameValid",function(a){return(/^[\w\u4e00-\u9fa5]+$/).test(a)},"wrong");$.validator.addMethod("passwordValid",function(a){return(/^[a-zA-Z0-9_]+$/).test(a)},"wrong");$.validator.addMethod("userNameOrEmailValid",function(a){return(/^[a-zA-Z0-9|@|\.|\w\u4e00-\u9fa5]+$/).test(a)},"wrong");$.validator.addMethod("userNameOrEmailExstis",function(a){if((/[*@*\.*]+/).test(a)){return !(sogoke.checkAccount("email",a))}else{return !(sogoke.checkAccount("username",a))}},"wrong");$.validator.addMethod("checked",function(b,a,c){if($(a).attr("checked")==="checked"){return true}else{return false}},"Not checked");
!function(a9,aU){function a0(d,b){for(var f,a=[],c=0;c<d.length;++c){if(f=aV[d[c]]||aZ(d[c]),!f){throw"module definition dependecy not found: "+d[c]}a.push(f)}b.apply(null,a)}function a5(c,a,b){if("string"!=typeof c){throw"invalid module definition, module id must be defined and be a string"}if(a===aU){throw"invalid module definition, dependencies must be specified"}if(b===aU){throw"invalid module definition, definition function must be specified"}a0(a,function(){aV[c]=b.apply(null,arguments)})}function aW(a){return !!aV[a]}function aZ(b){for(var d=a9,a=b.split(/[.\/]/),c=0;c<a.length;++c){if(!d[a[c]]){return}d=d[a[c]]}return d}function be(g){for(var d=0;d<g.length;d++){for(var e=a9,f=g[d],b=f.split(/[.\/]/),c=0;c<b.length-1;++c){e[b[c]]===aU&&(e[b[c]]={}),e=e[b[c]]}e[b[b.length-1]]=aV[f]}}var aV={},aT="moxie/core/utils/Basic",bb="moxie/core/utils/Env",a2="moxie/core/I18n",ba="moxie/core/utils/Mime",a6="moxie/core/utils/Dom",a8="moxie/core/Exceptions",aY="moxie/core/EventTarget",a1="moxie/runtime/Runtime",a7="moxie/runtime/RuntimeClient",aS="moxie/file/FileInput",aQ="moxie/core/utils/Encode",aN="moxie/file/Blob",az="moxie/file/File",bg="moxie/file/FileDrop",bc="moxie/file/FileReader",aP="moxie/core/utils/Url",al="moxie/runtime/RuntimeTarget",aF="moxie/file/FileReaderSync",av="moxie/xhr/FormData",aj="moxie/xhr/XMLHttpRequest",ak="moxie/runtime/Transporter",ao="moxie/image/Image",aB="moxie/runtime/html5/Runtime",ap="moxie/core/utils/Events",ar="moxie/runtime/html5/file/FileInput",aC="moxie/runtime/html5/file/Blob",aq="moxie/runtime/html5/file/FileDrop",ay="moxie/runtime/html5/file/FileReader",an="moxie/runtime/html5/xhr/XMLHttpRequest",aw="moxie/runtime/html5/utils/BinaryReader",aE="moxie/runtime/html5/image/JPEGHeaders",a3="moxie/runtime/html5/image/ExifParser",ai="moxie/runtime/html5/image/JPEG",ax="moxie/runtime/html5/image/PNG",aM="moxie/runtime/html5/image/ImageInfo",aX="moxie/runtime/html5/image/MegaPixel",a4="moxie/runtime/html5/image/Image",ad="moxie/runtime/flash/Runtime",ah="moxie/runtime/flash/file/FileInput",ag="moxie/runtime/flash/file/Blob",ac="moxie/runtime/flash/file/FileReader",aH="moxie/runtime/flash/file/FileReaderSync",au="moxie/runtime/flash/xhr/XMLHttpRequest",ab="moxie/runtime/flash/runtime/Transporter",at="moxie/runtime/flash/image/Image",am="moxie/runtime/silverlight/Runtime",bd="moxie/runtime/silverlight/file/FileInput",af="moxie/runtime/silverlight/file/Blob",aa="moxie/runtime/silverlight/file/FileDrop",aJ="moxie/runtime/silverlight/file/FileReader",aO="moxie/runtime/silverlight/file/FileReaderSync",aL="moxie/runtime/silverlight/xhr/XMLHttpRequest",aA="moxie/runtime/silverlight/runtime/Transporter",aG="moxie/runtime/silverlight/image/Image",aR="moxie/runtime/html4/Runtime",aI="moxie/runtime/html4/file/FileInput",aK="moxie/runtime/html4/file/FileReader",aD="moxie/runtime/html4/xhr/XMLHttpRequest",bf="moxie/runtime/html4/image/Image";a5(aT,[],function(){var v=function(c){var a;return c===a?"undefined":null===c?"null":c.nodeType?"node":{}.toString.call(c).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},A=function(a){var c;return j(arguments,function(e,d){d>0&&j(e,function(h,f){h!==c&&(v(a[f])===v(h)&&~y(v(h),["array","object"])?A(a[f],h):a[f]=h)})}),a},j=function(e,l){var d,f,h,c;if(e){if("number"===v(e.length)){for(h=0,d=e.length;d>h;h++){if(l(e[h],h)===!1){return}}}else{if("object"===v(e)){for(f in e){if(e.hasOwnProperty(f)&&l(e[f],f)===!1){return}}}}}},m=function(a){var c;if(!a||"object"!==v(a)){return !0}for(c in a){return !1}return !0},b=function(c,f){function a(h){"function"===v(c[h])&&c[h](function(i){++h<e&&!i?a(h):f(i)})}var d=0,e=c.length;"function"!==v(f)&&(f=function(){}),c&&c.length||f(),a(d)},g=function(f,c){var a=0,d=f.length,h=new Array(d);j(f,function(i,l){i(function(o){if(o){return c(o)}var n=[].slice.call(arguments);n.shift(),h[l]=n,a++,a===d&&(h.unshift(null),c.apply(this,h))})})},y=function(d,c){if(c){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(c,d)}for(var f=0,a=c.length;a>f;f++){if(c[f]===d){return f}}}return -1},B=function(c,e){var a=[];"array"!==v(c)&&(c=[c]),"array"!==v(e)&&(e=[e]);for(var d in c){-1===y(c[d],e)&&a.push(c[d])}return a.length?a:!1},z=function(d,c){var a=[];return j(d,function(f){-1!==y(f,c)&&a.push(f)}),a.length?a:null},x=function(c){var a,d=[];for(a=0;a<c.length;a++){d[a]=c[a]}return d},k=function(){var a=0;return function(d){var e=(new Date).getTime().toString(32),c;for(c=0;5>c;c++){e+=Math.floor(65535*Math.random()).toString(32)}return(d||"o_")+e+(a++).toString(32)}}(),w=function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},p=function(c){if("string"!=typeof c){return c}var a={t:1099511627776,g:1073741824,m:1048576,k:1024},d;return c=/^([0-9\.]+)([tmgk]?)$/.exec(c.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),d=c[2],c=+c[1],a.hasOwnProperty(d)&&(c*=a[d]),Math.floor(c)},q=function(a){var c=[].slice.call(arguments,1);return a.replace(/%[a-z]/g,function(){var d=c.shift();return"undefined"!==v(d)?d:""})};return{guid:k,typeOf:v,extend:A,each:j,isEmptyObj:m,inSeries:b,inParallel:g,inArray:y,arrayDiff:B,arrayIntersect:z,toArray:x,trim:w,sprintf:q,parseSizeStr:p}}),a5(bb,[aT],function(d){function b(m,v,k){var l=0,h=0,j=0,p={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},w=function(i){return i=(""+i).replace(/[_\-+]/g,"."),i=i.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),i.length?i.split("."):[-8]},q=function(i){return i?isNaN(i)?p[i]||-7:parseInt(i,10):0};for(m=w(m),v=w(v),h=Math.max(m.length,v.length),l=0;h>l;l++){if(m[l]!=v[l]){if(m[l]=q(m[l]),v[l]=q(v[l]),m[l]<v[l]){j=-1;break}if(m[l]>v[l]){j=1;break}}}if(!k){return j}switch(k){case">":case"gt":return j>0;case">=":case"ge":return j>=0;case"<=":case"le":return 0>=j;case"==":case"=":case"eq":return 0===j;case"<>":case"!=":case"ne":return 0!==j;case"":case"<":case"lt":return 0>j;default:return null}}var g=function(N){var A="",G="?",J="function",C="undefined",F="object",Q="major",B="model",x="name",P="type",I="vendor",O="version",K="architecture",M="console",D="mobile",H="tablet",L={has:function(i,h){return -1!==h.toLowerCase().indexOf(i.toLowerCase())},lowerize:function(h){return h.toLowerCase()}},q={rgx:function(){for(var R,i=0,y,S,E,w,m,v,o=arguments;i<o.length;i+=2){var r=o[i],e=o[i+1];if(typeof R===C){R={};for(E in e){w=e[E],typeof w===F?R[w[0]]=N:R[w]=N}}for(y=S=0;y<r.length;y++){if(m=r[y].exec(this.getUA())){for(E=0;E<e.length;E++){v=m[++S],w=e[E],typeof w===F&&w.length>0?2==w.length?typeof w[1]==J?R[w[0]]=w[1].call(this,v):R[w[0]]=w[1]:3==w.length?typeof w[1]!==J||w[1].exec&&w[1].test?R[w[0]]=v?v.replace(w[1],w[2]):N:R[w[0]]=v?w[1].call(this,v,w[2]):N:4==w.length&&(R[w[0]]=v?w[3].call(this,v.replace(w[1],w[2])):N):R[w]=v?v:N}break}}if(m){break}}return R},str:function(l,h){for(var m in h){if(typeof h[m]===F&&h[m].length>0){for(var e=0;e<h[m].length;e++){if(L.has(h[m][e],l)){return m===G?N:m}}}else{if(L.has(h[m],l)){return m===G?N:m}}}return l}},k={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},j={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[x,O],[/\s(opr)\/([\w\.]+)/i],[[x,"Opera"],O],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[x,O],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[x,"IE"],O],[/(edge)\/((\d+)?[\w\.]+)/i],[x,O],[/(yabrowser)\/([\w\.]+)/i],[[x,"Yandex"],O],[/(comodo_dragon)\/([\w\.]+)/i],[[x,/_/g," "],O],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[x,O],[/(dolfin)\/([\w\.]+)/i],[[x,"Dolphin"],O],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[x,"Chrome"],O],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[O,[x,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[O,[x,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[O,[x,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[O,[x,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[O,x],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[x,[O,q.str,k.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[x,O],[/(navigator|netscape)\/([\w\.-]+)/i],[[x,"Netscape"],O],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[x,O]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[O,[x,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[x,O],[/rv\:([\w\.]+).*(gecko)/i],[O,x]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[x,O],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[x,[O,q.str,k.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[x,"Windows"],[O,q.str,k.os.windows.version]],[/\((bb)(10);/i],[[x,"BlackBerry"],O],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[x,O],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[x,"Symbian"],O],[/\((series40);/i],[x],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[x,"Firefox OS"],O],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[x,O],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[x,"Chromium OS"],O],[/(sunos)\s?([\w\.]+\d)*/i],[[x,"Solaris"],O],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[x,O],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[x,"iOS"],[O,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[x,"Mac OS"],[O,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[x,O]]},z=function(h){var i=h||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:A);this.getBrowser=function(){return q.rgx.apply(this,j.browser)},this.getEngine=function(){return q.rgx.apply(this,j.engine)},this.getOS=function(){return q.rgx.apply(this,j.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return i},this.setUA=function(l){return i=l,this},this.setUA(i)};return z}(),a=function(){var e={define_property:function(){return !1}(),create_canvas:function(){var h=document.createElement("canvas");return !(!h.getContext||!h.getContext("2d"))}(),return_response_type:function(j){try{if(-1!==d.inArray(j,["","text","document"])){return !0}if(window.XMLHttpRequest){var k=new XMLHttpRequest;if(k.open("get","/"),"responseType" in k){return k.responseType=j,k.responseType===j}}}catch(h){}return !1},use_data_uri:function(){var h=new Image;return h.onload=function(){e.use_data_uri=1===h.width&&1===h.height},setTimeout(function(){h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==f.browser||f.version>=9)},use_data_uri_of:function(h){return e.use_data_uri&&33000>h||e.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/)){return !1}var h=document.createElement("input");return h.setAttribute("type","file"),!h.disabled}};return function(j){var h=[].slice.call(arguments);return h.shift(),"function"===d.typeOf(e[j])?e[j].apply(this,h):!!e[j]}}(),c=(new g).getResult(),f={can:a,uaParser:g,browser:c.browser.name,version:c.browser.version,os:c.os.name,osVersion:c.os.version,verComp:b,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return f.OS=f.os,f}),a5(a2,[aT],function(b){var a={};return{addI18n:function(c){return b.extend(a,c)},translate:function(c){return a[c]||c},_:function(c){return this.translate(c)},sprintf:function(c){var d=[].slice.call(arguments,1);return c.replace(/%[a-z]/g,function(){var e=d.shift();return"undefined"!==b.typeOf(e)?e:""})}}}),a5(ba,[aT,a2],function(c,b){var d="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",a={mimes:{},extensions:{},addMimeType:function(j){var g=j.split(/,/),k,f,h;for(k=0;k<g.length;k+=2){for(h=g[k+1].split(/ /),f=0;f<h.length;f++){this.mimes[h[f]]=g[k]}this.extensions[g[k]]=h}},extList2mimes:function(h,m){var g=this,k,l,e,j,f=[];for(l=0;l<h.length;l++){for(k=h[l].extensions.split(/\s*,\s*/),e=0;e<k.length;e++){if("*"===k[e]){return[]}if(j=g.mimes[k[e]],j&&-1===c.inArray(j,f)&&f.push(j),m&&/^\w+$/.test(k[e])){f.push("."+k[e])}else{if(!j){return[]}}}}return f},mimes2exts:function(f){var g=this,e=[];return c.each(f,function(h){if("*"===h){return e=[],!1}var i=h.match(/^(\w+)\/(\*|\w+)$/);i&&("*"===i[2]?c.each(g.extensions,function(k,j){new RegExp("^"+i[1]+"/").test(j)&&[].push.apply(e,g.extensions[j])}):g.extensions[h]&&[].push.apply(e,g.extensions[h]))}),e},mimes2extList:function(g){var e=[],f=[];return"string"===c.typeOf(g)&&(g=c.trim(g).split(/\s*,\s*/)),f=this.mimes2exts(g),e.push({title:b.translate("Files"),extensions:f.length?f.join(","):"*"}),e.mimes=g,e},getFileExtension:function(g){var f=g&&g.match(/\.([^.]+)$/);return f?f[1].toLowerCase():""},getFileMime:function(f){return this.mimes[this.getFileExtension(f)]||""}};return a.addMimeType(d),a}),a5(a6,[bb],function(h){var d=function(a){return"string"!=typeof a?a:document.getElementById(a)},k=function(i,a){if(!i.className){return !1}var l=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return l.test(i.className)},c=function(i,a){k(i,a)||(i.className=i.className?i.className.replace(/\s+$/,"")+" "+a:a)},g=function(i,a){if(i.className){var l=new RegExp("(^|\\s+)"+a+"(\\s+|$)");i.className=i.className.replace(l,function(o,m,p){return" "===m&&" "===p?" ":""})}},j=function(i,a){return i.currentStyle?i.currentStyle[a]:window.getComputedStyle?window.getComputedStyle(i,null)[a]:void 0},b=function(x,m){function p(u){var o,z,a=0,s=0;return u&&(z=u.getBoundingClientRect(),o="CSS1Compat"===y.compatMode?y.documentElement:y.body,a=z.left+o.scrollLeft,s=z.top+o.scrollTop),{x:a,y:s}}var e=0,l=0,v,y=document,w,q;if(x=x,m=m||y.body,x&&x.getBoundingClientRect&&"IE"===h.browser&&(!y.documentMode||y.documentMode<8)){return w=p(x),q=p(m),{x:w.x-q.x,y:w.y-q.y}}for(v=x;v&&v!=m&&v.nodeType;){e+=v.offsetLeft||0,l+=v.offsetTop||0,v=v.offsetParent}for(v=x.parentNode;v&&v!=m&&v.nodeType;){e-=v.scrollLeft||0,l-=v.scrollTop||0,v=v.parentNode}return{x:e,y:l}},f=function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}};return{get:d,hasClass:k,addClass:c,removeClass:g,getStyle:j,getPos:b,getSize:f}}),a5(a8,[aT],function(b){function a(d,c){var f;for(f in d){if(d[f]===c){return f}}return null}return{RuntimeError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": RuntimeError "+this.code}var c={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return b.extend(d,c),d.prototype=Error.prototype,d}(),OperationNotAllowedException:function(){function c(d){this.code=d,this.name="OperationNotAllowedException"}return b.extend(c,{NOT_ALLOWED_ERR:1}),c.prototype=Error.prototype,c}(),ImageError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": ImageError "+this.code}var c={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return b.extend(d,c),d.prototype=Error.prototype,d}(),FileException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": FileException "+this.code}var c={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return b.extend(d,c),d.prototype=Error.prototype,d}(),DOMException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": DOMException "+this.code}var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return b.extend(d,c),d.prototype=Error.prototype,d}(),EventException:function(){function c(d){this.code=d,this.name="EventException"}return b.extend(c,{UNSPECIFIED_EVENT_TYPE_ERR:0}),c.prototype=Error.prototype,c}()}}),a5(aY,[bb,a8,aT],function(c,b,d){function a(){var f={};d.extend(this,{uid:null,init:function(){this.uid||(this.uid=d.guid("uid_"))},addEventListener:function(h,g,k,l){var e=this,j;return this.hasOwnProperty("uid")||(this.uid=d.guid("uid_")),h=d.trim(h),/\s/.test(h)?void d.each(h.split(/\s+/),function(i){e.addEventListener(i,g,k,l)}):(h=h.toLowerCase(),k=parseInt(k,10)||0,j=f[this.uid]&&f[this.uid][h]||[],j.push({fn:g,priority:k,scope:l||this}),f[this.uid]||(f[this.uid]={}),void (f[this.uid][h]=j))},hasEventListener:function(e){var g=e?f[this.uid]&&f[this.uid][e]:f[this.uid];return g?g:!1},removeEventListener:function(g,e){g=g.toLowerCase();var h=f[this.uid]&&f[this.uid][g],j;if(h){if(e){for(j=h.length-1;j>=0;j--){if(h[j].fn===e){h.splice(j,1);break}}}else{h=[]}h.length||(delete f[this.uid][g],d.isEmptyObj(f[this.uid])&&delete f[this.uid])}},removeAllEventListeners:function(){f[this.uid]&&delete f[this.uid]},dispatchEvent:function(j){var e,g,n,q,p={},m=!0,h;if("string"!==d.typeOf(j)){if(q=j,"string"!==d.typeOf(q.type)){throw new b.EventException(b.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}j=q.type,q.total!==h&&q.loaded!==h&&(p.total=q.total,p.loaded=q.loaded),p.async=q.async||!1}if(-1!==j.indexOf("::")?!function(i){e=i[0],j=i[1]}(j.split("::")):e=this.uid,j=j.toLowerCase(),g=f[e]&&f[e][j]){g.sort(function(l,i){return i.priority-l.priority}),n=[].slice.call(arguments),n.shift(),p.type=j,n.unshift(p);var k=[];d.each(g,function(i){n[0].target=i.scope,p.async?k.push(function(l){setTimeout(function(){l(i.fn.apply(i.scope,n)===!1)},1)}):k.push(function(l){l(i.fn.apply(i.scope,n)===!1)})}),k.length&&d.inSeries(k,function(i){m=!i})}return m},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(h){var g=this;this.bind(h.join(" "),function(j){var i="on"+j.type.toLowerCase();"function"===d.typeOf(this[i])&&this[i].apply(this,arguments)}),d.each(h,function(i){i="on"+i.toLowerCase(i),"undefined"===d.typeOf(g[i])&&(g[i]=null)})}})}return a.instance=new a,a}),a5(a1,[bb,aT,a6,aY],function(g,d,j,c){function f(p,m,a,v,t){var r=this,k,q=d.guid(m+"_"),n=t||"browser";p=p||{},b[q]=this,a=d.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},a),p.preferred_caps&&(n=f.getMode(v,p.preferred_caps,n)),k=function(){var i={};return{exec:function(l,s,e,o){return k[s]&&(i[l]||(i[l]={context:this,instance:new k[s]}),i[l].instance[e])?i[l].instance[e].apply(this,o):void 0},removeInstance:function(e){delete i[e]},removeAllInstances:function(){var e=this;d.each(i,function(o,l){"function"===d.typeOf(o.instance.destroy)&&o.instance.destroy.call(o.context),e.removeInstance(l)})}}}(),d.extend(this,{initialized:!1,uid:q,type:m,mode:f.getMode(v,p.required_caps,n),shimid:q+"_container",clients:0,options:p,can:function(s,u){var o=arguments[2]||a;if("string"===d.typeOf(s)&&"undefined"===d.typeOf(u)&&(s=f.parseCaps(s)),"object"===d.typeOf(s)){for(var l in s){if(!this.can(l,s[l],o)){return !1}}return !0}return"function"===d.typeOf(o[s])?o[s].call(this,u):u===o[s]},getShimContainer:function(){var o,l=j.get(this.shimid);return l||(o=this.options.container?j.get(this.options.container):document.body,l=document.createElement("div"),l.id=this.shimid,l.className="moxie-shim moxie-shim-"+this.type,d.extend(l.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),o.appendChild(l),o=null),l},getShim:function(){return k},shimExec:function(l,i){var o=[].slice.call(arguments,2);return r.getShim().exec.call(this,this.uid,l,i,o)},exec:function(l,i){var o=[].slice.call(arguments,2);return r[l]&&r[l][i]?r[l][i].apply(this,o):r.shimExec.apply(this,arguments)},destroy:function(){if(r){var i=j.get(this.shimid);i&&i.parentNode.removeChild(i),k&&k.removeAllInstances(),this.unbindAll(),delete b[this.uid],this.uid=null,q=r=k=i=null}}}),this.mode&&p.required_caps&&!this.can(p.required_caps)&&(this.mode=!1)}var h={},b={};return f.order="html5,flash,silverlight,html4",f.getRuntime=function(a){return b[a]?b[a]:!1},f.addConstructor=function(i,a){a.prototype=c.instance,h[i]=a},f.getConstructor=function(a){return h[a]||null},f.getInfo=function(i){var a=f.getRuntime(i);return a?{uid:a.uid,type:a.type,mode:a.mode,can:function(){return a.can.apply(a,arguments)}}:null},f.parseCaps=function(a){var i={};return"string"!==d.typeOf(a)?a||{}:(d.each(a.split(","),function(k){i[k]=!0}),i)},f.can=function(l,k){var p,a=f.getConstructor(l),m;return a?(p=new a({required_caps:k}),m=p.mode,p.destroy(),!!m):!1},f.thatCan=function(l,k){var m=(k||f.order).split(/\s*,\s*/);for(var a in m){if(f.can(m[a],l)){return m[a]}}return null},f.getMode=function(l,m,a){var k=null;if("undefined"===d.typeOf(a)&&(a="browser"),m&&!d.isEmptyObj(l)){if(d.each(m,function(q,e){if(l.hasOwnProperty(e)){var p=l[e](q);if("string"==typeof p&&(p=[p]),k){if(!(k=d.arrayIntersect(k,p))){return k=!1}}else{k=p}}}),k){return -1!==d.inArray(a,k)?a:k[0]}if(k===!1){return !1}}return a},f.capTrue=function(){return !0},f.capFalse=function(){return !1},f.capTest=function(a){return function(){return !!a}},f}),a5(a7,[bb,a8,aT,a1],function(d,b,f,a){return function c(){var g;f.extend(this,{connectRuntime:function(i){function j(m){var l,k;return m.length?(l=m.shift().toLowerCase(),(k=a.getConstructor(l))?(g=new k(i),g.bind("Init",function(){g.initialized=!0,setTimeout(function(){g.clients++,e.trigger("RuntimeInit",g)},1)}),g.bind("Error",function(){g.destroy(),j(m)}),g.mode?void g.init():void g.trigger("Error")):void j(m)):(e.trigger("RuntimeError",new b.RuntimeError(b.RuntimeError.NOT_INIT_ERR)),void (g=null))}var e=this,h;if("string"===f.typeOf(i)?h=i:"string"===f.typeOf(i.ruid)&&(h=i.ruid),h){if(g=a.getRuntime(h)){return g.clients++,g}throw new b.RuntimeError(b.RuntimeError.NOT_INIT_ERR)}j((i.runtime_order||a.order).split(/\s*,\s*/))},disconnectRuntime:function(){g&&--g.clients<=0&&g.destroy(),g=null},getRuntime:function(){return g&&g.uid?g:g=null},exec:function(){return g?g.exec.apply(this,arguments):null}})}}),a5(aS,[aT,bb,ba,a6,a8,aY,a2,a1,a7],function(j,q,f,h,b,d,m,v,p){function k(a){var l=this,n,i,e;if(-1!==j.inArray(j.typeOf(a),["string","node"])&&(a={browse_button:a}),i=h.get(a.browse_button),!i){throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}e={accept:[{title:m.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:i.parentNode||document.body},a=j.extend({},e,a),"string"==typeof a.required_caps&&(a.required_caps=v.parseCaps(a.required_caps)),"string"==typeof a.accept&&(a.accept=f.mimes2extList(a.accept)),n=h.get(a.container),n||(n=document.body),"static"===h.getStyle(n,"position")&&(n.style.position="relative"),n=i=null,p.call(l),j.extend(l,{uid:j.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){l.bind("RuntimeInit",function(o,c){l.ruid=c.uid,l.shimid=c.shimid,l.bind("Ready",function(){l.trigger("Refresh")},999),l.bind("Refresh",function(){var w,u,r,t;r=h.get(a.browse_button),t=h.get(c.shimid),r&&(w=h.getPos(r,h.get(a.container)),u=h.getSize(r),t&&j.extend(t.style,{top:w.y+"px",left:w.x+"px",width:u.w+"px",height:u.h+"px"})),t=r=null}),c.exec.call(l,"FileInput","init",a)}),l.connectRuntime(j.extend({},a,{required_caps:{select_file:!0}}))},disable:function(c){var o=this.getRuntime();o&&o.exec.call(this,"FileInput","disable","undefined"===j.typeOf(c)?!0:c)},refresh:function(){l.trigger("Refresh")},destroy:function(){var c=this.getRuntime();c&&(c.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===j.typeOf(this.files)&&j.each(this.files,function(o){o.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(g)}var g=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return k.prototype=d.instance,k}),a5(aQ,[],function(){var c=function(f){return unescape(encodeURIComponent(f))},b=function(f){return decodeURIComponent(escape(f))},d=function(z,q){if("function"==typeof window.atob){return q?b(window.atob(z)):window.atob(z)}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g,k,C,E,D,B,v,A,x=0,y=0,j="",t=[];if(!z){return z}z+="";do{E=w.indexOf(z.charAt(x++)),D=w.indexOf(z.charAt(x++)),B=w.indexOf(z.charAt(x++)),v=w.indexOf(z.charAt(x++)),A=E<<18|D<<12|B<<6|v,g=A>>16&255,k=A>>8&255,C=255&A,64==B?t[y++]=String.fromCharCode(g):64==v?t[y++]=String.fromCharCode(g,k):t[y++]=String.fromCharCode(g,k,C)}while(x<z.length);return j=t.join(""),q?b(j):j},a=function(F,q){if(q&&(F=c(F)),"function"==typeof window.btoa){return window.btoa(F)}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,k,D,G,E,C,w,B,y=0,A=0,j="",v=[];if(!F){return F}do{e=F.charCodeAt(y++),k=F.charCodeAt(y++),D=F.charCodeAt(y++),B=e<<16|k<<8|D,G=B>>18&63,E=B>>12&63,C=B>>6&63,w=63&B,v[A++]=x.charAt(G)+x.charAt(E)+x.charAt(C)+x.charAt(w)}while(y<F.length);j=v.join("");var z=F.length%3;return(z?j.slice(0,z-3):j)+"===".slice(z||3)};return{utf8_encode:c,utf8_decode:b,atob:d,btoa:a}}),a5(aN,[aT,aQ,a7],function(d,b,f){function a(h,e){function g(j,m,l){var i,k=c[this.uid];return"string"===d.typeOf(k)&&k.length?(i=new a(null,{type:l,size:m-j}),i.detach(k.substr(j,i.size)),i):null}f.call(this),h&&this.connectRuntime(h),e?"string"===d.typeOf(e)&&(e={data:e}):e={},d.extend(this,{uid:e.uid||d.guid("uid_"),ruid:h,size:e.size||0,type:e.type||"",slice:function(j,i,k){return this.isDetached()?g.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),j,i,k)},getSource:function(){return c[this.uid]?c[this.uid]:null},detach:function(i){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),i=i||"","data:"==i.substr(0,5)){var j=i.indexOf(";base64,");this.type=i.substring(5,j),i=b.atob(i.substring(j+8))}this.size=i.length,c[this.uid]=i},isDetached:function(){return !this.ruid&&"string"===d.typeOf(c[this.uid])},destroy:function(){this.detach(),delete c[this.uid]}}),e.data?this.detach(e.data):c[this.uid]=e}var c={};return a}),a5(az,[aT,ba,aN],function(c,b,d){function a(f,g){g||(g={}),d.apply(this,arguments),this.type||(this.type=b.getFileMime(g.name));var h;if(g.name){h=g.name.replace(/\\/g,"/"),h=h.substr(h.lastIndexOf("/")+1)}else{if(this.type){var e=this.type.split("/")[0];h=c.guid((""!==e?e:"file")+"_"),b.extensions[this.type]&&(h+="."+b.extensions[this.type][0])}}c.extend(this,{name:h||c.guid("file_"),relativePath:"",lastModifiedDate:g.lastModifiedDate||(new Date).toLocaleString()})}return a.prototype=d.prototype,a}),a5(bg,[a2,a6,a8,aT,bb,az,a7,aY,ba],function(j,q,f,h,b,d,m,v,p){function k(e){var a=this,c;"string"==typeof e&&(e={drop_zone:e}),c={accept:[{title:j.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},e="object"==typeof e?h.extend({},c,e):c,e.container=q.get(e.drop_zone)||document.body,"static"===q.getStyle(e.container,"position")&&(e.container.style.position="relative"),"string"==typeof e.accept&&(e.accept=p.mimes2extList(e.accept)),m.call(a),h.extend(a,{uid:h.guid("uid_"),ruid:null,files:null,init:function(){a.bind("RuntimeInit",function(l,i){a.ruid=i.uid,i.exec.call(a,"FileDrop","init",e),a.dispatchEvent("ready")}),a.connectRuntime(e)},destroy:function(){var i=this.getRuntime();i&&(i.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(g)}var g=["ready","dragenter","dragleave","drop","error"];return k.prototype=v.instance,k}),a5(bc,[aT,aQ,a8,aY,aN,a7],function(h,d,k,c,g,j){function b(){function a(n,l){var p=this;if(this.trigger("loadstart"),this.readyState===b.LOADING){return this.trigger("error",new k.DOMException(k.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend")}if(!(l instanceof g)){return this.trigger("error",new k.DOMException(k.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend")}if(this.result=null,this.readyState=b.LOADING,l.isDetached()){var m=l.getSource();switch(n){case"readAsText":case"readAsBinaryString":this.result=m;break;case"readAsDataURL":this.result="data:"+l.type+";base64,"+d.btoa(m)}this.readyState=b.DONE,this.trigger("load"),this.trigger("loadend")}else{this.connectRuntime(l.ruid),this.exec("FileReader","read",n,l)}}j.call(this),h.extend(this,{uid:h.guid("uid_"),readyState:b.EMPTY,result:null,error:null,readAsBinaryString:function(i){a.call(this,"readAsBinaryString",i)},readAsDataURL:function(i){a.call(this,"readAsDataURL",i)},readAsText:function(i){a.call(this,"readAsText",i)},abort:function(){this.result=null,-1===h.inArray(this.readyState,[b.EMPTY,b.DONE])&&(this.readyState===b.LOADING&&(this.readyState=b.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(f),this.bind("Error",function(l,i){this.readyState=b.DONE,this.error=i},999),this.bind("Load",function(i){this.readyState=b.DONE},999)}var f=["loadstart","progress","load","abort","error","loadend"];return b.EMPTY=0,b.LOADING=1,b.DONE=2,b.prototype=c.instance,b}),a5(aP,[],function(){var b=function(l,f){for(var g=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],d=g.length,e={http:80,https:443},j={},m=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,k=m.exec(l||"");d--;){k[d]&&(j[g[d]]=k[d])}if(!j.scheme){f&&"string"!=typeof f||(f=b(f||document.location.href)),j.scheme=f.scheme,j.host=f.host,j.port=f.port;var h="";/^[^\/]/.test(j.path)&&(h=f.path,h=/\/[^\/]*\.[^\/]*$/.test(h)?h.replace(/\/[^\/]+$/,"/"):h.replace(/\/?$/,"/")),j.path=h+(j.path||"")}return j.port||(j.port=e[j.scheme]||80),j.port=parseInt(j.port,10),j.path||(j.path="/"),delete j.source,j},a=function(e){var f={http:80,https:443},d="object"==typeof e?e:b(e);return d.scheme+"://"+d.host+(d.port!==f[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},c=function(d){function e(f){return[f.scheme,f.host,f.port].join("/")}return"string"==typeof d&&(d=b(d)),e(b())===e(d)};return{parseUrl:b,resolveUrl:a,hasSameOrigin:c}}),a5(al,[aT,a7,aY],function(c,b,d){function a(){this.uid=c.guid("uid_"),b.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return a.prototype=d.instance,a}),a5(aF,[aT,a7,aQ],function(b,a,c){return function(){function d(l,h){if(!h.isDetached()){var g=this.connectRuntime(h.ruid).exec.call(this,"FileReaderSync","read",l,h);return this.disconnectRuntime(),g}var k=h.getSource();switch(l){case"readAsBinaryString":return k;case"readAsDataURL":return"data:"+h.type+";base64,"+c.btoa(k);case"readAsText":for(var m="",f=0,j=k.length;j>f;f++){m+=String.fromCharCode(k[f])}return m}}a.call(this),b.extend(this,{uid:b.guid("uid_"),readAsBinaryString:function(f){return d.call(this,"readAsBinaryString",f)},readAsDataURL:function(f){return d.call(this,"readAsDataURL",f)},readAsText:function(f){return d.call(this,"readAsText",f)}})}}),a5(av,[a8,aT,aN],function(c,b,d){function a(){var g,f=[];b.extend(this,{append:function(i,j){var e=this,h=b.typeOf(j);j instanceof d?g={name:i,value:j}:"array"===h?(i+="[]",b.each(j,function(k){e.append(i,k)})):"object"===h?b.each(j,function(l,k){e.append(i+"["+k+"]",l)}):"null"===h||"undefined"===h||"number"===h&&isNaN(j)?e.append(i,"false"):f.push({name:i,value:j.toString()})},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return g&&g.value||null},getBlobName:function(){return g&&g.name||null},each:function(e){b.each(f,function(h){e(h.value,h.name)}),g&&e(g.value,g.name)},destroy:function(){g=null,f=[]}})}return a}),a5(aj,[aT,a8,aY,aQ,aP,a1,al,aN,aF,av,bb,ba],function(G,k,z,C,w,y,J,q,j,I,B,H){function D(){this.uid=G.guid("uid_")}function F(){function bh(n,g){return t.hasOwnProperty(n)?1===arguments.length?B.can("define_property")?t[n]:K[n]:void (B.can("define_property")?t[n]=g:K[n]=g):void 0}function V(n){function g(){Z&&(Z.destroy(),Z=null),u.dispatchEvent("loadend"),u=null}function v(L){Z.bind("LoadStart",function(M){bh("readyState",F.LOADING),u.dispatchEvent("readystatechange"),u.dispatchEvent(M),h&&u.upload.dispatchEvent(M)}),Z.bind("Progress",function(M){bh("readyState")!==F.LOADING&&(bh("readyState",F.LOADING),u.dispatchEvent("readystatechange")),u.dispatchEvent(M)}),Z.bind("UploadProgress",function(M){h&&u.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:M.total,loaded:M.loaded})}),Z.bind("Load",function(M){bh("readyState",F.DONE),bh("status",Number(L.exec.call(Z,"XMLHttpRequest","getStatus")||0)),bh("statusText",x[bh("status")]||""),bh("response",L.exec.call(Z,"XMLHttpRequest","getResponse",bh("responseType"))),~G.inArray(bh("responseType"),["text",""])?bh("responseText",bh("response")):"document"===bh("responseType")&&bh("responseXML",bh("response")),bi=L.exec.call(Z,"XMLHttpRequest","getAllResponseHeaders"),u.dispatchEvent("readystatechange"),bh("status")>0?(h&&u.upload.dispatchEvent(M),u.dispatchEvent(M)):(i=!0,u.dispatchEvent("error")),g()}),Z.bind("Abort",function(M){u.dispatchEvent(M),g()}),Z.bind("Error",function(M){i=!0,bh("readyState",F.DONE),u.dispatchEvent("readystatechange"),X=!0,u.dispatchEvent(M),g()}),L.exec.call(Z,"XMLHttpRequest","send",{url:W,method:bl,async:o,user:r,password:e,headers:bk,mimeType:p,encoding:ae,responseType:u.responseType,withCredentials:u.withCredentials,options:s},n)}var u=this;Y=(new Date).getTime(),Z=new J,"string"==typeof s.required_caps&&(s.required_caps=y.parseCaps(s.required_caps)),s.required_caps=G.extend({},s.required_caps,{return_response_type:u.responseType}),n instanceof I&&(s.required_caps.send_multipart=!0),G.isEmptyObj(bk)||(s.required_caps.send_custom_headers=!0),m||(s.required_caps.do_cors=!0),s.ruid?v(Z.connectRuntime(s)):(Z.bind("RuntimeInit",function(M,L){v(L)}),Z.bind("RuntimeError",function(M,L){u.dispatchEvent("RuntimeError",L)}),Z.connectRuntime(s))}function bj(){bh("responseText",""),bh("responseXML",null),bh("response",null),bh("status",0),bh("statusText",""),Y=l=null}var K=this,t={timeout:0,readyState:F.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},o=!0,W,bl,bk={},r,e,ae=null,p=null,c=!1,d=!1,h=!1,X=!1,i=!1,m=!1,Y,l,Q=null,f=null,s={},Z,bi="",a;G.extend(this,t,{uid:G.guid("uid_"),upload:new D,open:function(M,n,L,v,N){var g;if(!M||!n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(M)||C.utf8_encode(M)!==M){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(~G.inArray(M.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(bl=M.toUpperCase()),~G.inArray(bl,["CONNECT","TRACE","TRACK"])){throw new k.DOMException(k.DOMException.SECURITY_ERR)}if(n=C.utf8_encode(n),g=w.parseUrl(n),m=w.hasSameOrigin(g),W=w.resolveUrl(n),(v||N)&&!m){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}if(r=v||g.user,e=N||g.pass,o=L||!0,o===!1&&(bh("timeout")||bh("withCredentials")||""!==bh("responseType"))){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}c=!o,d=!1,bk={},bj.call(this),bh("readyState",F.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(n,u){var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(bh("readyState")!==F.OPENED||d){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(n)||C.utf8_encode(n)!==n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}return n=G.trim(n).toLowerCase(),~G.inArray(n,g)||/^(proxy\-|sec\-)/.test(n)?!1:(bk[n]?bk[n]+=", "+u:bk[n]=u,!0)},getAllResponseHeaders:function(){return bi||""},getResponseHeader:function(g){return g=g.toLowerCase(),i||~G.inArray(g,["set-cookie","set-cookie2"])?null:bi&&""!==bi&&(a||(a={},G.each(bi.split(/\r\n/),function(u){var v=u.split(/:\s+/);2===v.length&&(v[0]=G.trim(v[0]),a[v[0].toLowerCase()]={header:v[0],value:G.trim(v[1])})})),a.hasOwnProperty(g))?a[g].header+": "+a[g].value:null},overrideMimeType:function(g){var n,u;if(~G.inArray(bh("readyState"),[F.LOADING,F.DONE])){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(g=G.trim(g.toLowerCase()),/;/.test(g)&&(n=g.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(g=n[1],n[2]&&(u=n[2])),!H.mimes[g]){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}Q=g,f=u},send:function(v,g){if(s="string"===G.typeOf(g)?{ruid:g}:g?g:{},this.readyState!==F.OPENED||d){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(v instanceof q){s.ruid=v.ruid,p=v.type||"application/octet-stream"}else{if(v instanceof I){if(v.hasBlob()){var u=v.getBlob();s.ruid=u.ruid,p=u.type||"application/octet-stream"}}else{"string"==typeof v&&(ae="UTF-8",p="text/plain;charset=UTF-8",v=C.utf8_encode(v))}}this.withCredentials||(this.withCredentials=s.required_caps&&s.required_caps.send_browser_cookies&&!m),h=!c&&this.upload.hasEventListener(),i=!1,X=!v,c||(d=!0),V.call(this,v)},abort:function(){if(i=!0,c=!1,~G.inArray(bh("readyState"),[F.UNSENT,F.OPENED,F.DONE])){bh("readyState",F.UNSENT)}else{if(bh("readyState",F.DONE),d=!1,!Z){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}Z.getRuntime().exec.call(Z,"XMLHttpRequest","abort",X),X=!0}},destroy:function(){Z&&("function"===G.typeOf(Z.destroy)&&Z.destroy(),Z=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(A.concat(["readystatechange"])),this.upload.handleEventProps(A)}var x={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};D.prototype=z.instance;var A=["loadstart","progress","abort","error","load","timeout","loadend"],E=1,b=2;return F.UNSENT=0,F.OPENED=1,F.HEADERS_RECEIVED=2,F.LOADING=3,F.DONE=4,F.prototype=z.instance,F}),a5(ak,[aT,aQ,a7,aY],function(d,b,f,a){function c(){function j(){g=m=0,n=this.result=null}function e(l,o){var h=this;q=o,h.bind("TransportingProgress",function(i){m=i.loaded,g>m&&-1===d.inArray(h.state,[c.IDLE,c.DONE])&&p.call(h)},999),h.bind("TransportingComplete",function(){m=g,h.state=c.DONE,n=null,h.result=q.exec.call(h,"Transporter","getAsBlob",l||"")},999),h.state=c.BUSY,h.trigger("TransportingStarted"),p.call(h)}function p(){var l=this,o,h=g-m;k>h&&(k=h),o=b.btoa(n.substr(m,k)),q.exec.call(l,"Transporter","receive",o,g)}var r,q,n,g,m,k;f.call(this),d.extend(this,{uid:d.guid("uid_"),state:c.IDLE,result:null,transport:function(l,s,o){var h=this;if(o=d.extend({chunk_size:204798},o),(r=o.chunk_size%3)&&(o.chunk_size+=3-r),k=o.chunk_size,j.call(this),n=l,g=l.length,"string"===d.typeOf(o)||o.ruid){e.call(h,s,this.connectRuntime(o))}else{var i=function(v,u){h.unbind("RuntimeInit",i),e.call(h,s,u)};this.bind("RuntimeInit",i),this.connectRuntime(o)}},abort:function(){var h=this;h.state=c.IDLE,q&&(q.exec.call(h,"Transporter","clear"),h.trigger("TransportingAborted")),j.call(h)},destroy:function(){this.unbindAll(),q=null,this.disconnectRuntime(),j.call(this)}})}return c.IDLE=0,c.BUSY=1,c.DONE=2,c.prototype=a.instance,c}),a5(ao,[aT,a6,a8,aF,aj,a1,a7,ak,bb,aY,aN,az,aQ],function(x,C,k,q,b,j,A,D,B,z,m,y,v){function w(){function e(c){c||(c=this.exec("Image","getInfo")),this.size=c.size,this.width=c.width,this.height=c.height,this.type=c.type,this.meta=c.meta,""===this.name&&(this.name=c.name)}function h(l){var c=x.typeOf(l);try{if(l instanceof w){if(!l.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}a.apply(this,arguments)}else{if(l instanceof m){if(!~x.inArray(l.type,["image/jpeg","image/png"])){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}f.apply(this,arguments)}else{if(-1!==x.inArray(c,["blob","file"])){h.call(this,new y(null,l),arguments[1])}else{if("string"===c){"data:"===l.substr(0,5)?h.call(this,new m(null,{data:l}),arguments[1]):d.apply(this,arguments)}else{if("node"!==c||"img"!==l.nodeName.toLowerCase()){throw new k.DOMException(k.DOMException.TYPE_MISMATCH_ERR)}h.call(this,l.src,arguments[1])}}}}}catch(n){this.trigger("error",n.code)}}function a(l,o){var c=this.connectRuntime(l.ruid);this.ruid=c.uid,c.exec.call(this,"Image","loadFromImage",l,"undefined"===x.typeOf(o)?!0:o)}function f(l,p){function c(i){o.ruid=i.uid,i.exec.call(o,"Image","loadFromBlob",l)}var o=this;o.name=l.name||"",l.isDetached()?(this.bind("RuntimeInit",function(n,i){c(i)}),p&&"string"==typeof p.required_caps&&(p.required_caps=j.parseCaps(p.required_caps)),this.connectRuntime(x.extend({required_caps:{access_image_binary:!0,resize_image:!0}},p))):c(this.connectRuntime(l.ruid))}function d(o,l){var p=this,c;c=new b,c.open("get",o),c.responseType="blob",c.onprogress=function(i){p.trigger(i)},c.onload=function(){f.call(p,c.response,!0)},c.onerror=function(i){p.trigger(i)},c.onloadend=function(){c.destroy()},c.bind("RuntimeError",function(n,i){p.trigger("RuntimeError",i)}),c.send(null,l)}A.call(this),x.extend(this,{uid:x.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){h.apply(this,arguments)},downsize:function(l){var c={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:!1};l="object"==typeof l?x.extend(c,l):x.extend(c,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>w.MAX_RESIZE_WIDTH||this.height>w.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}this.exec("Image","downsize",l.width,l.height,l.crop,l.preserveHeaders)}catch(n){this.trigger("error",n.code)}},crop:function(i,c,l){this.downsize(i,c,!0,l)},getAsCanvas:function(){if(!B.can("create_canvas")){throw new k.RuntimeError(k.RuntimeError.NOT_SUPPORTED_ERR)}var c=this.connectRuntime(this.ruid);return c.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return this.exec("Image","getAsBlob",i||"image/jpeg",c||90)},getAsDataURL:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return this.exec("Image","getAsDataURL",i||"image/jpeg",c||90)},getAsBinaryString:function(i,c){var l=this.getAsDataURL(i,c);return v.atob(l.substring(l.indexOf("base64,")+7))},embed:function(s,t){function E(i,G){var J=this;if(B.can("create_canvas")){var c=J.getAsCanvas();if(c){return s.appendChild(c),c=null,J.destroy(),void p.trigger("embedded")}}var I=J.getAsDataURL(i,G);if(!I){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}if(B.can("use_data_uri_of",I.length)){s.innerHTML='<img src="'+I+'" width="'+J.width+'" height="'+J.height+'" />',J.destroy(),p.trigger("embedded")}else{var H=new D;H.bind("TransportingComplete",function(){F=p.connectRuntime(this.result.ruid),p.bind("Embedded",function(){x.extend(F.getShimContainer().style,{top:"0px",left:"0px",width:J.width+"px",height:J.height+"px"}),F=null},999),F.exec.call(p,"ImageView","display",this.result.uid,width,height),J.destroy()}),H.transport(v.atob(I.substring(I.indexOf("base64,")+7)),i,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:s})}}var p=this,F;t=x.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},t||{});try{if(!(s=C.get(s))){throw new k.DOMException(k.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}this.width>w.MAX_RESIZE_WIDTH||this.height>w.MAX_RESIZE_HEIGHT;var n=new w;return n.bind("Resize",function(){E.call(this,t.type,t.quality)}),n.bind("Load",function(){n.downsize(t)}),this.meta.thumb&&this.meta.thumb.width>=t.width&&this.meta.thumb.height>=t.height?n.load(this.meta.thumb.data):n.clone(this,!1),n}catch(u){this.trigger("error",u.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}}),this.handleEventProps(g),this.bind("Load Resize",function(){e.call(this)},999)}var g=["progress","load","error","resize","embedded"];return w.MAX_RESIZE_WIDTH=8192,w.MAX_RESIZE_HEIGHT=8192,w.prototype=z.instance,w}),a5(aB,[aT,a8,a1,bb],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue,l=g.extend({access_binary:i(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return k.can("access_binary")&&!!b.Image},display_media:i(c.can("create_canvas")||c.can("use_data_uri_over32kb")),do_cors:i(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:i(function(){var m=document.createElement("div");return("draggable" in m||"ondragstart" in m&&"ondrop" in m)&&("IE"!==c.browser||c.verComp(c.version,9,">"))}()),filter_by_extension:i(function(){return"Chrome"===c.browser&&c.verComp(c.version,28,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||"Safari"===c.browser&&c.verComp(c.version,7,">=")}()),return_response_headers:a,return_response_type:function(m){return"json"===m&&window.JSON?!0:c.can("return_response_type",m)},return_status_code:a,report_upload_progress:i(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return k.can("access_binary")&&c.can("create_canvas")},select_file:function(){return c.can("use_fileinput")&&window.File},select_folder:function(){return k.can("select_file")&&"Chrome"===c.browser&&c.verComp(c.version,21,">=")},select_multiple:function(){return k.can("select_file")&&!("Safari"===c.browser&&"Windows"===c.os)&&!("iOS"===c.os&&c.verComp(c.osVersion,"7.0.0",">")&&c.verComp(c.osVersion,"8.0.0","<"))},send_binary_string:i(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:i(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||k.can("send_binary_string")},slice_blob:i(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return k.can("slice_blob")&&k.can("send_multipart")},summon_file_dialog:function(){return k.can("select_file")&&("Firefox"===c.browser&&c.verComp(c.version,4,">=")||"Opera"===c.browser&&c.verComp(c.version,12,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||!!~g.inArray(c.browser,["Chrome","Safari"]))},upload_filesize:a},arguments[2]);j.call(this,e,arguments[1]||h,l),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(k),m=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html5",b={};return j.addConstructor(h,f),b}),a5(ap,[aT],function(h){function d(){this.returnValue=!1}function k(){this.cancelBubble=!0}var c={},g="moxie_"+h.guid(),j=function(p,i,n,m){var q,e;i=i.toLowerCase(),p.addEventListener?(q=n,p.addEventListener(i,q,!1)):p.attachEvent&&(q=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=d,a.stopPropagation=k,n(a)},p.attachEvent("on"+i,q)),p[g]||(p[g]=h.guid()),c.hasOwnProperty(p[g])||(c[p[g]]={}),e=c[p[g]],e.hasOwnProperty(i)||(e[i]=[]),e[i].push({func:q,orig:n,key:m})},b=function(l,r,p){var e,m;if(r=r.toLowerCase(),l[g]&&c[l[g]]&&c[l[g]][r]){e=c[l[g]][r];for(var i=e.length-1;i>=0&&(e[i].orig!==p&&e[i].key!==p||(l.removeEventListener?l.removeEventListener(r,e[i].func,!1):l.detachEvent&&l.detachEvent("on"+r,e[i].func),e[i].orig=null,e[i].func=null,e.splice(i,1),p===m));i--){}if(e.length||delete c[l[g]][r],h.isEmptyObj(c[l[g]])){delete c[l[g]];try{delete l[g]}catch(q){l[g]=m}}}},f=function(a,e){a&&a[g]&&h.each(c[a[g]],function(m,l){b(a,l,e)})};return{addEvent:j,removeEvent:b,removeAllEvents:f}}),a5(ar,[aB,az,aT,a6,ap,ba,bb],function(h,d,k,c,g,j,b){function f(){var a;k.extend(this,{init:function(x){var w=this,v=w.getRuntime(),n,t,o,r,e,i;a=x,o=a.accept.mimes||j.extList2mimes(a.accept,v.can("filter_by_extension")),t=v.getShimContainer(),t.innerHTML='<input id="'+v.uid+'" type="file" style="font-size:999px;opacity:0;"'+(a.multiple&&v.can("select_multiple")?"multiple":"")+(a.directory&&v.can("select_folder")?"webkitdirectory directory":"")+(o?' accept="'+o.join(",")+'"':"")+" />",n=c.get(v.uid),k.extend(n.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),r=c.get(a.browse_button),v.can("summon_file_dialog")&&("static"===c.getStyle(r,"position")&&(r.style.position="relative"),e=parseInt(c.getStyle(r,"z-index"),10)||1,r.style.zIndex=e,t.style.zIndex=e-1,g.addEvent(r,"click",function(m){var l=c.get(v.uid);l&&!l.disabled&&l.click(),m.preventDefault()},w.uid)),i=v.can("summon_file_dialog")?r:t,g.addEvent(i,"mouseover",function(){w.trigger("mouseenter")},w.uid),g.addEvent(i,"mouseout",function(){w.trigger("mouseleave")},w.uid),g.addEvent(i,"mousedown",function(){w.trigger("mousedown")},w.uid),g.addEvent(c.get(a.container),"mouseup",function(){w.trigger("mouseup")},w.uid),n.onchange=function q(l){if(w.files=[],k.each(this.files,function(s){var p="";return a.directory&&"."==s.name?!0:(s.webkitRelativePath&&(p="/"+s.webkitRelativePath.replace(/^\//,"")),s=new d(v.uid,s),s.relativePath=p,void w.files.push(s))}),"IE"!==b.browser&&"IEMobile"!==b.browser){this.value=""}else{var m=this.cloneNode(!0);this.parentNode.replaceChild(m,this),m.onchange=q}w.files.length&&w.trigger("change")},w.trigger({type:"ready",async:!0}),t=null},disable:function(l){var i=this.getRuntime(),m;(m=c.get(i.uid))&&(m.disabled=!!l)},destroy:function(){var e=this.getRuntime(),l=e.getShim(),i=e.getShimContainer();g.removeAllEvents(i,this.uid),g.removeAllEvents(a&&c.get(a.container),this.uid),g.removeAllEvents(a&&c.get(a.browse_button),this.uid),i&&(i.innerHTML=""),l.removeInstance(this.uid),a=i=l=null}})}return h.FileInput=f}),a5(aC,[aB,aN],function(b,a){function c(){function d(j,g,k){var f;if(!window.File.prototype.slice){return(f=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?f.call(j,g,k):null}try{return j.slice(),j.slice(g,k)}catch(h){return j.slice(g,k-g)}}this.slice=function(){return new a(this.getRuntime().uid,d.apply(this,arguments))}}return b.Blob=c}),a5(aq,[aB,az,aT,a6,ap,ba],function(g,d,j,c,f,h){function b(){function t(l){if(!l.dataTransfer||!l.dataTransfer.types){return !1}var a=j.toArray(l.dataTransfer.types||[]);return -1!==j.inArray("Files",a)||-1!==j.inArray("public.file-url",a)||-1!==j.inArray("application/x-moz-file",a)}function x(l,m){if(y(l)){var a=new d(q,l);a.relativePath=m||"",r.push(a)}}function z(m){for(var l=[],a=0;a<m.length;a++){[].push.apply(l,m[a].extensions.split(/\s*,\s*/))}return -1===j.inArray("*",l)?l:[]}function y(l){if(!i.length){return !0}var a=h.getFileExtension(l.name);return !a||-1!==j.inArray(a,i)}function w(m,l){var a=[];j.each(m,function(s){var p=s.webkitGetAsEntry();p&&(p.isFile?x(s.getAsFile(),p.fullPath):a.push(p))}),a.length?n(a,l):l()}function n(m,l){var a=[];j.each(m,function(p){a.push(function(e){v(p,e)})}),j.inSeries(a,function(){l()})}function v(l,a){l.isFile?l.file(function(e){x(e,l.fullPath),a()},function(){a()}):l.isDirectory?o(l,a):a()}function o(p,l){function s(u){m.readEntries(function(e){e.length?([].push.apply(a,e),s(u)):u()},u)}var a=[],m=p.createReader();s(function(){n(a,l)})}var r=[],i=[],k,q;j.extend(this,{init:function(e){var a=this,l;k=e,q=a.ruid,i=z(k.accept),l=k.container,f.addEvent(l,"dragover",function(m){t(m)&&(m.preventDefault(),m.dataTransfer.dropEffect="copy")},a.uid),f.addEvent(l,"drop",function(m){t(m)&&(m.preventDefault(),r=[],m.dataTransfer.items&&m.dataTransfer.items[0].webkitGetAsEntry?w(m.dataTransfer.items,function(){a.files=r,a.trigger("drop")}):(j.each(m.dataTransfer.files,function(p){x(p)}),a.files=r,a.trigger("drop")))},a.uid),f.addEvent(l,"dragenter",function(m){a.trigger("dragenter")},a.uid),f.addEvent(l,"dragleave",function(m){a.trigger("dragleave")},a.uid)},destroy:function(){f.removeAllEvents(k&&c.get(k.container),this.uid),q=r=i=k=null}})}return g.FileDrop=b}),a5(ay,[aB,aQ,aT],function(c,b,d){function a(){function h(i){return b.atob(i.substring(i.indexOf("base64,")+7))}var f,g=!1;d.extend(this,{read:function(i,j){var e=this;e.result="",f=new window.FileReader,f.addEventListener("progress",function(k){e.trigger(k)}),f.addEventListener("load",function(k){e.result=g?h(f.result):f.result,e.trigger(k)}),f.addEventListener("error",function(k){e.trigger(k,f.error)}),f.addEventListener("loadend",function(k){f=null,e.trigger(k)}),"function"===d.typeOf(f[i])?(g=!1,f[i](j.getSource())):"readAsBinaryString"===i&&(g=!0,f.readAsDataURL(j.getSource()))},abort:function(){f&&f.abort()},destroy:function(){f=null}})}return c.FileReader=a}),a5(an,[aB,aT,ba,aP,az,aN,av,a8,bb],function(h,m,f,g,b,d,k,p,l){function j(){function q(w,u){var x=this,c,v;c=u.getBlob().getSource(),v=new window.FileReader,v.onload=function(){u.append(u.getBlobName(),new d(null,{type:c.type,data:v.result})),i.send.call(x,w,u)},v.readAsBinaryString(c)}function s(){return !window.XMLHttpRequest||"IE"===l.browser&&l.verComp(l.version,8,"<")?function(){for(var u=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],c=0;c<u.length;c++){try{return new ActiveXObject(u[c])}catch(v){}}}():new window.XMLHttpRequest}function a(u){var c=u.responseXML,v=u.responseText;return"IE"===l.browser&&v&&c&&!c.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(u.getResponseHeader("Content-Type"))&&(c=new window.ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.validateOnParse=!1,c.loadXML(v)),c&&("IE"===l.browser&&0!==c.parseError||!c.documentElement||"parsererror"===c.documentElement.tagName)?null:c}function r(x){var v="----moxieboundary"+(new Date).getTime(),y="--",u="\r\n",w="",c=this.getRuntime();if(!c.can("send_binary_string")){throw new p.RuntimeError(p.RuntimeError.NOT_SUPPORTED_ERR)}return n.setRequestHeader("Content-Type","multipart/form-data; boundary="+v),x.each(function(z,t){w+=z instanceof d?y+v+u+'Content-Disposition: form-data; name="'+t+'"; filename="'+unescape(encodeURIComponent(z.name||"blob"))+'"'+u+"Content-Type: "+(z.type||"application/octet-stream")+u+u+z.getSource()+u:y+v+u+'Content-Disposition: form-data; name="'+t+'"'+u+u+unescape(encodeURIComponent(z))+u}),w+=y+v+y+u}var i=this,n,o;m.extend(this,{send:function(z,y){var w=this,e="Mozilla"===l.browser&&l.verComp(l.version,4,">=")&&l.verComp(l.version,7,"<"),u="Android Browser"===l.browser,c=!1;if(o=z.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),n=s(),n.open(z.method,z.url,z.async,z.user,z.password),y instanceof d){y.isDetached()&&(c=!0),y=y.getSource()}else{if(y instanceof k){if(y.hasBlob()){if(y.getBlob().isDetached()){y=r.call(w,y),c=!0}else{if((e||u)&&"blob"===m.typeOf(y.getBlob().getSource())&&window.FileReader){return void q.call(w,z,y)}}}if(y instanceof k){var x=new window.FormData;y.each(function(A,v){A instanceof d?x.append(v,A.getSource()):x.append(v,A)}),y=x}}}n.upload?(z.withCredentials&&(n.withCredentials=!0),n.addEventListener("load",function(v){w.trigger(v)}),n.addEventListener("error",function(v){w.trigger(v)}),n.addEventListener("progress",function(v){w.trigger(v)}),n.upload.addEventListener("progress",function(v){w.trigger({type:"UploadProgress",loaded:v.loaded,total:v.total})})):n.onreadystatechange=function t(){switch(n.readyState){case 1:break;case 2:break;case 3:var B,v;try{g.hasSameOrigin(z.url)&&(B=n.getResponseHeader("Content-Length")||0),n.responseText&&(v=n.responseText.length)}catch(A){B=v=0}w.trigger({type:"progress",lengthComputable:!!B,total:parseInt(B,10),loaded:v});break;case 4:n.onreadystatechange=function(){},0===n.status?w.trigger("error"):w.trigger("load")}},m.isEmptyObj(z.headers)||m.each(z.headers,function(A,v){n.setRequestHeader(v,A)}),""!==z.responseType&&"responseType" in n&&("json"!==z.responseType||l.can("return_response_type","json")?n.responseType=z.responseType:n.responseType="text"),c?n.sendAsBinary?n.sendAsBinary(y):!function(){for(var A=new Uint8Array(y.length),v=0;v<y.length;v++){A[v]=255&y.charCodeAt(v)}n.send(A.buffer)}():n.send(y),w.trigger("loadstart")},getStatus:function(){try{if(n){return n.status}}catch(c){}return 0},getResponse:function(x){var v=this.getRuntime();try{switch(x){case"blob":var u=new b(v.uid,n.response),y=n.getResponseHeader("Content-Disposition");if(y){var c=y.match(/filename=([\'\"'])([^\1]+)\1/);c&&(o=c[2])}return u.name=o,u.type||(u.type=f.getFileMime(o)),u;case"json":return l.can("return_response_type","json")?n.response:200===n.status&&window.JSON?JSON.parse(n.responseText):null;case"document":return a(n);default:return""!==n.responseText?n.responseText:null}}catch(w){return null}},getAllResponseHeaders:function(){try{return n.getAllResponseHeaders()}catch(c){}return""},abort:function(){n&&n.abort()},destroy:function(){i=o=null}})}return h.XMLHttpRequest=j}),a5(aw,[aT],function(c){function b(f){f instanceof ArrayBuffer?d.apply(this,arguments):a.apply(this,arguments)}function d(e){var f=new DataView(e);c.extend(this,{readByteAt:function(g){return f.getUint8(g)},writeByteAt:function(h,g){f.setUint8(h,g)},SEGMENT:function(j,g,h){switch(arguments.length){case 2:return e.slice(j,j+g);case 1:return e.slice(j);case 3:if(null===h&&(h=new ArrayBuffer),h instanceof ArrayBuffer){var k=new Uint8Array(this.length()-g+h.byteLength);j>0&&k.set(new Uint8Array(e.slice(0,j)),0),k.set(new Uint8Array(h),j),k.set(new Uint8Array(e.slice(j+g)),j+h.byteLength),this.clear(),e=k.buffer,f=new DataView(e);break}default:return e}},length:function(){return e?e.byteLength:0},clear:function(){f=e=null}})}function a(e){function f(h,j,g){g=3===arguments.length?g:e.length-j-1,e=e.substr(0,j)+h+e.substr(g+j)}c.extend(this,{readByteAt:function(g){return e.charCodeAt(g)},writeByteAt:function(h,g){f(String.fromCharCode(g),h,1)},SEGMENT:function(j,g,h){switch(arguments.length){case 1:return e.substr(j);case 2:return e.substr(j,g);case 3:f(null!==h?h:"",j,g);break;default:return e}},length:function(){return e?e.length:0},clear:function(){e=null}})}return c.extend(b.prototype,{littleEndian:!1,read:function(j,g){var k,f,h;if(j+g>this.length()){throw new Error("You are trying to read outside the source boundaries.")}for(f=this.littleEndian?0:-8*(g-1),h=0,k=0;g>h;h++){k|=this.readByteAt(j+h)<<Math.abs(f+8*h)}return k},write:function(j,g,l){var f,h,k="";if(j>this.length()){throw new Error("You are trying to write outside the source boundaries.")}for(f=this.littleEndian?0:-8*(l-1),h=0;l>h;h++){this.writeByteAt(j+h,g>>Math.abs(f+8*h)&255)}},BYTE:function(f){return this.read(f,1)},SHORT:function(f){return this.read(f,2)},LONG:function(f){return this.read(f,4)},SLONG:function(g){var f=this.read(g,4);return f>2147483647?f-4294967296:f},CHAR:function(f){return String.fromCharCode(this.read(f,1))},STRING:function(g,f){return this.asArray("CHAR",g,f).join("")},asArray:function(j,g,k){for(var f=[],h=0;k>h;h++){f[h]=this[j](g+h)}return f}}),b}),a5(aE,[aw,a8],function(b,a){return function c(f){var h=[],j,d,g,e=0;if(j=new b(f),65496!==j.SHORT(0)){throw j.clear(),new a.ImageError(a.ImageError.WRONG_FORMAT)}for(d=2;d<=j.length();){if(g=j.SHORT(d),g>=65488&&65495>=g){d+=2}else{if(65498===g||65497===g){break}e=j.SHORT(d+2)+2,g>=65505&&65519>=g&&h.push({hex:g,name:"APP"+(15&g),start:d,length:e,segment:j.SEGMENT(d,e)}),d+=e}}return j.clear(),{headers:h,restore:function(l){var p,k,m;for(m=new b(l),d=65504==m.SHORT(2)?4+m.SHORT(4):2,k=0,p=h.length;p>k;k++){m.SEGMENT(d,0,h[k].segment),d+=h[k].length}return l=m.SEGMENT(),m.clear(),l},strip:function(m){var l,n,p,k;for(p=new c(m),n=p.headers,p.purge(),l=new b(m),k=n.length;k--;){l.SEGMENT(n[k].start,n[k].length,"")}return m=l.SEGMENT(),l.clear(),m},get:function(m){for(var l=[],o=0,k=h.length;k>o;o++){h[o].name===m.toUpperCase()&&l.push(h[o].segment)}return l},set:function(p,m){var r=[],l,q,k;for("string"==typeof m?r.push(m):r=m,l=q=0,k=h.length;k>l&&(h[l].name===p.toUpperCase()&&(h[l].segment=r[q],h[l].length=r[q].length,q++),!(q>=r.length));l++){}},purge:function(){this.headers=h=[]}}}}),a5(a3,[aT,aw,a8],function(c,d,a){function b(g){function q(A,l){var z=this,H,L,K,F,C,E,x,B,D=[],J={},I={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},G={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(H=z.SHORT(A),L=0;H>L;L++){if(D=[],x=A+2+12*L,K=l[z.SHORT(x)],K!==aU){if(F=I[z.SHORT(x+=2)],C=z.LONG(x+=2),E=G[F],!E){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}if(x+=4,E*C>4&&(x=z.LONG(x)+m.tiffHeader),x+E*C>=this.length()){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}"ASCII"!==F?(D=z.asArray(F,x,C),B=1==C?D[0]:D,i.hasOwnProperty(K)&&"object"!=typeof B?J[K]=i[K][B]:J[K]=B):J[K]=c.trim(z.STRING(x,C).replace(/\0$/,""))}}return J}function t(z,C,v){var x,f,p,A=0;if("string"==typeof C){var D=n[z.toLowerCase()];for(var B in D){if(D[B]===C){C=B;break}}}x=m[z.toLowerCase()+"IFD"],f=this.SHORT(x);for(var w=0;f>w;w++){if(p=x+12*w+2,this.SHORT(p)==C){A=p+8;break}}if(!A){return !1}try{this.write(A,v,4)}catch(y){return !1}return !0}var r,n,i,m,j,k;if(d.call(this,g),n={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},i={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},m={tiffHeader:10},j=m.tiffHeader,r={clear:this.clear},c.extend(this,{read:function(){try{return b.prototype.read.apply(this,arguments)}catch(f){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},write:function(){try{return b.prototype.write.apply(this,arguments)}catch(f){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(f){return this.LONG(f)/this.LONG(f+4)},SRATIONAL:function(f){return this.SLONG(f)/this.SLONG(f+4)},ASCII:function(f){return this.CHAR(f)},TIFF:function(){return k||null},EXIF:function(){var h=null;if(m.exifIFD){try{h=q.call(this,m.exifIFD,n.exif)}catch(o){return null}if(h.ExifVersion&&"array"===c.typeOf(h.ExifVersion)){for(var f=0,l="";f<h.ExifVersion.length;f++){l+=String.fromCharCode(h.ExifVersion[f])}h.ExifVersion=l}}return h},GPS:function(){var f=null;if(m.gpsIFD){try{f=q.call(this,m.gpsIFD,n.gps)}catch(h){return null}f.GPSVersionID&&"array"===c.typeOf(f.GPSVersionID)&&(f.GPSVersionID=f.GPSVersionID.join("."))}return f},thumb:function(){if(m.IFD1){try{var h=q.call(this,m.IFD1,n.thumb);if("JPEGInterchangeFormat" in h){return this.SEGMENT(m.tiffHeader+h.JPEGInterchangeFormat,h.JPEGInterchangeFormatLength)}}catch(f){}}return null},setExif:function(h,f){return"PixelXDimension"!==h&&"PixelYDimension"!==h?!1:t.call(this,"exif",h,f)},clear:function(){r.clear(),g=n=i=k=m=r=null}}),65505!==this.SHORT(0)||"EXIF\x00"!==this.STRING(4,5).toUpperCase()){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}if(this.littleEndian=18761==this.SHORT(j),42!==this.SHORT(j+=2)){throw new a.ImageError(a.ImageError.INVALID_META_ERR)}m.IFD0=m.tiffHeader+this.LONG(j+=2),k=q.call(this,m.IFD0,n.tiff),"ExifIFDPointer" in k&&(m.exifIFD=m.tiffHeader+k.ExifIFDPointer,delete k.ExifIFDPointer),"GPSInfoIFDPointer" in k&&(m.gpsIFD=m.tiffHeader+k.GPSInfoIFDPointer,delete k.GPSInfoIFDPointer),c.isEmptyObj(k)&&(k=null);var e=this.LONG(m.IFD0+12*this.SHORT(m.IFD0)+2);e&&(m.IFD1=m.tiffHeader+e)}return b.prototype=d.prototype,b}),a5(ai,[aT,a8,aE,aw,a3],function(d,b,g,a,c){function f(e){function p(o){var l=0,s,h;for(o||(o=n);l<=o.length();){if(s=o.SHORT(l+=2),s>=65472&&65475>=s){return l+=5,{height:o.SHORT(l),width:o.SHORT(l+=2)}}h=o.SHORT(l+=2),l+=h-2}return null}function r(){var l=m.thumb(),h,o;return l&&(h=new a(l),o=p(h),h.clear(),o)?(o.data=l,o):null}function q(){m&&i&&n&&(m.clear(),i.purge(),n.clear(),j=i=m=n=null)}var n,i,m,j;if(n=new a(e),65496!==n.SHORT(0)){throw new b.ImageError(b.ImageError.WRONG_FORMAT)}i=new g(e);try{m=new c(i.get("app1")[0])}catch(k){}j=p.call(this),d.extend(this,{type:"image/jpeg",size:n.length(),width:j&&j.width||0,height:j&&j.height||0,setExif:function(h,l){return m?("object"===d.typeOf(h)?d.each(h,function(s,o){m.setExif(o,s)}):m.setExif(h,l),void i.set("app1",m.SEGMENT())):!1},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):i.restore(e)},stripHeaders:function(h){return i.strip(h)},purge:function(){q.call(this)}}),m&&(this.meta={tiff:m.TIFF(),exif:m.EXIF(),gps:m.GPS(),thumb:r()})}return f}),a5(ax,[a8,aT,aw],function(c,b,d){function a(h){function k(){var l,i;return l=f.call(this,8),"IHDR"==l.type?(i=l.start,{width:j.LONG(i),height:j.LONG(i+=4)}):null}function m(){j&&(j.clear(),h=e=g=n=j=null)}function f(q){var o,s,l,p;return o=j.LONG(q),s=j.STRING(q+=4,4),l=q+=4,p=j.LONG(q+o),{length:o,type:s,start:l,CRC:p}}var j,g,n,e;j=new d(h),function(){var o=0,p=0,l=[35152,20039,3338,6666];for(p=0;p<l.length;p++,o+=2){if(l[p]!=j.SHORT(o)){throw new c.ImageError(c.ImageError.WRONG_FORMAT)}}}(),e=k.call(this),b.extend(this,{type:"image/png",size:j.length(),width:e.width,height:e.height,purge:function(){m.call(this)}}),m.call(this)}return a}),a5(aM,[aT,a8,ai,ax],function(c,b,d,a){return function(f){var g=[d,a],e;e=function(){for(var h=0;h<g.length;h++){try{return new g[h](f)}catch(i){}}throw new b.ImageError(b.ImageError.WRONG_FORMAT)}(),c.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(h){return h},stripHeaders:function(h){return h},purge:function(){f=null}}),c.extend(this,e),this.purge=function(){e.purge(),e=null}}}),a5(aX,[],function(){function b(L,H,B){var D=L.naturalWidth,P=L.naturalHeight,A=B.width,t=B.height,N=B.x||0,G=B.y||0,M=H.getContext("2d");a(L)&&(D/=2,P/=2);var I=1024,K=document.createElement("canvas");K.width=K.height=I;for(var C=K.getContext("2d"),F=c(L,D,P),J=0;P>J;){for(var q=J+I>P?P-J:I,n=0;D>n;){var j=n+I>D?D-n:I;C.clearRect(0,0,I,I),C.drawImage(L,-n,-J);var z=n*A/D+N<<0,Q=Math.ceil(j*A/D),O=J*t/P/F+G<<0,k=Math.ceil(q*t/P/F);M.drawImage(K,0,0,j,q,z,O,Q,k),n+=I}J+=I}K=C=null}function a(h){var f=h.naturalWidth,j=h.naturalHeight;if(f*j>1048576){var d=document.createElement("canvas");d.width=d.height=1;var g=d.getContext("2d");return g.drawImage(h,-f+1,0),0===g.getImageData(0,0,1,1).data[3]}return !1}function c(k,v,g){var j=document.createElement("canvas");j.width=1,j.height=g;var d=j.getContext("2d");d.drawImage(k,0,0);for(var f=d.getImageData(0,0,1,g).data,p=0,w=g,q=g;q>p;){var m=f[4*(q-1)+3];0===m?w=q:p=q,q=w+p>>1}j=null;var h=q/g;return 0===h?1:h}return{isSubsampled:a,renderTo:b}}),a5(a4,[aB,aT,a8,aQ,aN,az,aM,aX,ba,bb],function(j,q,f,h,b,d,m,v,p,k){function g(){function u(){if(!G&&!C){throw new f.ImageError(f.DOMException.INVALID_STATE_ERR)}return G||C}function n(l){return h.atob(l.substring(l.indexOf("base64,")+7))}function z(w,l){return"data:"+(l||"")+";base64,"+h.btoa(w)}function r(w){var l=this;C=new Image,C.onerror=function(){H.call(this),l.trigger("error",f.ImageError.WRONG_FORMAT)},C.onload=function(){l.trigger("load")},C.src="data:"==w.substr(0,5)?w:z(w,D.type)}function t(y,w){var l=this,x;return window.FileReader?(x=new FileReader,x.onload=function(){w(this.result)},x.onerror=function(){l.trigger("error",f.ImageError.WRONG_FORMAT)},x.readAsDataURL(y),void 0):w(y.getAsDataURL())}function a(y,E,e,x){var N=this,Q,P,M=0,A=0,L,J,K,w;if(c=x,w=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==q.inArray(w,[5,6,7,8])){var O=y;y=E,E=O}return L=u(),e?(y=Math.min(y,L.width),E=Math.min(E,L.height),Q=Math.max(y/L.width,E/L.height)):Q=Math.min(y/L.width,E/L.height),Q>1&&!e&&x?void this.trigger("Resize"):(G||(G=document.createElement("canvas")),J=Math.round(L.width*Q),K=Math.round(L.height*Q),e?(G.width=y,G.height=E,J>y&&(M=Math.round((J-y)/2)),K>E&&(A=Math.round((K-E)/2))):(G.width=J,G.height=K),c||s(G.width,G.height,w),i.call(this,L,G,-M,-A,J,K),this.width=G.width,this.height=G.height,o=!0,void N.trigger("Resize"))}function i(A,x,J,w,y,E){if("iOS"===k.OS){v.renderTo(A,x,{width:y,height:E,x:J,y:w})}else{var l=x.getContext("2d");l.drawImage(A,J,w,y,E)}}function s(x,w,y){switch(y){case 5:case 6:case 7:case 8:G.width=w,G.height=x;break;default:G.width=x,G.height=w}var l=G.getContext("2d");switch(y){case 2:l.translate(x,0),l.scale(-1,1);break;case 3:l.translate(x,w),l.rotate(Math.PI);break;case 4:l.translate(0,w),l.scale(1,-1);break;case 5:l.rotate(0.5*Math.PI),l.scale(1,-1);break;case 6:l.rotate(0.5*Math.PI),l.translate(0,-w);break;case 7:l.rotate(0.5*Math.PI),l.translate(x,-w),l.scale(-1,1);break;case 8:l.rotate(-0.5*Math.PI),l.translate(-x,0)}}function H(){I&&(I.purge(),I=null),B=C=G=D=null,o=!1}var F=this,C,I,G,B,D,o=!1,c=!0;q.extend(this,{loadFromBlob:function(y){var w=this,l=w.getRuntime(),x=arguments.length>1?arguments[1]:!0;if(!l.can("access_binary")){throw new f.RuntimeError(f.RuntimeError.NOT_SUPPORTED_ERR)}return D=y,y.isDetached()?(B=y.getSource(),void r.call(this,B)):void t.call(this,y.getSource(),function(A){x&&(B=n(A)),r.call(w,A)})},loadFromImage:function(w,l){this.meta=w.meta,D=new d(null,{name:w.name,size:w.size,type:w.type}),r.call(this,l?B=w.getAsBinaryString():w.getAsDataURL())},getInfo:function(){var e=this.getRuntime(),l;return !I&&B&&e.can("access_image_binary")&&(I=new m(B)),l={width:u().width||0,height:u().height||0,type:D.type||p.getFileMime(D.name),size:B&&B.length||D.size||0,name:D.name||"",meta:I&&I.meta||this.meta||{}},!l.meta||!l.meta.thumb||l.meta.thumb.data instanceof b||(l.meta.thumb.data=new b(null,{type:"image/jpeg",data:l.meta.thumb.data})),l},downsize:function(){a.apply(this,arguments)},getAsCanvas:function(){return G&&(G.id=this.uid+"_canvas"),G},getAsBlob:function(w,l){return w!==this.type&&a.call(this,this.width,this.height,!1),new d(null,{name:D.name||"",type:w,data:F.getAsBinaryString.call(this,w,l)})},getAsDataURL:function(w){var l=arguments[1]||90;if(!o){return C.src}if("image/jpeg"!==w){return G.toDataURL("image/png")}try{return G.toDataURL("image/jpeg",l/100)}catch(x){return G.toDataURL("image/jpeg")}},getAsBinaryString:function(x,w){if(!o){return B||(B=n(F.getAsDataURL(x,w))),B}if("image/jpeg"!==x){B=n(F.getAsDataURL(x,w))}else{var y;w||(w=90);try{y=G.toDataURL("image/jpeg",w/100)}catch(l){y=G.toDataURL("image/jpeg")}B=n(y),I&&(B=I.stripHeaders(B),c&&(I.meta&&I.meta.exif&&I.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),B=I.writeHeaders(B)),I.purge(),I=null)}return o=!1,B},destroy:function(){F=null,H.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return j.Image=g}),a5(ad,[aT,bb,a6,a8,a1],function(j,q,f,h,b){function d(){var c;try{c=navigator.plugins["Shockwave Flash"],c=c.description}catch(a){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){c="0.0"}}return c=c.match(/\d+/g),parseFloat(c[0]+"."+c[1])}function m(l){var a=f.get(l);a&&"OBJECT"==a.nodeName&&("IE"===q.browser?(a.style.display="none",function c(){4==a.readyState?v(l):setTimeout(c,10)}()):a.parentNode.removeChild(a))}function v(l){var c=f.get(l);if(c){for(var a in c){"function"==typeof c[a]&&(c[a]=null)}c.parentNode.removeChild(c)}}function p(c){var a=this,e;c=j.extend({swf_url:q.swf_url},c),b.call(this,c,k,{access_binary:function(i){return i&&"browser"===a.mode},access_image_binary:function(i){return i&&"browser"===a.mode},display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===a.mode},resize_image:b.capTrue,return_response_headers:!1,return_response_type:function(i){return"json"===i&&window.JSON?!0:!j.arrayDiff(i,["","text","document"])||"browser"===a.mode},return_status_code:function(i){return"browser"===a.mode||!j.arrayDiff(i,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:function(i){return i&&"browser"===a.mode},send_browser_cookies:function(i){return i&&"browser"===a.mode},send_custom_headers:function(i){return i&&"browser"===a.mode},send_multipart:b.capTrue,slice_blob:function(i){return i&&"browser"===a.mode},stream_upload:function(i){return i&&"browser"===a.mode},summon_file_dialog:!1,upload_filesize:function(i){return j.parseSizeStr(i)<=2097152||"client"===a.mode},use_http_method:function(i){return !j.arrayDiff(i,["GET","POST"])}},{access_binary:function(i){return i?"browser":"client"},access_image_binary:function(i){return i?"browser":"client"},report_upload_progress:function(i){return i?"browser":"client"},return_response_type:function(i){return j.arrayDiff(i,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(i){return j.arrayDiff(i,[200,404])?"browser":["client","browser"]},send_binary_string:function(i){return i?"browser":"client"},send_browser_cookies:function(i){return i?"browser":"client"},send_custom_headers:function(i){return i?"browser":"client"},stream_upload:function(i){return i?"client":"browser"},upload_filesize:function(i){return j.parseSizeStr(i)>=2097152?"client":"browser"}},"client"),d()<10&&(this.mode=!1),j.extend(this,{getShim:function(){return f.get(this.uid)},shimExec:function(l,i){var o=[].slice.call(arguments,2);return a.getShim().exec(this.uid,l,i,o)},init:function(){var s,i,l;l=this.getShimContainer(),j.extend(l.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),s='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+c.swf_url+'" ',"IE"===q.browser&&(s+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),s+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+c.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+q.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===q.browser?(i=document.createElement("div"),l.appendChild(i),i.outerHTML=s,i=l=null):l.innerHTML=s,e=setTimeout(function(){a&&!a.initialized&&a.trigger("Error",new h.RuntimeError(h.RuntimeError.NOT_INIT_ERR))},5000)},destroy:function(i){return function(){m(a.uid),i.call(a),clearTimeout(e),c=e=i=a=null}}(this.destroy)},g)}var k="flash",g={};return b.addConstructor(k,p),g}),a5(ah,[ad,az,aT],function(c,b,d){var a={init:function(h){var f=this,g=this.getRuntime();this.bind("Change",function(){var i=g.shimExec.call(f,"FileInput","getFiles");f.files=[],d.each(i,function(j){f.files.push(new b(g.uid,j))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{name:h.name,accept:h.accept,multiple:h.multiple}),this.trigger("ready")}};return c.FileInput=a}),a5(ag,[ad,aN],function(b,a){var c={slice:function(g,j,d,f){var h=this.getRuntime();return 0>j?j=Math.max(g.size+j,0):j>0&&(j=Math.min(j,g.size)),0>d?d=Math.max(g.size+d,0):d>0&&(d=Math.min(d,g.size)),g=h.shimExec.call(this,"Blob","slice",j,d,f||""),g&&(g=new a(h.uid,g)),g}};return b.Blob=c}),a5(ac,[ad,aQ],function(c,b){function d(f,g){switch(g){case"readAsText":return b.atob(f,"utf8");case"readAsBinaryString":return b.atob(f);case"readAsDataURL":return f}return null}var a={read:function(h,g){var f=this;return f.result="","readAsDataURL"===h&&(f.result="data:"+(g.type||"")+";base64,"),f.bind("Progress",function(e,i){i&&(f.result+=d(i,h))},999),f.getRuntime().shimExec.call(this,"FileReader","readAsBase64",g.uid)}};return c.FileReader=a}),a5(aH,[ad,aQ],function(c,b){function d(f,g){switch(g){case"readAsText":return b.atob(f,"utf8");case"readAsBinaryString":return b.atob(f);case"readAsDataURL":return f}return null}var a={read:function(j,g){var f,h=this.getRuntime();return(f=h.shimExec.call(this,"FileReaderSync","readAsBase64",g.uid))?("readAsDataURL"===j&&(f="data:"+(g.type||"")+";base64,"+f),d(f,j,g.type)):null}};return c.FileReaderSync=a}),a5(au,[ad,aT,aN,az,aF,av,ak],function(h,d,k,c,g,j,b){var f={send:function(p,n){function a(){p.transport=m.mode,m.shimExec.call(t,"XMLHttpRequest","send",p,n)}function w(l,i){m.shimExec.call(t,"XMLHttpRequest","appendBlob",l,i.uid),n=null,a()}function v(l,i){var r=new b;r.bind("TransportingComplete",function(){i(this.result)}),r.transport(l.getSource(),l.type,{ruid:m.uid})}var t=this,m=t.getRuntime();if(d.isEmptyObj(p.headers)||d.each(p.headers,function(l,i){m.shimExec.call(t,"XMLHttpRequest","setRequestHeader",i,l.toString())}),n instanceof j){var q;if(n.each(function(l,i){l instanceof k?q=i:m.shimExec.call(t,"XMLHttpRequest","append",i,l)}),n.hasBlob()){var o=n.getBlob();o.isDetached()?v(o,function(i){o.destroy(),w(q,i)}):w(q,o)}else{n=null,a()}}else{n instanceof k?n.isDetached()?v(n,function(i){n.destroy(),n=i.uid,a()}):(n=n.uid,a()):a()}},getResponse:function(l){var p,m,i=this.getRuntime();if(m=i.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(m=new c(i.uid,m),"blob"===l){return m}try{if(p=new g,~d.inArray(l,["","text"])){return p.readAsText(m)}if("json"===l&&window.JSON){return JSON.parse(p.readAsText(m))}}finally{m.destroy()}}return null},abort:function(i){var a=this.getRuntime();a.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return h.XMLHttpRequest=f}),a5(ab,[ad,aN],function(b,a){var c={getAsBlob:function(f){var g=this.getRuntime(),d=g.shimExec.call(this,"Transporter","getAsBlob",f);return d?new a(g.uid,d):null}};return b.Transporter=c}),a5(at,[ad,aT,ak,aN,aF],function(d,b,g,a,c){var f={loadFromBlob:function(l){function j(i){k.shimExec.call(h,"Image","loadFromBlob",i.uid),h=k=null}var h=this,k=h.getRuntime();if(l.isDetached()){var m=new g;m.bind("TransportingComplete",function(){j(m.result.getSource())}),m.transport(l.getSource(),l.type,{ruid:k.uid})}else{j(l.getSource())}},loadFromImage:function(i){var h=this.getRuntime();return h.shimExec.call(this,"Image","loadFromImage",i.uid)},getInfo:function(){var i=this.getRuntime(),h=i.shimExec.call(this,"Image","getInfo");return !h.meta||!h.meta.thumb||h.meta.thumb.data instanceof a||(h.meta.thumb.data=new a(i.uid,h.meta.thumb.data)),h},getAsBlob:function(j,h){var k=this.getRuntime(),i=k.shimExec.call(this,"Image","getAsBlob",j,h);return i?new a(k.uid,i):null},getAsDataURL:function(){var i=this.getRuntime(),h=i.Image.getAsBlob.apply(this,arguments),j;return h?(j=new c,j.readAsDataURL(h)):null}};return d.Image=f}),a5(am,[aT,bb,a6,a8,a1],function(g,k,d,f,b){function c(x){var C=!1,q=null,w,m,p,A,D,B=0;try{try{q=new ActiveXObject("AgControl.AgControl"),q.IsVersionSupported(x)&&(C=!0),q=null}catch(z){var v=navigator.plugins["Silverlight Plug-In"];if(v){for(w=v.description,"1.0.30226.2"===w&&(w="2.0.30226.2"),m=w.split(".");m.length>3;){m.pop()}for(;m.length<4;){m.push(0)}for(p=x.split(".");p.length>4;){p.pop()}do{A=parseInt(p[B],10),D=parseInt(m[B],10),B++}while(B<p.length&&A===D);D>=A&&!isNaN(A)&&(C=!0)}}}catch(y){C=!1}return C}function h(i){var m=this,e;i=g.extend({xap_url:k.xap_url},i),b.call(this,i,l,{access_binary:b.capTrue,access_image_binary:b.capTrue,display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:b.capTrue,resize_image:b.capTrue,return_response_headers:function(a){return a&&"client"===m.mode},return_response_type:function(a){return"json"!==a?!0:!!window.JSON},return_status_code:function(a){return"client"===m.mode||!g.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:b.capTrue,send_browser_cookies:function(a){return a&&"browser"===m.mode},send_custom_headers:function(a){return a&&"client"===m.mode},send_multipart:b.capTrue,slice_blob:b.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:b.capTrue,use_http_method:function(a){return"client"===m.mode||!g.arrayDiff(a,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"},return_status_code:function(a){return g.arrayDiff(a,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(a){return g.arrayDiff(a,["GET","POST"])?"client":["client","browser"]}}),c("2.0.31005.0")&&"Opera"!==k.browser||(this.mode=!1),g.extend(this,{getShim:function(){return d.get(this.uid).content.Moxie},shimExec:function(o,a){var p=[].slice.call(arguments,2);return m.getShim().exec(this.uid,o,a,p)},init:function(){var a;a=this.getShimContainer(),a.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+i.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+k.global_event_dispatcher+'"/></object>',e=setTimeout(function(){m&&!m.initialized&&m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},"Windows"!==k.OS?10000:5000)},destroy:function(a){return function(){a.call(m),clearTimeout(e),i=e=a=m=null}}(this.destroy)},j)}var l="silverlight",j={};return b.addConstructor(l,h),j}),a5(bd,[am,az,aT],function(c,b,d){var a={init:function(h){function f(k){for(var i="",l=0;l<k.length;l++){i+=(""!==i?"|":"")+k[l].title+" | *."+k[l].extensions.replace(/,/g,";*.")}return i}var g=this,j=this.getRuntime();this.bind("Change",function(){var i=j.shimExec.call(g,"FileInput","getFiles");g.files=[],d.each(i,function(k){g.files.push(new b(j.uid,k))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",f(h.accept),h.name,h.multiple),this.trigger("ready")}};return c.FileInput=a}),a5(af,[am,aT,ag],function(b,a,c){return b.Blob=a.extend({},c)}),a5(aa,[am,a6,ap],function(c,b,d){var a={init:function(){var h=this,f=h.getRuntime(),g;return g=f.getShimContainer(),d.addEvent(g,"dragover",function(i){i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="copy"},h.uid),d.addEvent(g,"dragenter",function(i){i.preventDefault();var j=b.get(f.uid).dragEnter(i);j&&i.stopPropagation()},h.uid),d.addEvent(g,"drop",function(i){i.preventDefault();var j=b.get(f.uid).dragDrop(i);j&&i.stopPropagation()},h.uid),f.shimExec.call(this,"FileDrop","init")}};return c.FileDrop=a}),a5(aJ,[am,aT,ac],function(b,a,c){return b.FileReader=a.extend({},c)}),a5(aO,[am,aT,aH],function(b,a,c){return b.FileReaderSync=a.extend({},c)}),a5(aL,[am,aT,au],function(b,a,c){return b.XMLHttpRequest=a.extend({},c)}),a5(aA,[am,aT,ab],function(b,a,c){return b.Transporter=a.extend({},c)}),a5(aG,[am,aT,aN,at],function(c,b,d,a){return c.Image=b.extend({},a,{getInfo:function(){var h=this.getRuntime(),f=["tiff","exif","gps","thumb"],g={meta:{}},j=h.shimExec.call(this,"Image","getInfo");return j.meta&&(b.each(f,function(p){var m=j.meta[p],q,l,k,o;if(m&&m.keys){for(g.meta[p]={},l=0,k=m.keys.length;k>l;l++){q=m.keys[l],o=m[q],o&&(/^(\d|[1-9]\d+)$/.test(o)?o=parseInt(o,10):/^\d*\.\d+$/.test(o)&&(o=parseFloat(o)),g.meta[p][q]=o)}}}),!g.meta||!g.meta.thumb||g.meta.thumb.data instanceof d||(g.meta.thumb.data=new d(h.uid,g.meta.thumb.data))),g.width=parseInt(j.width,10),g.height=parseInt(j.height,10),g.size=parseInt(j.size,10),g.type=j.type,g.name=j.name,g}})}),a5(aR,[aT,a8,a1,bb],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue;j.call(this,e,h,{access_binary:i(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:i(b.Image&&(c.can("create_canvas")||c.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:i(function(){return"Chrome"===c.browser&&c.verComp(c.version,28,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||"Safari"===c.browser&&c.verComp(c.version,7,">=")}()),resize_image:function(){return b.Image&&k.can("access_binary")&&c.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(l){return"json"===l&&window.JSON?!0:!!~g.inArray(l,["text","document",""])},return_status_code:function(l){return !g.arrayDiff(l,[200,404])},select_file:function(){return c.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return k.can("select_file")},summon_file_dialog:function(){return k.can("select_file")&&("Firefox"===c.browser&&c.verComp(c.version,4,">=")||"Opera"===c.browser&&c.verComp(c.version,12,">=")||"IE"===c.browser&&c.verComp(c.version,10,">=")||!!~g.inArray(c.browser,["Chrome","Safari"]))},upload_filesize:a,use_http_method:function(l){return !g.arrayDiff(l,["GET","POST"])}}),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(l){return function(){l.call(k),l=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html4",b={};return j.addConstructor(h,f),b}),a5(aI,[aR,az,aT,a6,ap,ba,bb],function(h,d,k,c,g,j,b){function f(){function l(){var v=this,n=v.getRuntime(),u,q,s,t,e,r;r=k.guid("uid_"),u=n.getShimContainer(),i&&(s=c.get(i+"_form"),s&&k.extend(s.style,{top:"100%"})),t=document.createElement("form"),t.setAttribute("id",r+"_form"),t.setAttribute("method","post"),t.setAttribute("enctype","multipart/form-data"),t.setAttribute("encoding","multipart/form-data"),k.extend(t.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),e=document.createElement("input"),e.setAttribute("id",r),e.setAttribute("type","file"),e.setAttribute("name",m.name||"Filedata"),e.setAttribute("accept",a.join(",")),k.extend(e.style,{fontSize:"999px",opacity:0}),t.appendChild(e),u.appendChild(t),k.extend(e.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===b.browser&&b.verComp(b.version,10,"<")&&k.extend(e.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),e.onchange=function(){var o;if(this.value){if(this.files){if(o=this.files[0],0===o.size){return void t.parentNode.removeChild(t)}}else{o={name:this.value}}o=new d(n.uid,o),this.onchange=function(){},l.call(v),v.files=[o],e.setAttribute("id",o.uid),t.setAttribute("id",o.uid+"_form"),v.trigger("change"),e=t=null}},n.can("summon_file_dialog")&&(q=c.get(m.browse_button),g.removeEvent(q,"click",v.uid),g.addEvent(q,"click",function(o){e&&!e.disabled&&e.click(),o.preventDefault()},v.uid)),i=r,u=s=q=null}var i,a=[],m;k.extend(this,{init:function(o){var q=this,e=q.getRuntime(),p;m=o,a=o.accept.mimes||j.extList2mimes(o.accept,e.can("filter_by_extension")),p=e.getShimContainer(),function(){var r,s,n;r=c.get(o.browse_button),e.can("summon_file_dialog")&&("static"===c.getStyle(r,"position")&&(r.style.position="relative"),s=parseInt(c.getStyle(r,"z-index"),10)||1,r.style.zIndex=s,p.style.zIndex=s-1),n=e.can("summon_file_dialog")?r:p,g.addEvent(n,"mouseover",function(){q.trigger("mouseenter")},q.uid),g.addEvent(n,"mouseout",function(){q.trigger("mouseleave")},q.uid),g.addEvent(n,"mousedown",function(){q.trigger("mousedown")},q.uid),g.addEvent(c.get(o.container),"mouseup",function(){q.trigger("mouseup")},q.uid),r=null}(),l.call(this),p=null,q.trigger({type:"ready",async:!0})},disable:function(o){var n;(n=c.get(i))&&(n.disabled=!!o)},destroy:function(){var p=this.getRuntime(),o=p.getShim(),q=p.getShimContainer();g.removeAllEvents(q,this.uid),g.removeAllEvents(m&&c.get(m.container),this.uid),g.removeAllEvents(m&&c.get(m.browse_button),this.uid),q&&(q.innerHTML=""),o.removeInstance(this.uid),i=a=m=q=o=null}})}return h.FileInput=f}),a5(aK,[aR,ay],function(b,a){return b.FileReader=a}),a5(aD,[aR,aT,a6,aP,a8,ap,aN,av],function(g,k,d,f,b,c,h,l){function j(){function m(y){var v=this,q,x,o,w,p=!1;if(a){if(q=a.id.replace(/_iframe$/,""),x=d.get(q+"_form")){for(o=x.getElementsByTagName("input"),w=o.length;w--;){switch(o[w].getAttribute("type")){case"hidden":o[w].parentNode.removeChild(o[w]);break;case"file":p=!0}}o=[],p||x.parentNode.removeChild(x),x=null}setTimeout(function(){c.removeEvent(a,"load",v.uid),a.parentNode&&a.parentNode.removeChild(a);var e=v.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=a=null,y()},1)}}var i,n,a;k.extend(this,{send:function(t,q){function s(){var v=o.getShimContainer()||document.body,p=document.createElement("div");p.innerHTML='<iframe id="'+r+'_iframe" name="'+r+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',a=p.firstChild,v.appendChild(a),c.addEvent(a,"load",function(){var y;try{y=a.contentWindow.document||a.contentDocument||window.frames[a.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(y.title)?i=y.title.replace(/^(\d+).*$/,"$1"):(i=200,n=k.trim(y.body.innerHTML),e.trigger({type:"progress",loaded:n.length,total:n.length}),u&&e.trigger({type:"uploadprogress",loaded:u.size||1025,total:u.size||1025}))}catch(w){if(!f.hasSameOrigin(t.url)){return void m.call(e,function(){e.trigger("error")})}i=404}m.call(e,function(){e.trigger("load")})},e.uid)}var e=this,o=e.getRuntime(),r,z,x,u;if(i=n=null,q instanceof l&&q.hasBlob()){if(u=q.getBlob(),r=u.uid,x=d.get(r),z=d.get(r+"_form"),!z){throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}}else{r=k.guid("uid_"),z=document.createElement("form"),z.setAttribute("id",r+"_form"),z.setAttribute("method",t.method),z.setAttribute("enctype","multipart/form-data"),z.setAttribute("encoding","multipart/form-data"),o.getShimContainer().appendChild(z)}z.setAttribute("target",r+"_iframe"),q instanceof l&&q.each(function(v,w){if(v instanceof h){x&&x.setAttribute("name",w)}else{var p=document.createElement("input");k.extend(p,{type:"hidden",name:w,value:v}),x?z.insertBefore(p,x):z.appendChild(p)}}),z.setAttribute("action",t.url),s(),z.submit(),e.trigger("loadstart")},getStatus:function(){return i},getResponse:function(o){if("json"===o&&"string"===k.typeOf(n)&&window.JSON){try{return JSON.parse(n.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(p){return null}}return n},abort:function(){var e=this;a&&a.contentWindow&&(a.contentWindow.stop?a.contentWindow.stop():a.contentWindow.document.execCommand?a.contentWindow.document.execCommand("Stop"):a.src="about:blank"),m.call(this,function(){e.dispatchEvent("abort")})}})}return g.XMLHttpRequest=j}),a5(bf,[aR,a4],function(b,a){return b.Image=a}),be([aT,bb,a2,ba,a6,a8,aY,a1,a7,aS,aQ,aN,az,bg,bc,aP,al,aF,av,aj,ak,ao,ap])}(this);(function(c){var a={},d=c.moxie.core.utils.Basic.inArray;return function b(h){var f,g;for(f in h){g=typeof h[f],g==="object"&&!~d(f,["Exceptions","Env","Mime"])?b(h[f]):g==="function"&&(a[f]=h[f])}}(c.moxie),a.Env=c.moxie.core.utils.Env,a.Mime=c.moxie.core.utils.Mime,a.Exceptions=c.moxie.core.Exceptions,c.mOxie=a,c.o||(c.o=a),a})(this);(function(f,b,h){function c(k){function j(p,n,o){var m={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};m[p]?l[m[p]]=n:o||(l[p]=n)}var i=k.required_features,l={};if(typeof i=="string"){g.each(i.split(/\s*,\s*/),function(m){j(m,!0)})}else{if(typeof i=="object"){g.each(i,function(n,m){j(m,n)})}else{if(i===!0){k.chunk_size>0&&(l.slice_blob=!0);if(k.resize.enabled||!k.multipart){l.send_binary_string=!0}g.each(k,function(n,m){j(m,!!n,!0)})}}}return l}var d=f.setTimeout,a={},g={VERSION:"2.1.9",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,getAll:function(j){var l=[],k;g.typeOf(j)!=="array"&&(j=[j]);var e=j.length;while(e--){k=g.get(j[e]),k&&l.push(k)}return l.length?l:null},get:b.get,each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(j){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},k=/[<>&\"\']/g;return j?(""+j).replace(k,function(l){return i[l]?"&"+i[l]+";":l}):j},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(j){var i,k;k=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(i=0;i<k.length;i+=2){j=j.replace(k[i],k[i+1])}return j=j.replace(/\s+/g,"_"),j=j.replace(/[^a-z0-9_\-\.]+/gi,""),j},buildUrl:function(j,i){var k="";return g.each(i,function(m,l){k+=(k?"&":"")+encodeURIComponent(l)+"="+encodeURIComponent(m)}),k&&(j+=(j.indexOf("?")>0?"&":"?")+k),j},formatSize:function(k){function i(m,l){return Math.round(m*Math.pow(10,l))/Math.pow(10,l)}if(k===h||/\D/.test(k)){return g.translate("N/A")}var j=Math.pow(1024,4);return k>j?i(k/j,1)+" "+g.translate("tb"):k>(j/=1024)?i(k/j,1)+" "+g.translate("gb"):k>(j/=1024)?i(k/j,1)+" "+g.translate("mb"):k>1024?Math.round(k/1024)+" "+g.translate("kb"):k+" "+g.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(l,m){var k,j;return k=new g.Uploader(l),j=b.Runtime.thatCan(k.getOption().required_features,m||l.runtimes),k.destroy(),j},addFileFilter:function(j,i){a[j]=i}};g.addFileFilter("mime_types",function(j,i,k){j.length&&!j.regexp.test(i.name)?(this.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:i}),k(!1)):k(!0)}),g.addFileFilter("max_file_size",function(k,i,l){var j;k=g.parseSize(k),i.size!==j&&k&&i.size>k?(this.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:i}),l(!1)):l(!0)}),g.addFileFilter("prevent_duplicates",function(k,i,l){if(k){var j=this.files.length;while(j--){if(i.name===this.files[j].name&&i.size===this.files[j].size){this.trigger("Error",{code:g.FILE_DUPLICATE_ERROR,message:g.translate("Duplicate file error."),file:i}),l(!1);return}}}l(!0)}),g.Uploader=function(X){function V(){var l,k=0,m;if(this.state==g.STARTED){for(m=0;m<W.length;m++){!l&&W[m].status==g.QUEUED?(l=W[m],this.trigger("BeforeUpload",l)&&(l.status=g.UPLOADING,this.trigger("UploadFile",l))):k++}k==W.length&&(this.state!==g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",W))}}function s(k){k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):100,aa()}function aa(){var l,k;Y.reset();for(l=0;l<W.length;l++){k=W[l],k.size!==h?(Y.size+=k.origSize,Y.loaded+=k.loaded*k.origSize/k.size):Y.size=h,k.status==g.DONE?Y.uploaded++:k.status==g.FAILED?Y.failed++:Y.queued++}Y.size===h?Y.percent=W.length>0?Math.ceil(Y.uploaded/W.length*100):0:(Y.bytesPerSec=Math.ceil(Y.loaded/((+(new Date)-J||1)/1000)),Y.percent=Y.size>0?Math.ceil(Y.loaded/Y.size*100):0)}function z(){var k=Z[0]||U[0];return k?k.getRuntime().uid:!1}function G(l,m){if(l.ruid){var k=b.Runtime.getInfo(l.ruid);if(k){return k.can(m)}}return !1}function j(){this.bind("FilesAdded FilesRemoved",function(k){k.trigger("QueueChanged"),k.refresh()}),this.bind("CancelUpload",n),this.bind("BeforeUpload",I),this.bind("UploadFile",R),this.bind("UploadProgress",r),this.bind("StateChanged",K),this.bind("QueueChanged",aa),this.bind("Error",ac),this.bind("FileUploaded",q),this.bind("Destroy",H)}function t(v,w){var p=this,l=0,m=[],k={runtime_order:v.runtimes,required_caps:v.required_features,preferred_caps:Q,swf_url:v.flash_swf_url,xap_url:v.silverlight_xap_url};g.each(v.runtimes.split(/\s*,\s*/),function(e){v[e]&&(k[e]=v[e])}),v.browse_button&&g.each(v.browse_button,function(e){m.push(function(x){var u=new b.FileInput(g.extend({},k,{accept:v.filters.mime_types,name:v.file_data_name,multiple:v.multi_selection,container:v.container,browse_button:e}));u.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),multi_selection:y.can("select_multiple")}),l++,Z.push(this),x()},u.onchange=function(){p.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(y){B||(v.browse_button_hover&&("mouseenter"===y.type?b.addClass(e,v.browse_button_hover):"mouseleave"===y.type&&b.removeClass(e,v.browse_button_hover)),v.browse_button_active&&("mousedown"===y.type?b.addClass(e,v.browse_button_active):"mouseup"===y.type&&b.removeClass(e,v.browse_button_active)))}),u.bind("mousedown",function(){p.trigger("Browse")}),u.bind("error runtimeerror",function(){u=null,x()}),u.init()})}),v.drop_element&&g.each(v.drop_element,function(u){m.push(function(x){var e=new b.FileDrop(g.extend({},k,{drop_zone:u}));e.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),dragdrop:y.can("drag_and_drop")}),l++,U.push(this),x()},e.ondrop=function(){p.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,x()}),e.init()})}),b.inSeries(m,function(){typeof w=="function"&&w(l)})}function i(p,m,k){var l=new b.Image;try{l.onload=function(){if(m.width>this.width&&m.height>this.height&&m.quality===h&&m.preserve_headers&&!m.crop){return this.destroy(),k(p)}l.downsize(m.width,m.height,m.crop,m.preserve_headers)},l.onresize=function(){k(this.getAsBlob(p.type,m.quality)),this.destroy()},l.onerror=function(){k(p)},l.load(p)}catch(u){k(p)}}function o(v,w,m){function p(y,u,A){var x=ab[y];switch(y){case"max_file_size":y==="max_file_size"&&(ab.max_file_size=ab.filters.max_file_size=u);break;case"chunk_size":if(u=g.parseSize(u)){ab[y]=u,ab.send_file_name=!0}break;case"multipart":ab[y]=u,u||(ab.send_file_name=!0);break;case"unique_names":ab[y]=u,u&&(ab.send_file_name=!0);break;case"filters":g.typeOf(u)==="array"&&(u={mime_types:u}),A?g.extend(ab.filters,u):ab.filters=u,u.mime_types&&(ab.filters.mime_types.regexp=function(D){var C=[];return g.each(D,function(E){g.each(E.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?C.push("\\.*"):C.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+C.join("|")+")$","i")}(ab.filters.mime_types));break;case"resize":A?g.extend(ab.resize,u,{enabled:!0}):ab.resize=u;break;case"prevent_duplicates":ab.prevent_duplicates=ab.filters.prevent_duplicates=!!u;break;case"container":case"browse_button":case"drop_element":u="container"===y?g.get(u):g.getAll(u);case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":ab[y]=u,A||(k=!0);break;default:ab[y]=u}A||l.trigger("OptionChanged",y,u,x)}var l=this,k=!1;typeof v=="object"?g.each(v,function(x,u){p(u,x,m)}):p(v,w,m),m?(ab.required_features=c(g.extend({},ab)),Q=c(g.extend({},ab,{required_features:!0}))):k&&(l.trigger("Destroy"),t.call(l,ab,function(u){u?(l.runtime=b.Runtime.getInfo(z()).type,l.trigger("Init",{runtime:l.runtime}),l.trigger("PostInit")):l.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}))}function I(m,k){if(m.settings.unique_names){var p=k.name.match(/\.([^.]+)$/),l="part";p&&(l=p[1]),k.target_name=k.id+"."+l}}function R(x,l){function v(){C-->0?d(k,1000):(l.loaded=w,x.trigger("Error",{code:g.HTTP_ERROR,message:g.translate("HTTP Error."),file:l,response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()}))}function k(){var u,e,p={},E;if(l.status!==g.UPLOADING||x.state===g.STOPPED){return}x.settings.send_file_name&&(p.name=l.target_name||l.name),D&&A.chunks&&y.size>D?(E=Math.min(D,y.size-w),u=y.slice(w,w+E)):(E=y.size,u=y),D&&A.chunks&&(x.settings.send_chunk_number?(p.chunk=Math.ceil(w/D),p.chunks=Math.ceil(y.size/D)):(p.offset=w,p.total=y.size)),P=new b.XMLHttpRequest,P.upload&&(P.upload.onprogress=function(L){l.loaded=Math.min(l.size,w+L.loaded),x.trigger("UploadProgress",l)}),P.onload=function(){if(P.status>=400){v();return}C=x.settings.max_retries,E<y.size?(u.destroy(),w+=E,l.loaded=Math.min(w,y.size),x.trigger("ChunkUploaded",l,{offset:l.loaded,total:y.size,response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&x.trigger("UploadProgress",l)):l.loaded=l.size,u=e=null,!w||w>=y.size?(l.size!=l.origSize&&(y.destroy(),y=null),x.trigger("UploadProgress",l),l.status=g.DONE,x.trigger("FileUploaded",l,{response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()})):d(k,1)},P.onerror=function(){v()},P.onloadend=function(){this.destroy(),P=null},x.settings.multipart&&A.multipart?(P.open("post",m,!0),g.each(x.settings.headers,function(M,L){P.setRequestHeader(L,M)}),e=new b.FormData,g.each(g.extend(p,x.settings.multipart_params),function(M,L){e.append(L,M)}),e.append(x.settings.file_data_name,u),P.send(e,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:Q,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url})):(m=g.buildUrl(x.settings.url,g.extend(p,x.settings.multipart_params)),P.open("post",m,!0),P.setRequestHeader("Content-Type","application/octet-stream"),g.each(x.settings.headers,function(M,L){P.setRequestHeader(L,M)}),P.send(u,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:Q,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url}))}var m=x.settings.url,D=x.settings.chunk_size,C=x.settings.max_retries,A=x.features,w=0,y;l.loaded&&(w=l.loaded=D?D*Math.floor(l.loaded/D):0),y=l.getSource(),x.settings.resize.enabled&&G(y,"send_binary_string")&&!!~b.inArray(y.type,["image/jpeg","image/png"])?i.call(this,y,x.settings.resize,function(p){y=p,l.size=p.size,k()}):k()}function r(l,k){s(k)}function K(l){if(l.state==g.STARTED){J=+(new Date)}else{if(l.state==g.STOPPED){for(var k=l.files.length-1;k>=0;k--){l.files[k].status==g.UPLOADING&&(l.files[k].status=g.QUEUED,aa())}}}}function n(){P&&P.abort()}function q(k){aa(),d(function(){V.call(k)},1)}function ac(l,k){k.code===g.INIT_ERROR?l.destroy():k.code===g.HTTP_ERROR&&(k.file.status=g.FAILED,s(k.file),l.state==g.STARTED&&(l.trigger("CancelUpload"),d(function(){V.call(l)},1)))}function H(k){k.stop(),g.each(W,function(l){l.destroy()}),W=[],Z.length&&(g.each(Z,function(l){l.destroy()}),Z=[]),U.length&&(g.each(U,function(l){l.destroy()}),U=[]),Q={},B=!1,J=P=null,Y.reset()}var F=g.guid(),ab,W=[],Q={},Z=[],U=[],J,Y,B=!1,P;ab={runtimes:b.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},o.call(this,X,null,!0),Y=new g.QueueProgress,g.extend(this,{id:F,uid:F,state:g.STOPPED,features:{},runtime:null,files:W,settings:ab,total:Y,init:function(){var m=this,p,l,k;l=m.getOption("preinit"),typeof l=="function"?l(m):g.each(l,function(e,u){m.bind(u,e)}),j.call(m),g.each(["container","browse_button","drop_element"],function(e){if(m.getOption(e)===null){return k={code:g.INIT_ERROR,message:g.translate("'%' specified, but cannot be found.")},!1}});if(k){return m.trigger("Error",k)}if(!ab.browse_button&&!ab.drop_element){return m.trigger("Error",{code:g.INIT_ERROR,message:g.translate("You must specify either 'browse_button' or 'drop_element'.")})}t.call(m,ab,function(u){var e=m.getOption("init");typeof e=="function"?e(m):g.each(e,function(v,w){m.bind(w,v)}),u?(m.runtime=b.Runtime.getInfo(z()).type,m.trigger("Init",{runtime:m.runtime}),m.trigger("PostInit")):m.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})})},setOption:function(l,k){o.call(this,l,k,!this.runtime)},getOption:function(k){return k?ab[k]:ab},refresh:function(){Z.length&&g.each(Z,function(k){k.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),V.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){B=arguments[0]!==h?arguments[0]:!0,Z.length&&g.each(Z,function(k){k.disable(B)}),this.trigger("DisableBrowse",B)},getFile:function(l){var k;for(k=W.length-1;k>=0;k--){if(W[k].id===l){return W[k]}}},addFile:function(x,A){function y(u,C){var l=[];b.each(v.settings.filters,function(e,D){a[D]&&l.push(function(E){a[D].call(v,e,u,function(L){E(!L)})})}),b.inSeries(l,C)}function w(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!k){return !1}u.ruid=k,u.connectRuntime(k)}w(new g.File(u))}else{u instanceof b.Blob?(w(u.getSource()),u.destroy()):u instanceof g.File?(A&&(u.name=A),p.push(function(e){y(u,function(C){C||(W.push(u),m.push(u),v.trigger("FileFiltered",u)),d(e,1)})})):b.inArray(l,["file","blob"])!==-1?w(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,w):l==="array"&&(A=null,b.each(u,w))}}var v=this,p=[],m=[],k;k=z(),w(x),p.length&&b.inSeries(p,function(){m.length&&v.trigger("FilesAdded",m)})},removeFile:function(l){var k=typeof l=="string"?l:l.id;for(var m=W.length-1;m>=0;m--){if(W[m].id===k){return this.splice(m,1)[0]}}},splice:function(p,l){var m=W.splice(p===h?0:p,l===h?W.length:l),k=!1;return this.state==g.STARTED&&(g.each(m,function(u){if(u.status===g.UPLOADING){return k=!0,!1}}),k&&this.stop()),this.trigger("FilesRemoved",m),g.each(m,function(u){u.destroy()}),k&&this.start(),m},dispatchEvent:function(p){var l,u,m;p=p.toLowerCase(),l=this.hasEventListener(p);if(l){l.sort(function(w,v){return v.priority-w.priority}),u=[].slice.call(arguments),u.shift(),u.unshift(this);for(var k=0;k<l.length;k++){if(l[k].fn.apply(l[k].scope,u)===!1){return !1}}}return !0},bind:function(m,k,p,l){g.Uploader.prototype.bind.call(this,m,k,l,p)},destroy:function(){this.trigger("Destroy"),ab=Y=null,this.unbindAll()}})},g.Uploader.prototype=b.EventTarget.instance,g.File=function(){function j(e){g.extend(this,{id:g.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:g.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var k=this.getSource().getSource();return b.inArray(b.typeOf(k),["blob","file"])!==-1?k:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var k=this.getSource();k&&(k.destroy(),delete i[this.id])}}),i[this.id]=e}var i={};return j}(),g.QueueProgress=function(){var i=this;i.size=0,i.loaded=0,i.uploaded=0,i.failed=0,i.queued=0,i.percent=0,i.bytesPerSec=0,i.reset=function(){i.size=i.loaded=i.uploaded=i.failed=i.queued=i.percent=i.bytesPerSec=0}},f.plupload=g})(window,mOxie);
plupload.addI18n({"Select files":"选择文件","Add files to the upload queue and click the start button.":"把文件加入上传序列，然后点击开始按钮",Filename:"文件名",Status:"状态",Size:"大小","Add Files":"添加文件","Stop Upload":"停止上传","Start Upload":"开始上传","Add files":"添加文件","Add files.":"添加文件","Stop current upload":"停止现在的上传","Start uploading queue":"开始上传序列","Stop upload":"停止上传","Start upload":"开始上传","Uploaded %d/%d files":"上传了 %d/%d 文件","N/A":"N/A","Drag files here.":"把文件拖放到这里","File extension error.":"文件扩展名错误","File size error.":"文件大小错误","File count error.":"文件数量错误","Init error.":"初始化错误","HTTP Error.":"HTTP错误","Security error.":"安全性错误","Generic error.":"其他错误","IO error.":"IO错误","File: %s":"文件: %s",Close:"关闭","%d files queued":"%d 个文件加入序列","Using runtime: ":"使用的上传工具: ","File: %f, size: %s, max file size: %m":"文件: %f, 大小: %s, 最大文件尺寸: %m","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"上传元素只能访问 %d 个文件。其余的文件将会被忽略。","Upload URL might be wrong or doesn't exist":"上传地址错误或者不存在","Error: File too large: ":"错误: 文件太大: ","Error: Invalid file extension: ":"错误: 非法的文件扩展名: "});
var Handlebars={};(function(d,c){d.VERSION="1.0.0";d.COMPILER_REVISION=4;d.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};d.helpers={};d.partials={};var n=Object.prototype.toString,b="[object Function]",h="[object Object]";d.registerHelper=function(l,u,i){if(n.call(l)===h){if(i||u){throw new d.Exception("Arg not supported with multiple helpers")}d.Utils.extend(this.helpers,l)}else{if(i){u.not=i}this.helpers[l]=u}};d.registerPartial=function(i,l){if(n.call(i)===h){d.Utils.extend(this.partials,i)}else{this.partials[i]=l}};d.registerHelper("helperMissing",function(i){if(arguments.length===2){return c}else{throw new Error("Missing helper: '"+i+"'")}});d.registerHelper("blockHelperMissing",function(u,l){var i=l.inverse||function(){},w=l.fn;var v=n.call(u);if(v===b){u=u.call(this)}if(u===true){return w(this)}else{if(u===false||u==null){return i(this)}else{if(v==="[object Array]"){if(u.length>0){return d.helpers.each(u,l)}else{return i(this)}}else{return w(u)}}}});d.K=function(){};d.createFrame=Object.create||function(i){d.K.prototype=i;var l=new d.K();d.K.prototype=null;return l};d.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(u,i){if(d.logger.level<=u){var l=d.logger.methodMap[u];if(typeof console!=="undefined"&&console[l]){console[l].call(console,i)}}}};d.log=function(l,i){d.logger.log(l,i)};d.registerHelper("each",function(l,C){var A=C.fn,v=C.inverse;var x=0,y="",w;var z=n.call(l);if(z===b){l=l.call(this)}if(C.data){w=d.createFrame(C.data)}if(l&&typeof l==="object"){if(l instanceof Array){for(var u=l.length;x<u;x++){if(w){w.index=x}y=y+A(l[x],{data:w})}}else{for(var B in l){if(l.hasOwnProperty(B)){if(w){w.key=B}y=y+A(l[B],{data:w});x++}}}}if(x===0){y=v(this)}return y});d.registerHelper("if",function(l,i){var u=n.call(l);if(u===b){l=l.call(this)}if(!l||d.Utils.isEmpty(l)){return i.inverse(this)}else{return i.fn(this)}});d.registerHelper("unless",function(l,i){return d.helpers["if"].call(this,l,{fn:i.inverse,inverse:i.fn})});d.registerHelper("with",function(l,i){var u=n.call(l);if(u===b){l=l.call(this)}if(!d.Utils.isEmpty(l)){return i.fn(l)}});d.registerHelper("log",function(l,i){var u=i.data&&i.data.level!=null?parseInt(i.data.level,10):1;d.log(u,l)});var r=(function(){var y={trace:function u(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function l(z,C,D,G,F,B,E){var A=B.length-1;switch(F){case 1:return B[A-1];break;case 2:this.$=new G.ProgramNode([],B[A]);break;case 3:this.$=new G.ProgramNode(B[A-2],B[A]);break;case 4:this.$=new G.ProgramNode(B[A-1],[]);break;case 5:this.$=new G.ProgramNode(B[A]);break;case 6:this.$=new G.ProgramNode([],[]);break;case 7:this.$=new G.ProgramNode([]);break;case 8:this.$=[B[A]];break;case 9:B[A-1].push(B[A]);this.$=B[A-1];break;case 10:this.$=new G.BlockNode(B[A-2],B[A-1].inverse,B[A-1],B[A]);break;case 11:this.$=new G.BlockNode(B[A-2],B[A-1],B[A-1].inverse,B[A]);break;case 12:this.$=B[A];break;case 13:this.$=B[A];break;case 14:this.$=new G.ContentNode(B[A]);break;case 15:this.$=new G.CommentNode(B[A]);break;case 16:this.$=new G.MustacheNode(B[A-1][0],B[A-1][1]);break;case 17:this.$=new G.MustacheNode(B[A-1][0],B[A-1][1]);break;case 18:this.$=B[A-1];break;case 19:this.$=new G.MustacheNode(B[A-1][0],B[A-1][1],B[A-2][2]==="&");break;case 20:this.$=new G.MustacheNode(B[A-1][0],B[A-1][1],true);break;case 21:this.$=new G.PartialNode(B[A-1]);break;case 22:this.$=new G.PartialNode(B[A-2],B[A-1]);break;case 23:break;case 24:this.$=[[B[A-2]].concat(B[A-1]),B[A]];break;case 25:this.$=[[B[A-1]].concat(B[A]),null];break;case 26:this.$=[[B[A-1]],B[A]];break;case 27:this.$=[[B[A]],null];break;case 28:this.$=[[B[A]],null];break;case 29:B[A-1].push(B[A]);this.$=B[A-1];break;case 30:this.$=[B[A]];break;case 31:this.$=B[A];break;case 32:this.$=new G.StringNode(B[A]);break;case 33:this.$=new G.IntegerNode(B[A]);break;case 34:this.$=new G.BooleanNode(B[A]);break;case 35:this.$=B[A];break;case 36:this.$=new G.HashNode(B[A]);break;case 37:B[A-1].push(B[A]);this.$=B[A-1];break;case 38:this.$=[B[A]];break;case 39:this.$=[B[A-2],B[A]];break;case 40:this.$=[B[A-2],new G.StringNode(B[A])];break;case 41:this.$=[B[A-2],new G.IntegerNode(B[A])];break;case 42:this.$=[B[A-2],new G.BooleanNode(B[A])];break;case 43:this.$=[B[A-2],B[A]];break;case 44:this.$=new G.PartialNameNode(B[A]);break;case 45:this.$=new G.PartialNameNode(new G.StringNode(B[A]));break;case 46:this.$=new G.PartialNameNode(new G.IntegerNode(B[A]));break;case 47:this.$=new G.DataNode(B[A]);break;case 48:this.$=new G.IdNode(B[A]);break;case 49:B[A-2].push({part:B[A],separator:B[A-1]});this.$=B[A-2];break;case 50:this.$=[{part:B[A]}];break}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function v(A,z){throw new Error(A)},parse:function x(I){var P=this,F=[0],Y=[null],K=[],Z=this.table,A="",J=0,W=0,C=0,H=2,M=1;this.lexer.setInput(I);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var B=this.lexer.yylloc;K.push(B);var D=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function O(ab){F.length=F.length-2*ab;Y.length=Y.length-ab;K.length=K.length-ab}function N(){var ab;ab=P.lexer.lex()||1;if(typeof ab!=="number"){ab=P.symbols_[ab]||ab}return ab}var V,R,E,U,aa,L,T={},Q,X,z,G;while(true){E=F[F.length-1];if(this.defaultActions[E]){U=this.defaultActions[E]}else{if(V===null||typeof V=="undefined"){V=N()}U=Z[E]&&Z[E][V]}if(typeof U==="undefined"||!U.length||!U[0]){var S="";if(!C){G=[];for(Q in Z[E]){if(this.terminals_[Q]&&Q>2){G.push("'"+this.terminals_[Q]+"'")}}if(this.lexer.showPosition){S="Parse error on line "+(J+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+G.join(", ")+", got '"+(this.terminals_[V]||V)+"'"}else{S="Parse error on line "+(J+1)+": Unexpected "+(V==1?"end of input":"'"+(this.terminals_[V]||V)+"'")}this.parseError(S,{text:this.lexer.match,token:this.terminals_[V]||V,line:this.lexer.yylineno,loc:B,expected:G})}}if(U[0] instanceof Array&&U.length>1){throw new Error("Parse Error: multiple actions possible at state: "+E+", token: "+V)}switch(U[0]){case 1:F.push(V);Y.push(this.lexer.yytext);K.push(this.lexer.yylloc);F.push(U[1]);V=null;if(!R){W=this.lexer.yyleng;A=this.lexer.yytext;J=this.lexer.yylineno;B=this.lexer.yylloc;if(C>0){C--}}else{V=R;R=null}break;case 2:X=this.productions_[U[1]][1];T.$=Y[Y.length-X];T._$={first_line:K[K.length-(X||1)].first_line,last_line:K[K.length-1].last_line,first_column:K[K.length-(X||1)].first_column,last_column:K[K.length-1].last_column};if(D){T._$.range=[K[K.length-(X||1)].range[0],K[K.length-1].range[1]]}L=this.performAction.call(T,A,W,J,this.yy,U[1],Y,K);if(typeof L!=="undefined"){return L}if(X){F=F.slice(0,-1*X*2);Y=Y.slice(0,-1*X);K=K.slice(0,-1*X)}F.push(this.productions_[U[1]][0]);Y.push(T.$);K.push(T._$);z=Z[F[F.length-2]][F[F.length-1]];F.push(z);break;case 3:return true}}return true}};var i=(function(){var C=({EOF:1,parseError:function E(H,G){if(this.yy.parser){this.yy.parser.parseError(H,G)}else{throw new Error(H)}},setInput:function(G){this._input=G;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var H=this._input[0];this.yytext+=H;this.yyleng++;this.offset++;this.match+=H;this.matched+=H;var G=H.match(/(?:\r\n?|\n).*/g);if(G){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return H},unput:function(I){var G=I.length;var H=I.split(/(?:\r\n?|\n)/g);this._input=I+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-G-1);this.offset-=G;var K=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(H.length-1){this.yylineno-=H.length-1}var J=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:H?(H.length===K.length?this.yylloc.first_column:0)+K[K.length-H.length].length-H[0].length:this.yylloc.first_column-G};if(this.options.ranges){this.yylloc.range=[J[0],J[0]+this.yyleng-G]}return this},more:function(){this._more=true;return this},less:function(G){this.unput(this.match.slice(G))},pastInput:function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var G=this.match;if(G.length<20){G+=this._input.substr(0,20-G.length)}return(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var G=this.pastInput();var H=new Array(G.length+1).join("-");return G+this.upcomingInput()+"\n"+H+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var M,K,H,J,I,G;if(!this._more){this.yytext="";this.match=""}var N=this._currentRules();for(var L=0;L<N.length;L++){H=this._input.match(this.rules[N[L]]);if(H&&(!K||H[0].length>K[0].length)){K=H;J=L;if(!this.options.flex){break}}}if(K){G=K[0].match(/(?:\r\n?|\n).*/g);if(G){this.yylineno+=G.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:G?G[G.length-1].length-G[G.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+K[0].length};this.yytext+=K[0];this.match+=K[0];this.matches=K;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(K[0].length);this.matched+=K[0];M=this.performAction.call(this,this.yy,this,N[J],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(M){return M}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function z(){var G=this.next();if(typeof G!=="undefined"){return G}else{return this.lex()}},begin:function A(G){this.conditionStack.push(G)},popState:function F(){return this.conditionStack.pop()},_currentRules:function D(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function A(G){this.begin(G)}});C.options={};C.performAction=function B(K,H,J,G){var I=G;switch(J){case 0:H.yytext="\\";return 14;break;case 1:if(H.yytext.slice(-1)!=="\\"){this.begin("mu")}if(H.yytext.slice(-1)==="\\"){H.yytext=H.yytext.substr(0,H.yyleng-1),this.begin("emu")}if(H.yytext){return 14}break;case 2:return 14;break;case 3:if(H.yytext.slice(-1)!=="\\"){this.popState()}if(H.yytext.slice(-1)==="\\"){H.yytext=H.yytext.substr(0,H.yyleng-1)}return 14;break;case 4:H.yytext=H.yytext.substr(0,H.yyleng-4);this.popState();return 15;break;case 5:return 25;break;case 6:return 16;break;case 7:return 20;break;case 8:return 19;break;case 9:return 19;break;case 10:return 23;break;case 11:return 22;break;case 12:this.popState();this.begin("com");break;case 13:H.yytext=H.yytext.substr(3,H.yyleng-5);this.popState();return 15;break;case 14:return 22;break;case 15:return 37;break;case 16:return 36;break;case 17:return 36;break;case 18:return 40;break;case 19:break;case 20:this.popState();return 24;break;case 21:this.popState();return 18;break;case 22:H.yytext=H.yytext.substr(1,H.yyleng-2).replace(/\\"/g,'"');return 31;break;case 23:H.yytext=H.yytext.substr(1,H.yyleng-2).replace(/\\'/g,"'");return 31;break;case 24:return 38;break;case 25:return 33;break;case 26:return 33;break;case 27:return 32;break;case 28:return 36;break;case 29:H.yytext=H.yytext.substr(1,H.yyleng-2);return 36;break;case 30:return"INVALID";break;case 31:return 5;break}};C.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];C.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:false},emu:{rules:[3],inclusive:false},com:{rules:[4],inclusive:false},INITIAL:{rules:[0,1,2,31],inclusive:true}};return C})();y.lexer=i;function w(){this.yy={}}w.prototype=y;y.Parser=w;return new w})();d.Parser=r;d.parse=function(i){if(i.constructor===d.AST.ProgramNode){return i}d.Parser.yy=d.AST;return d.Parser.parse(i)};d.AST={};d.AST.ProgramNode=function(l,i){this.type="program";this.statements=l;if(i){this.inverse=new d.AST.ProgramNode(i)}};d.AST.MustacheNode=function(x,u,l){this.type="mustache";this.escaped=!l;this.hash=u;var w=this.id=x[0];var v=this.params=x.slice(1);var i=this.eligibleHelper=w.isSimple;this.isHelper=i&&(v.length||u)};d.AST.PartialNode=function(i,l){this.type="partial";this.partialName=i;this.context=l};d.AST.BlockNode=function(u,l,i,w){var v=function(x,y){if(x.original!==y.original){throw new d.Exception(x.original+" doesn't match "+y.original)}};v(u.id,w);this.type="block";this.mustache=u;this.program=l;this.inverse=i;if(this.inverse&&!this.program){this.isInverse=true}};d.AST.ContentNode=function(i){this.type="content";this.string=i};d.AST.HashNode=function(i){this.type="hash";this.pairs=i};d.AST.IdNode=function(z){this.type="ID";var y="",w=[],A=0;for(var x=0,u=z.length;x<u;x++){var v=z[x].part;y+=(z[x].separator||"")+v;if(v===".."||v==="."||v==="this"){if(w.length>0){throw new d.Exception("Invalid path: "+y)}else{if(v===".."){A++}else{this.isScoped=true}}}else{w.push(v)}}this.original=y;this.parts=w;this.string=w.join(".");this.depth=A;this.isSimple=z.length===1&&!this.isScoped&&A===0;this.stringModeValue=this.string};d.AST.PartialNameNode=function(i){this.type="PARTIAL_NAME";this.name=i.original};d.AST.DataNode=function(i){this.type="DATA";this.id=i};d.AST.StringNode=function(i){this.type="STRING";this.original=this.string=this.stringModeValue=i};d.AST.IntegerNode=function(i){this.type="INTEGER";this.original=this.integer=i;this.stringModeValue=Number(i)};d.AST.BooleanNode=function(i){this.type="BOOLEAN";this.bool=i;this.stringModeValue=i==="true"};d.AST.CommentNode=function(i){this.type="comment";this.comment=i};var q=["description","fileName","lineNumber","message","name","number","stack"];d.Exception=function(u){var l=Error.prototype.constructor.apply(this,arguments);for(var i=0;i<q.length;i++){this[q[i]]=l[q[i]]}};d.Exception.prototype=new Error();d.SafeString=function(i){this.string=i};d.SafeString.prototype.toString=function(){return this.string.toString()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var e=/[&<>"'`]/g;var p=/[&<>"'`]/;var t=function(i){return k[i]||"&amp;"};d.Utils={extend:function(u,l){for(var i in l){if(l.hasOwnProperty(i)){u[i]=l[i]}}},escapeExpression:function(i){if(i instanceof d.SafeString){return i.toString()}else{if(i==null||i===false){return""}}if(!p.test(i)){return i}return i.replace(e,t)},isEmpty:function(i){if(!i&&i!==0){return true}else{if(n.call(i)==="[object Array]"&&i.length===0){return true}else{return false}}}};var j=d.Compiler=function(){};var g=d.JavaScriptCompiler=function(){};j.prototype={compiler:j,disassemble:function(){var z=this.opcodes,y,w=[],B,A;for(var x=0,u=z.length;x<u;x++){y=z[x];if(y.opcode==="DECLARE"){w.push("DECLARE "+y.name+"="+y.value)}else{B=[];for(var v=0;v<y.args.length;v++){A=y.args[v];if(typeof A==="string"){A='"'+A.replace("\n","\\n")+'"'}B.push(A)}w.push(y.opcode+" "+B.join(" "))}}return w.join("\n")},equals:function(u){var l=this.opcodes.length;if(u.opcodes.length!==l){return false}for(var x=0;x<l;x++){var y=this.opcodes[x],v=u.opcodes[x];if(y.opcode!==v.opcode||y.args.length!==v.args.length){return false}for(var w=0;w<y.args.length;w++){if(y.args[w]!==v.args[w]){return false}}}l=this.children.length;if(u.children.length!==l){return false}for(x=0;x<l;x++){if(!this.children[x].equals(u.children[x])){return false}}return true},guid:0,compile:function(i,u){this.children=[];this.depths={list:[]};this.options=u;var v=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(v){for(var l in v){this.options.knownHelpers[l]=v[l]}}return this.program(i)},accept:function(i){return this[i.type](i)},program:function(w){var v=w.statements,y;this.opcodes=[];for(var x=0,u=v.length;x<u;x++){y=v[x];this[y.type](y)}this.isSimple=u===1;this.depths.list=this.depths.list.sort(function(l,i){return l-i});return this},compileProgram:function(w){var u=new this.compiler().compile(w,this.options);var x=this.guid++,z;this.usePartial=this.usePartial||u.usePartial;this.children[x]=u;for(var y=0,v=u.depths.list.length;y<v;y++){z=u.depths.list[y];if(z<2){continue}else{this.addDepth(z-1)}}return x},block:function(w){var v=w.mustache,l=w.program,i=w.inverse;if(l){l=this.compileProgram(l)}if(i){i=this.compileProgram(i)}var u=this.classifyMustache(v);if(u==="helper"){this.helperMustache(v,l,i)}else{if(u==="simple"){this.simpleMustache(v);this.opcode("pushProgram",l);this.opcode("pushProgram",i);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousMustache(v,l,i);this.opcode("pushProgram",l);this.opcode("pushProgram",i);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(x){var w=x.pairs,z,y;this.opcode("pushHash");for(var v=0,u=w.length;v<u;v++){z=w[v];y=z[1];if(this.options.stringParams){if(y.depth){this.addDepth(y.depth)}this.opcode("getContext",y.depth||0);this.opcode("pushStringParam",y.stringModeValue,y.type)}else{this.accept(y)}this.opcode("assignToHash",z[0])}this.opcode("popHash")},partial:function(i){var l=i.partialName;this.usePartial=true;if(i.context){this.ID(i.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",l.name);this.opcode("append")},content:function(i){this.opcode("appendContent",i.string)},mustache:function(u){var i=this.options;var l=this.classifyMustache(u);if(l==="simple"){this.simpleMustache(u)}else{if(l==="helper"){this.helperMustache(u)}else{this.ambiguousMustache(u)}}if(u.escaped&&!i.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousMustache:function(w,u,l){var x=w.id,v=x.parts[0],i=u!=null||l!=null;this.opcode("getContext",x.depth);this.opcode("pushProgram",u);this.opcode("pushProgram",l);this.opcode("invokeAmbiguous",v,i)},simpleMustache:function(i){var l=i.id;if(l.type==="DATA"){this.DATA(l)}else{if(l.parts.length){this.ID(l)}else{this.addDepth(l.depth);this.opcode("getContext",l.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperMustache:function(v,l,i){var w=this.setupFullMustacheParams(v,l,i),u=v.id.parts[0];if(this.options.knownHelpers[u]){this.opcode("invokeKnownHelper",w.length,u)}else{if(this.options.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+u)}else{this.opcode("invokeHelper",w.length,u)}}},ID:function(x){this.addDepth(x.depth);this.opcode("getContext",x.depth);var v=x.parts[0];if(!v){this.opcode("pushContext")}else{this.opcode("lookupOnContext",x.parts[0])}for(var w=1,u=x.parts.length;w<u;w++){this.opcode("lookup",x.parts[w])}},DATA:function(w){this.options.data=true;if(w.id.isScoped||w.id.depth){throw new d.Exception("Scoped data references are not supported: "+w.original)}this.opcode("lookupData");var x=w.id.parts;for(var v=0,u=x.length;v<u;v++){this.opcode("lookup",x[v])}},STRING:function(i){this.opcode("pushString",i.string)},INTEGER:function(i){this.opcode("pushLiteral",i.integer)},BOOLEAN:function(i){this.opcode("pushLiteral",i.bool)},comment:function(){},opcode:function(i){this.opcodes.push({opcode:i,args:[].slice.call(arguments,1)})},declare:function(i,l){this.opcodes.push({opcode:"DECLARE",name:i,value:l})},addDepth:function(i){if(isNaN(i)){throw new Error("EWOT")}if(i===0){return}if(!this.depths[i]){this.depths[i]=true;this.depths.list.push(i)}},classifyMustache:function(v){var u=v.isHelper;var w=v.eligibleHelper;var l=this.options;if(w&&!u){var i=v.id.parts[0];if(l.knownHelpers[i]){u=true}else{if(l.knownHelpersOnly){w=false}}}if(u){return"helper"}else{if(w){return"ambiguous"}else{return"simple"}}},pushParams:function(v){var l=v.length,u;while(l--){u=v[l];if(this.options.stringParams){if(u.depth){this.addDepth(u.depth)}this.opcode("getContext",u.depth||0);this.opcode("pushStringParam",u.stringModeValue,u.type)}else{this[u.type](u)}}},setupMustacheParams:function(i){var l=i.params;this.pushParams(l);if(i.hash){this.hash(i.hash)}else{this.opcode("emptyHash")}return l},setupFullMustacheParams:function(u,l,i){var v=u.params;this.pushParams(v);this.opcode("pushProgram",l);this.opcode("pushProgram",i);if(u.hash){this.hash(u.hash)}else{this.opcode("emptyHash")}return v}};var s=function(i){this.value=i};g.prototype={nameLookup:function(l,i){if(/^[0-9]+$/.test(i)){return l+"["+i+"]"}else{if(g.isValidJavaScriptVariableName(i)){return l+"."+i}else{return l+"['"+i+"']"}}},appendToBuffer:function(i){if(this.environment.isSimple){return"return "+i+";"}else{return{appendToBuffer:true,content:i,toString:function(){return"buffer += "+i+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(i,l,v,u){this.environment=i;this.options=l||{};d.log(d.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!v;this.context=v||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(i,l);var x=i.opcodes,w;this.i=0;for(m=x.length;this.i<m;this.i++){w=x[this.i];if(w.opcode==="DECLARE"){this[w.name]=w.value}else{this[w.opcode].apply(this,w.args)}}return this.createFunctionContext(u)},nextOpcode:function(){var i=this.environment.opcodes;return i[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var i=[];if(!this.isChild){var l=this.namespace;var u="helpers = this.merge(helpers, "+l+".helpers);";if(this.environment.usePartial){u=u+" partials = this.merge(partials, "+l+".partials);"}if(this.options.data){u=u+" data = data || {};"}i.push(u)}else{i.push("")}if(!this.environment.isSimple){i.push(", buffer = "+this.initializeBuffer())}else{i.push("")}this.lastContext=0;this.source=i},createFunctionContext:function(B){var w=this.stackVars.concat(this.registers.list);if(w.length>0){this.source[1]=this.source[1]+", "+w.join(", ")}if(!this.isChild){for(var A in this.context.aliases){if(this.context.aliases.hasOwnProperty(A)){this.source[1]=this.source[1]+", "+A+"="+this.context.aliases[A]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var y=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var z=0,x=this.environment.depths.list.length;z<x;z++){y.push("depth"+this.environment.depths.list[z])}var u=this.mergeSource();if(!this.isChild){var C=d.COMPILER_REVISION,v=d.REVISION_CHANGES[C];u="this.compilerInfo = ["+C+",'"+v+"'];\n"+u}if(B){y.push(u);return Function.apply(this,y)}else{var D="function "+(this.name||"")+"("+y.join(",")+") {\n  "+u+"}";d.log(d.logger.DEBUG,D+"\n\n");return D}},mergeSource:function(){var x="",v;for(var w=0,l=this.source.length;w<l;w++){var u=this.source[w];if(u.appendToBuffer){if(v){v=v+"\n    + "+u.content}else{v=u.content}}else{if(v){x+="buffer += "+v+";\n  ";v=c}x+=u+"\n  "}}return x},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var i=["depth0"];this.setupParams(0,i);this.replaceStack(function(l){i.splice(1,0,l);return"blockHelperMissing.call("+i.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var l=["depth0"];this.setupParams(0,l);var i=this.topStack();l.splice(1,0,i);l[l.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+i+" = blockHelperMissing.call("+l.join(", ")+"); }")},appendContent:function(i){this.source.push(this.appendToBuffer(this.quotedString(i)))},append:function(){this.flushInline();var i=this.popStack();this.source.push("if("+i+" || "+i+" === 0) { "+this.appendToBuffer(i)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(i){if(this.lastContext!==i){this.lastContext=i}},lookupOnContext:function(i){this.push(this.nameLookup("depth"+this.lastContext,i,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(i){return"typeof "+i+" === functionType ? "+i+".apply(depth0) : "+i})},lookup:function(i){this.replaceStack(function(l){return l+" == null || "+l+" === false ? "+l+" : "+this.nameLookup(l,i,"context")})},lookupData:function(i){this.push("data")},pushStringParam:function(i,l){this.pushStackLiteral("depth"+this.lastContext);this.pushString(l);if(typeof i==="string"){this.pushString(i)}else{this.pushStackLiteral(i)}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.register("hashTypes","{}");this.register("hashContexts","{}")}},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var i=this.hash;this.hash=c;if(this.options.stringParams){this.register("hashContexts","{"+i.contexts.join(",")+"}");this.register("hashTypes","{"+i.types.join(",")+"}")}this.push("{\n    "+i.values.join(",\n    ")+"\n  }")},pushString:function(i){this.pushStackLiteral(this.quotedString(i))},push:function(i){this.inlineStack.push(i);return i},pushLiteral:function(i){this.pushStackLiteral(i)},pushProgram:function(i){if(i!=null){this.pushStackLiteral(this.programExpression(i))}else{this.pushStackLiteral(null)}},invokeHelper:function(u,i){this.context.aliases.helperMissing="helpers.helperMissing";var l=this.lastHelper=this.setupHelper(u,i,true);var v=this.nameLookup("depth"+this.lastContext,i,"context");this.push(l.name+" || "+v);this.replaceStack(function(w){return w+" ? "+w+".call("+l.callParams+") : helperMissing.call("+l.helperMissingParams+")"})},invokeKnownHelper:function(u,i){var l=this.setupHelper(u,i);this.push(l.name+".call("+l.callParams+")")},invokeAmbiguous:function(i,w){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var l=this.setupHelper(0,i,w);var u=this.lastHelper=this.nameLookup("helpers",i,"helper");var x=this.nameLookup("depth"+this.lastContext,i,"context");var v=this.nextStack();this.source.push("if ("+v+" = "+u+") { "+v+" = "+v+".call("+l.callParams+"); }");this.source.push("else { "+v+" = "+x+"; "+v+" = typeof "+v+" === functionType ? "+v+".apply(depth0) : "+v+"; }")},invokePartial:function(i){var l=[this.nameLookup("partials",i,"partial"),"'"+i+"'",this.popStack(),"helpers","partials"];if(this.options.data){l.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+l.join(", ")+")")},assignToHash:function(l){var v=this.popStack(),i,u;if(this.options.stringParams){u=this.popStack();i=this.popStack()}var w=this.hash;if(i){w.contexts.push("'"+l+"': "+i)}if(u){w.types.push("'"+l+"': "+u)}w.values.push("'"+l+"': ("+v+")")},compiler:g,compileChildren:function(u,x){var z=u.children,B,A;for(var y=0,v=z.length;y<v;y++){B=z[y];A=new this.compiler();var w=this.matchExistingProgram(B);if(w==null){this.context.programs.push("");w=this.context.programs.length;B.index=w;B.name="program"+w;this.context.programs[w]=A.compile(B,x,this.context);this.context.environments[w]=B}else{B.index=w;B.name="program"+w}}},matchExistingProgram:function(w){for(var v=0,u=this.context.environments.length;v<u;v++){var l=this.context.environments[v];if(l&&l.equals(w)){return v}}},programExpression:function(v){this.context.aliases.self="this";if(v==null){return"self.noop"}var A=this.environment.children[v],z=A.depths.list,y;var x=[A.index,A.name,"data"];for(var w=0,u=z.length;w<u;w++){y=z[w];if(y===1){x.push("depth0")}else{x.push("depth"+(y-1))}}return(z.length===0?"self.program(":"self.programWithDepth(")+x.join(", ")+")"},register:function(i,l){this.useRegister(i);this.source.push(i+" = "+l+";")},useRegister:function(i){if(!this.registers[i]){this.registers[i]=true;this.registers.list.push(i)}},pushStackLiteral:function(i){return this.push(new s(i))},pushStack:function(l){this.flushInline();var i=this.incrStack();if(l){this.source.push(i+" = "+l+";")}this.compileStack.push(i);return i},replaceStack:function(y){var v="",x=this.isInline(),i;if(x){var w=this.popStack(true);if(w instanceof s){i=w.value}else{var l=this.stackSlot?this.topStackName():this.incrStack();v="("+this.push(l)+" = "+w+"),";i=this.topStack()}}else{i=this.topStack()}var u=y.call(this,i);if(x){if(this.inlineStack.length||this.compileStack.length){this.popStack()}this.push("("+v+u+")")}else{if(!/^stack/.test(i)){i=this.nextStack()}this.source.push(i+" = ("+v+u+");")}return i},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var v=this.inlineStack;if(v.length){this.inlineStack=[];for(var u=0,l=v.length;u<l;u++){var w=v[u];if(w instanceof s){this.compileStack.push(w)}else{this.pushStack(w)}}}},isInline:function(){return this.inlineStack.length},popStack:function(i){var u=this.isInline(),l=(u?this.inlineStack:this.compileStack).pop();if(!i&&(l instanceof s)){return l.value}else{if(!u){this.stackSlot--}return l}},topStack:function(l){var i=(this.isInline()?this.inlineStack:this.compileStack),u=i[i.length-1];if(!l&&(u instanceof s)){return u.value}else{return u}},quotedString:function(i){return'"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(w,u,l){var v=[];this.setupParams(w,v,l);var i=this.nameLookup("helpers",u,"helper");return{params:v,name:i,callParams:["depth0"].concat(v).join(", "),helperMissingParams:l&&["depth0",this.quotedString(u)].concat(v).join(", ")}},setupParams:function(w,v,l){var C=[],A=[],B=[],u,x,z;C.push("hash:"+this.popStack());x=this.popStack();z=this.popStack();if(z||x){if(!z){this.context.aliases.self="this";z="self.noop"}if(!x){this.context.aliases.self="this";x="self.noop"}C.push("inverse:"+x);C.push("fn:"+z)}for(var y=0;y<w;y++){u=this.popStack();v.push(u);if(this.options.stringParams){B.push(this.popStack());A.push(this.popStack())}}if(this.options.stringParams){C.push("contexts:["+A.join(",")+"]");C.push("types:["+B.join(",")+"]");C.push("hashContexts:hashContexts");C.push("hashTypes:hashTypes")}if(this.options.data){C.push("data:data")}C="{"+C.join(",")+"}";if(l){this.register("options",C);v.push("options")}else{v.push(C)}return v.join(", ")}};var f=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var a=g.RESERVED_WORDS={};for(var o=0,m=f.length;o<m;o++){a[f[o]]=true}g.isValidJavaScriptVariableName=function(i){if(!g.RESERVED_WORDS[i]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(i)){return true}return false};d.precompile=function(u,v){if(u==null||(typeof u!=="string"&&u.constructor!==d.AST.ProgramNode)){throw new d.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+u)}v=v||{};if(!("data" in v)){v.data=true}var l=d.parse(u);var i=new j().compile(l,v);return new g().compile(i,v)};d.compile=function(i,l){if(i==null||(typeof i!=="string"&&i.constructor!==d.AST.ProgramNode)){throw new d.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+i)}l=l||{};if(!("data" in l)){l.data=true}var v;function u(){var y=d.parse(i);var x=new j().compile(y,l);var w=new g().compile(x,l,c,true);return d.template(w)}return function(x,w){if(!v){v=u()}return v.call(this,x,w)}};d.VM={template:function(i){var l={escapeExpression:d.Utils.escapeExpression,invokePartial:d.VM.invokePartial,programs:[],program:function(v,w,x){var u=this.programs[v];if(x){u=d.VM.program(v,w,x)}else{if(!u){u=this.programs[v]=d.VM.program(v,w)}}return u},merge:function(w,v){var u=w||v;if(w&&v){u={};d.Utils.extend(u,v);d.Utils.extend(u,w)}return u},programWithDepth:d.VM.programWithDepth,noop:d.VM.noop,compilerInfo:null};return function(y,x){x=x||{};var v=i.call(l,d,y,x.helpers,x.partials,x.data);var z=l.compilerInfo||[],w=z[0]||1,B=d.COMPILER_REVISION;if(w!==B){if(w<B){var u=d.REVISION_CHANGES[B],A=d.REVISION_CHANGES[w];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+A+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+z[1]+")."}}return v}},programWithDepth:function(v,w,x){var u=Array.prototype.slice.call(arguments,3);var l=function(y,i){i=i||{};return w.apply(this,[y,i.data||x].concat(u))};l.program=v;l.depth=u.length;return l},program:function(u,v,w){var l=function(x,i){i=i||{};return v(x,i.data||w)};l.program=u;l.depth=0;return l},noop:function(){return""},invokePartial:function(i,u,w,x,v,y){var l={helpers:x,partials:v,data:y};if(i===c){throw new d.Exception("The partial "+u+" could not be found")}else{if(i instanceof Function){return i(w,l)}else{if(!d.compile){throw new d.Exception("The partial "+u+" could not be compiled when running in runtime-only mode")}else{v[u]=d.compile(i,{data:y!==c});return v[u](w,l)}}}}};d.template=d.VM.template})(Handlebars);
Handlebars.registerHelper("reverse",function(e,c){var f=c.fn,a=c.inverse;var d=e.length-1;var b="";if(e&&e.length>0){for(;d>=0;d--){b=b+f(e[d])}}else{b=a(this)}return b});Handlebars.registerHelper("getLocation",function(a){return window.location.pathname.split("/")[1]||a||"index"});Handlebars.registerHelper("userRecommendReasonIs",function(b,a){if(!a||b==="random"){return"你可能感兴趣的用户"}else{if(a&&b==="following"){return"你的朋友"+a+"关注了Ta"}else{if(a&&b==="idol"){return"你的朋友"+a+"关注了Ta"}else{if(a&&b==="follower"){return"你的朋友"+a+"关注了Ta"}else{return}}}}});Handlebars.registerHelper("setCommentPermission",function(c,g,b){var d=window.user,f="",e="",a="";if(d.id===c||d.is_superuser){f+='<a href="javascript:;" onclick="delReply(this,\''+b+"');\">删除</a>"}f+='<a href="javascript:;" onclick="response(this);">回应</a>';return f});Handlebars.registerHelper("setFullCommentPermission",function(c,g,b){var d=window.user,f="",e="",a="";if(d.id===c||d.is_superuser){f+='<a href="javascript:;" onclick="delReply(this,\''+b+"');\">删除</a>"}f+='<a class="quote_reply">引用</a><a href="javascript:;" onclick="response(this);">回应</a>';return f});Handlebars.registerHelper("setOperatePermission",function(c,b,e,d){var a=window.user,f="";if(a.id===b||a.is_superuser){if(c!=="buzz"){if(c=="creation"){if(d){f+='<a href="/goods/'+e+'/edit/" class="edit">编辑</a>'}else{f+='<a href="/creation/'+e+'/edit/" class="edit">编辑</a>'}}else{f+='<a href="/'+c+"/"+e+'/edit/" class="edit">编辑</a>'}}f+='<a data-url="/actions/delete/'+c+"/"+e+"/-/"+c+'s/" class="delete">删除</a>'}return f});Handlebars.registerHelper("setActionPermission",function(m,j,f,c,a,b,d){var h=window.user,g="",k="",o="",l="",n=window.location.pathname.split("/")[1]||"index";switch(m){case"creation":var e=1;break;case"blog":var e=3;break;case"topic":var e=4;break;case"tutorial":var e=5;break;case"buzz":var e=2;default:break}k='<a href="javascript:;" data-type="'+m+'" data-raw_id="'+f+'" data-fetchURL="/comments/fetch/'+m+"/"+f+'/" class="embedreply" onclick="embedReply(this);"><i class="icon icon-comments"></i><span>'+d+"</span></a>";if(e){var i='<a href="javascript:;" onclick="addToWishList(this,'+h.id+","+e+","+f+');"><i class="icon icon-postlist"></i><span>清单</span></a>'}if(h.id===j){l='<a href="javascript:;"  class="like liked" data-id="'+f+'"><i class="icon icon-like2"></i><span>'+(b?b.length:0)+"</span></a>";o='<a href="javascript:;" class="reprint" data-id="'+f+'"><i class="icon icon-reprint"></i><span>转载</span></a>';if(i){g+=l+i+o+k}else{g+=l+o+k}}else{if(c&&c.length>0){if($.inArray(h.id,c)!==-1){o='<a href="javascript:;" data-url="/actions/unshare/'+m+"/"+f+"/-/"+n+'/" class="reprint reprinted" data-id="'+f+'"><i class="icon icon-reprint"></i><span>取消转载</span></a>'}else{o='<a href="javascript:;" data-url="/actions/share/'+m+"/"+f+"/-/"+n+'/" class="reprint" data-id="'+f+'"><i class="icon icon-reprint reprinted"></i><span>转载</span></a>'}}else{o='<a href="javascript:;"  data-url="/actions/share/'+m+"/"+f+"/-/"+n+'/" class="reprint" data-id="'+f+'"><i class="icon icon-reprint"></i><span>转载</span></a>'}if(b&&b.length>0){if($.inArray(h.id,b)!==-1){l='<a href="javascript:;" data-url="/actions/unfavour/'+m+"/"+f+"/-/"+n+'/" class="like liked" data-id="'+f+'"><i class="icon icon-like2 liked"></i><span>'+(b?b.length:0)+"</span></a>"}else{l='<a href="javascript:;" data-url="/actions/favour/'+m+"/"+f+"/-/"+n+'/" class="like" data-id="'+f+'"><i class="icon icon-like2"></i><span>'+(b?b.length:0)+"</span></a>"}}else{l='<a href="javascript:;"  data-url="/actions/favour/'+m+"/"+f+"/-/"+n+'/" class="like" data-id="'+f+'"><i class="icon icon-like2"></i><span>'+(b?b.length:0)+"</span></a>"}if(i){g+=l+i+o+k}else{g+=l+o+k}}return g});Handlebars.registerHelper("setFollowPermission",function(h,f,c,g,b){var e=window.user,d="",a="",i=window.location.pathname.split("/")[1]||"index";if(e.id===f||e.is_superuser){d+='<a data-url="/actions/delete/'+h+"/"+c+"/-/"+i+'/" class="delete">删除</a>';if(h!=="buzz"){d+='<a href="/'+h+"/"+c+'/edit/" class="edit">编辑</a>'}}comment='<a href="javascript:;" data-type="'+h+'" data-raw_id="'+c+'" data-fetchURL="/comments/fetch/'+h+"/"+c+'/" class="embedreply" onclick="embedReply(this);"><span>'+b+"</span></a>";if(e.id===f){a='<a href="javascript:;"  class="follow" data-id="'+c+'"><b>关注</b><span>'+(g?g.length:0)+"</span></a>";d+=comment+a}else{if(g&&g.length>0){if($.inArray(e.id,g)!==-1){a='<a href="javascript:;" data-url="/actions/unfollow/'+h+"/"+c+"/-/"+i+'/" class="follow followed" data-id="'+c+'"><b>取消关注</b><span>'+(g?g.length:0)+"</span></a>"}else{a='<a href="javascript:;" data-url="/actions/follow/'+h+"/"+c+"/-/"+i+'/" class="follow" data-id="'+c+'"><b>关注</b><span>'+(g?g.length:0)+"</span></a>"}}else{a='<a href="javascript:;"  data-url="/actions/follow/'+h+"/"+c+"/-/"+i+'/" class="follow" data-id="'+c+'"><b>关注</b><span>'+(g?g.length:0)+"</span></a>"}d=comment+a}return d});Handlebars.registerHelper("getCreatedTime",function(h){var f=60,d=f*60,b=d*24,a=b*7,o=b*30,i=o*12;var g,k,m,j,e,c=new Date(),l=c.getTime()/1000-h,n="";if(l<10){return"刚刚"}else{if(l>=10&&l<f){seconds=parseInt(l,10);n+=(seconds+"秒")}else{if(l>=f&&l<d){e=parseInt(l/f,10);n+=(e+"分钟")}else{if(l>=d&&l<b){j=parseInt(l/d,10);n+=(j+"小时")}else{if(l>=b&&l<a){m=parseInt(l/b,10);n+=(m+"天")}else{if(l>=a&&l<o){weeks=parseInt(l/a,10);n+=(weeks+"周")}else{if(l>=o&&l<i){k=parseInt(l/o,10);n+=(k+"个月")}else{g=parseInt(l/i,10);n+=(g+"年")}}}}}}}return n+"前"});Handlebars.registerHelper("prettifyDate",function(a){return new Date(a*1000).format("yyyy-MM-dd hh:mm:ss")});Handlebars.registerHelper("lineBreaksBR",function(b){var a=b.replace(/\n+/g,"<br />");return a});Handlebars.registerHelper("showText",function(e){var c=0;var d="";var b='<input type="hidden" value="';var a='<input type="hidden" value="" />';if(e.length>140){d=e.substr(0,134)+"......";return"<p>"+d+"</p>"+b+e+'" />'+a}else{return"<p>"+e+"</p>"+a}});Handlebars.registerHelper("showCommentControl",function(){return});Handlebars.registerHelper("setDynamicCommentsPagenation",function(f,e,d){var b="",c=Math.ceil(e/10),a=d||1;b+='<div class="circle-pages ajaxPages-embedReply">';if(a>1){b+='<a href="javascript:;" class="prev" data-page="'+(a-1)+'">上一页</a>'}if(e>0){if(c>1){for(var g=1;g<=c;g++){if(g==a){b+='<span class="page" data-page="'+a+'"></span>'}else{b+='<a href="javascript:;" class="page" title="第'+g+'页" data-page="'+g+'"></a>'}}}}if(a<c){b+='<a href="javascript:;" class="next" data-page="'+(a+1)+'">下一页</a>'}b+="</div>";return b});Handlebars.registerHelper("cutText",function(b){var a="",c="";if(b.length<=140){a=b}else{c='<p class="hidden_text" style="display:none">'+b+"</p>";a='<p class="showing_text">'+b.slice(0,140)+'<a class="null">...</a></p>'+c}return a});Handlebars.registerHelper("cutIntro",function(a){if(a){return a.length>=15?(a.substr(0,12)+"..."):a.substr(0,15)}else{return"你可能感兴趣的用户"}});Handlebars.registerHelper("cutPhotos",function(d){var b='<input type="hidden" value="'+d.toString()+'" />',a=window.location.pathname.split("/")[1]||"index",c;if(sogoke.CDN==="upyun"){c=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+d[0]+"!home"}else{if(sogoke.CDN==="s3"){c=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/midium/"+d[0]+".jpeg"}else{}}if(a==="index"){return'<div class="index_photos_preview_trigger" style="display:block;"><div class="my_dynamic_article_pic_chain"><img style="" src="'+c+'" width="120" class="index_photos_preview" alt="my_dynamic_article_pic"><!--NEED_REVISE_the_PATH--></div><div class="pic_number">'+d.length+"张</div></div>"}else{return'<div class="photos_preview_trigger" style="display:block;"><div class="my_dynamic_article_pic_chain">'+b+'<img style="" src="'+c+'" width="120" class="photos_preview" alt="my_dynamic_article_pic"><!--NEED_REVISE_the_PATH--></div><div class="pic_number">'+d.length+"张</div></div>"}});Handlebars.registerHelper("showSharedIcon",function(a){if(a){return"<b></b>"}return""});Handlebars.registerHelper("showSharedUserAvatar",function(d,b,c){if(d){var a=(sogoke.MEDIA_AVATAR_URL||"/media/")+"user/"+b+"/"+c+"/avatar!small";return'<a href="/r/'+b+'/" class="tiny-avatar"  target="_blank"><img src="'+a+'" ></a>'}return""});Handlebars.registerHelper("imgURL",function(b,a){if(a&&a.slice(0,4)=="http"){return a}if(sogoke.CDN==="upyun"){return(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+a+"!"+b}else{if(sogoke.CDN==="s3"){return(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+b+"/"+a+".jpeg"}}});Handlebars.registerHelper("rotateLinkPhotos",function(d){var b=parseInt(d.length/2,10)-1;if(b<0){b=0}var a='<input type="hidden" id="link_photos_sources" value="'+d.toString()+'">',c='<a title="点击上一张" id="previous_ui"><img src="http://sogoke-static.b0.upaiyun.com/static/v1/img/storeControl_left.gif" alt="上一张"/></a><img src="'+d[b]+'" width="120" id="link_photos_window" data-index=" '+b+'" height="auto" alt="my_dynamic_article_pic" /><a title="点击下一张" id="next_ui"><img src="http://sogoke-static.b0.upaiyun.com/static/v1/img/storeControl_right.gif" alt="下一张"/></a>';return c+a});Handlebars.registerHelper("avatarURL",function(b,c,d){var a=sogoke.MEDIA_AVATAR_URL||"/media/";return a+"avatars/"+d+"/"+b+".jpeg?v="+c});Handlebars.registerHelper("mediaURL",function(){return sogoke.MEDIA_URL||"/media/"});Handlebars.registerHelper("mediaAvatarURL",function(a,b,c){if(sogoke.CDN==="upyun"){return(sogoke.MEDIA_AVATAR_URL||"/media/")+"user/"+a+"/"+b+"/avatar!"+c}else{if(sogoke.CDN==="s3"){return(sogoke.MEDIA_AVATAR_URL||"/media/")+"avatars/"+c+"/"+a+".jpeg?v="+b}else{}}});Handlebars.registerHelper("mediaPhotoURL",function(a,c){if(sogoke.CDN==="upyun"){var b=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+a;if($.type(c)==="string"){b+="!"+c}return b}else{if(sogoke.CDN==="s3"){return(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+c+"/"+a+".jpeg"}}});Handlebars.registerHelper("staticURL",function(){return sogoke.STATIC_URL||"/static/"});Handlebars.registerHelper("site",function(b){var c=document.createElement("a");c.href=b;var a=c.hostname;if(a.slice(0,4)=="www."){a=a.substring(4)}return a});Handlebars.registerHelper("slice",function(e,g){var c="",f=parseInt(g.hash.offset)||0,a=parseInt(g.hash.limit)||5,b=((a+f)<e.length)?(a+f):e.length,d;if(f<e.length){d=f;for(d,b;d<b;d++){c+=g.fn(e[d])}return c}else{return""}});Handlebars.registerHelper("tutorialPics",function(h,a,f,e){var c="";var g=h.length<3?h.length:3;var d=e&&e.length?e.length:h.length;for(var b=0;b<g;b++){if(b!==g-1){if(sogoke.CDN==="upyun"){var j=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+h[b]+"!midium";c+='<a href="/tutorial/'+a+'/"><img src="'+j+'" alt="'+f+'"></a>'}else{if(sogoke.CDN==="s3"){var j=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/midium/"+h[b]+".jpeg";c+='<a href="/tutorial/'+a+'/"><img src="'+j+'" alt="'+f+'"></a>'}}}else{if(sogoke.CDN==="upyun"){var j=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/"+h[b]+"!midium";c+='<a href="/tutorial/'+a+'/"><span><i class="stepsNum">'+d+'</i>个步骤</span><img src="'+j+'" alt="'+f+'"></a>'}else{if(sogoke.CDN==="s3"){var j=(sogoke.MEDIA_PHOTO_URL||"/media/")+"photos/midium/"+h[b]+".jpeg";c+='<a href="/tutorial/'+a+'/"><span><i class="stepsNum">'+d+'</i>个步骤</span><img src="'+j+'" alt="'+f+'"></a>'}}}}return c});Handlebars.registerHelper("videoPostCover",function(c,h,e,f,d){var g=d?h[0]:sogoke.MEDIA_PHOTO_URL+"photos/"+h[0]+"!/both/300x190/quality/90";var a=d?("/videoclass/"+e+"/"):"/"+c+"/"+e+"/";var b='<a class="l-video" href="'+a+'">                <i class="play-video-btn-small"></i>                <span class="video-mask"></span>                <img class="face-pic" src="'+g+'" />              </a>';return b});Handlebars.registerHelper("isVideoTutorial",function(b,a){if(b&&b!=""){return a.fn(this)}else{return a.inverse(this)}});
(function(){var b=Handlebars.template,a=Handlebars.templates=Handlebars.templates||{};a.blog_template=b(function(h,t,r,m,z){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,h.helpers);z=z||{};var s="",i,g,e,d="function",c=this.escapeExpression,q=r.helperMissing,p=this;function o(D,C){var A="",B;A+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(B=r.sharer_id){B=B.call(D,{hash:{},data:C})}else{B=D.sharer_id;B=typeof B===d?B.apply(D):B}A+=c(B)+'/">';if(B=r.sharer_username){B=B.call(D,{hash:{},data:C})}else{B=D.sharer_username;B=typeof B===d?B.apply(D):B}A+=c(B)+'</a> 转载 <a href="/r/';if(B=r.creator_id){B=B.call(D,{hash:{},data:C})}else{B=D.creator_id;B=typeof B===d?B.apply(D):B}A+=c(B)+'/" target="_blank" class="colorGreen">';if(B=r.creator_name){B=B.call(D,{hash:{},data:C})}else{B=D.creator_name;B=typeof B===d?B.apply(D):B}A+=c(B)+'</a> 的 <a href="/blog/';if(B=r.raw_id){B=B.call(D,{hash:{},data:C})}else{B=D.raw_id;B=typeof B===d?B.apply(D):B}A+=c(B)+'/" class="colorBlue" target="_blank">博文</a>\r\n        ';return A}function n(D,C){var A="",B;A+='\r\n        <a href="/r/';if(B=r.creator_id){B=B.call(D,{hash:{},data:C})}else{B=D.creator_id;B=typeof B===d?B.apply(D):B}A+=c(B)+'/" target="_blank" class="colorGreen">';if(B=r.creator_name){B=B.call(D,{hash:{},data:C})}else{B=D.creator_name;B=typeof B===d?B.apply(D):B}A+=c(B)+'</a> 发布的 <a href="/blog/';if(B=r.raw_id){B=B.call(D,{hash:{},data:C})}else{B=D.raw_id;B=typeof B===d?B.apply(D):B}A+=c(B)+'/" class="colorBlue" target="_blank">博文</a>\r\n        ';return A}function l(E,D){var A="",C,B;A+="\r\n            ";B=r["if"].call(E,((C=E.photos),C==null||C===false?C:C.length),{hash:{},inverse:p.noop,fn:p.program(6,k,D),data:D});if(B||B===0){A+=B}A+="\r\n        ";return A}function k(F,E){var A="",D,C,B;A+="\r\n                ";B={hash:{offset:("0"),limit:("1")},inverse:p.noop,fn:p.programWithDepth(7,j,E,F),data:E};C=((D=r.slice||F.slice),D?D.call(F,F.photos,B):q.call(F,"slice",F.photos,B));if(C||C===0){A+=C}A+="\r\n                ";B={hash:{offset:("1"),limit:("2")},inverse:p.noop,fn:p.programWithDepth(9,f,E,F),data:E};C=((D=r.slice||F.slice),D?D.call(F,F.photos,B):q.call(F,"slice",F.photos,B));if(C||C===0){A+=C}A+="\r\n            ";return A}function j(G,E,F){var A="",D,C,B;A+='\r\n                    <a class="blog-video" target="_blank" href="/blog/'+c(((D=F.raw_id),typeof D===d?D.apply(G):D))+'/">\r\n                        <i class="play-video-btn-small"></i>\r\n                        <span class="video-mask"></span>\r\n                        <img src="';B={hash:{},data:E};A+=c(((D=r.imgURL||G.imgURL),D?D.call(G,"midium",G,B):q.call(G,"imgURL","midium",G,B)))+'" alt="';if(C=r.title){C=C.call(G,{hash:{},data:E})}else{C=G.title;C=typeof C===d?C.apply(G):C}A+=c(C)+'">\r\n                    </a>\r\n                ';return A}function f(G,E,F){var A="",D,C,B;A+='\r\n                    <a target="_blank" href="/blog/'+c(((D=F.raw_id),typeof D===d?D.apply(G):D))+'/"><img src="';B={hash:{},data:E};A+=c(((D=r.imgURL||G.imgURL),D?D.call(G,"midium",G,B):q.call(G,"imgURL","midium",G,B)))+'" alt="';if(C=r.title){C=C.call(G,{hash:{},data:E})}else{C=G.title;C=typeof C===d?C.apply(G):C}A+=c(C)+'"></a>\r\n                ';return A}function y(E,D){var A="",C,B;A+="\r\n            ";B=r["if"].call(E,((C=E.photos),C==null||C===false?C:C.length),{hash:{},inverse:p.noop,fn:p.program(12,x,D),data:D});if(B||B===0){A+=B}A+="\r\n        ";return A}function x(F,E){var A="",D,C,B;A+="\r\n            ";B={hash:{offset:("0"),limit:("3")},inverse:p.noop,fn:p.programWithDepth(13,w,E,F),data:E};C=((D=r.slice||F.slice),D?D.call(F,F.photos,B):q.call(F,"slice",F.photos,B));if(C||C===0){A+=C}A+="\r\n            ";return A}function w(G,E,F){var A="",D,C,B;A+='\r\n                <a target="_blank" href="/blog/'+c(((D=F.raw_id),typeof D===d?D.apply(G):D))+'/"><img src="';B={hash:{},data:E};A+=c(((D=r.imgURL||G.imgURL),D?D.call(G,"midium",G,B):q.call(G,"imgURL","midium",G,B)))+'" alt="';if(C=r.title){C=C.call(G,{hash:{},data:E})}else{C=G.title;C=typeof C===d?C.apply(G):C}A+=c(C)+'"></a>\r\n            ';return A}function v(F,E){var A="",D,C,B;A+="\r\n            ";B={hash:{},inverse:p.noop,fn:p.program(16,u,E),data:E};C=((D=r.reverse||F.reverse),D?D.call(F,F.tags,B):q.call(F,"reverse",F.tags,B));if(C||C===0){A+=C}A+="\r\n            ";return A}function u(C,B){var A="";A+='\r\n            <a href="/tag/'+c((typeof C===d?C.apply(C):C))+'/" target="_blank">'+c((typeof C===d?C.apply(C):C))+"</a>\r\n            ";return A}s+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(i=r.creator_id){i=i.call(t,{hash:{},data:z})}else{i=t.creator_id;i=typeof i===d?i.apply(t):i}s+=c(i)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';e={hash:{},data:z};s+=c(((i=r.mediaAvatarURL||t.mediaAvatarURL),i?i.call(t,t.creator_id,t.avatar,"midium",e):q.call(t,"mediaAvatarURL",t.creator_id,t.avatar,"midium",e)))+'" alt="';if(g=r.creator_name){g=g.call(t,{hash:{},data:z})}else{g=t.creator_name;g=typeof g===d?g.apply(t):g}s+=c(g)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n    <div class="mlt-title mb10" target="_blank"><a target="_blank" href="/blog/';if(g=r.raw_id){g=g.call(t,{hash:{},data:z})}else{g=t.raw_id;g=typeof g===d?g.apply(t):g}s+=c(g)+'/">';if(g=r.title){g=g.call(t,{hash:{},data:z})}else{g=t.title;g=typeof g===d?g.apply(t):g}s+=c(g)+'</a></div>\r\n\r\n    <div class="mb20 clearfix">\r\n        ';g=r["if"].call(t,t.is_shared,{hash:{},inverse:p.program(3,n,z),fn:p.program(1,o,z),data:z});if(g||g===0){s+=g}s+='\r\n    </div>\r\n\r\n    <div class="mlt-blog-pics fs0 clearfix mb15">\r\n        ';g=r["if"].call(t,((i=t.videos),i==null||i===false?i:i.length),{hash:{},inverse:p.program(11,y,z),fn:p.program(5,l,z),data:z});if(g||g===0){s+=g}s+='\r\n    </div>\r\n\r\n    <div class="mlt-content mb10">\r\n        <div class="mb10">\r\n            ';e={hash:{},data:z};g=((i=r.cutText||t.cutText),i?i.call(t,t.text,e):q.call(t,"cutText",t.text,e));if(g||g===0){s+=g}s+='\r\n        </div>\r\n        <a href="/blog/';if(g=r.raw_id){g=g.call(t,{hash:{},data:z})}else{g=t.raw_id;g=typeof g===d?g.apply(t):g}s+=c(g)+'/" class="colorBlue" target="_blank">阅读全文</a>\r\n    </div>\r\n\r\n    <div class="mlt-meta clearfix">\r\n        <div class="mlt-tags">\r\n            标签：\r\n            ';g=r["if"].call(t,((i=t.tags),i==null||i===false?i:i.length),{hash:{},inverse:p.noop,fn:p.program(15,v,z),data:z});if(g||g===0){s+=g}s+='\r\n        </div>\r\n        <div class="mlt-operate">\r\n            ';e={hash:{},data:z};g=((i=r.setOperatePermission||t.setOperatePermission),i?i.call(t,t.type,t.creator_id,t.raw_id,e):q.call(t,"setOperatePermission",t.type,t.creator_id,t.raw_id,e));if(g||g===0){s+=g}s+='\r\n        </div>\r\n        <div class="mlt-opt">\r\n            ';e={hash:{},data:z};g=((i=r.setActionPermission||t.setActionPermission),i?i.call(t,t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e):q.call(t,"setActionPermission",t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e));if(g||g===0){s+=g}s+="\r\n        </div>\r\n    </div>\r\n</div>\r\n";return s});a.buzz_template=b(function(h,t,r,m,y){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,h.helpers);y=y||{};var s="",i,g,e,d="function",c=this.escapeExpression,q=r.helperMissing,p=this;function o(C,B){var z="",A;z+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(A=r.sharer_id){A=A.call(C,{hash:{},data:B})}else{A=C.sharer_id;A=typeof A===d?A.apply(C):A}z+=c(A)+'/">';if(A=r.sharer_username){A=A.call(C,{hash:{},data:B})}else{A=C.sharer_username;A=typeof A===d?A.apply(C):A}z+=c(A)+'</a> 转载 <a href="/r/';if(A=r.creator_id){A=A.call(C,{hash:{},data:B})}else{A=C.creator_id;A=typeof A===d?A.apply(C):A}z+=c(A)+'/" target="_blank" class="colorGreen">';if(A=r.creator_name){A=A.call(C,{hash:{},data:B})}else{A=C.creator_name;A=typeof A===d?A.apply(C):A}z+=c(A)+'</a> 的 <a href="/buzz/';if(A=r.raw_id){A=A.call(C,{hash:{},data:B})}else{A=C.raw_id;A=typeof A===d?A.apply(C):A}z+=c(A)+'/" class="colorBlue" target="_blank">广播</a>\r\n        ';return z}function n(C,B){var z="",A;z+='\r\n        <a href="/r/';if(A=r.creator_id){A=A.call(C,{hash:{},data:B})}else{A=C.creator_id;A=typeof A===d?A.apply(C):A}z+=c(A)+'/" target="_blank" class="colorGreen">';if(A=r.creator_name){A=A.call(C,{hash:{},data:B})}else{A=C.creator_name;A=typeof A===d?A.apply(C):A}z+=c(A)+'</a> 发布的 <a href="/buzz/';if(A=r.raw_id){A=A.call(C,{hash:{},data:B})}else{A=C.raw_id;A=typeof A===d?A.apply(C):A}z+=c(A)+'/" class="colorBlue" target="_blank">广播</a>\r\n        ';return z}function l(D,C){var z="",B,A;z+="\r\n\r\n    ";A=r["if"].call(D,((B=D.link),B==null||B===false?B:B.video),{hash:{},inverse:p.program(9,f,C),fn:p.program(6,k,C),data:C});if(A||A===0){z+=A}z+="\r\n\r\n    ";return z}function k(D,C){var z="",B,A;z+='\r\n\r\n    \r\n    <div class="mlt-content mb20">#<a href="/buzz/';if(B=r.raw_id){B=B.call(D,{hash:{},data:C})}else{B=D.raw_id;B=typeof B===d?B.apply(D):B}z+=c(B)+'/" target="_blank">视频</a># ';B=r["if"].call(D,D.text,{hash:{},inverse:p.noop,fn:p.program(7,j,C),data:C});if(B||B===0){z+=B}z+=' </div>\r\n\r\n    <div class="mlt-video fs0 mb10">\r\n        <div class="mlt-video-preview">\r\n            <img src="'+c(((B=((B=D.link),B==null||B===false?B:B.photo)),typeof B===d?B.apply(D):B))+'" alt>\r\n            <a href="javascript:;">播放视频</a>\r\n        </div>\r\n        <div class="mlt-video-player">\r\n            ';A=((B=((B=D.link),B==null||B===false?B:B.video)),typeof B===d?B.apply(D):B);if(A||A===0){z+=A}z+='\r\n        </div>\r\n    </div>\r\n\r\n    <div class="mb10">\r\n        <a href="'+c(((B=((B=D.link),B==null||B===false?B:B.url)),typeof B===d?B.apply(D):B))+'" target="_blank">'+c(((B=((B=D.link),B==null||B===false?B:B.title)),typeof B===d?B.apply(D):B))+'</a>\r\n    </div>\r\n\r\n    <div class="mlt-video-rel mb20">\r\n        <a href="/buzz/';if(A=r.raw_id){A=A.call(D,{hash:{},data:C})}else{A=D.raw_id;A=typeof A===d?A.apply(D):A}z+=c(A)+'/" class="sgkred mlt-link" target="_blank">展开</a>\r\n        <a href="javascript:;" class="sgkred mlt-fold">收起</a>\r\n    </div>\r\n\r\n    ';return z}function j(D,C){var z="",B,A;z+=" ";A={hash:{},data:C};z+=c(((B=r.cutText||D.cutText),B?B.call(D,D.text,A):q.call(D,"cutText",D.text,A)))+" ";return z}function f(D,C){var z="",B,A;z+='\r\n\r\n    \r\n    <div class="mlt-content mb20">#<a href="/buzz/';if(B=r.raw_id){B=B.call(D,{hash:{},data:C})}else{B=D.raw_id;B=typeof B===d?B.apply(D):B}z+=c(B)+'/" target="_blank">广播</a># ';B=r["if"].call(D,D.text,{hash:{},inverse:p.noop,fn:p.program(7,j,C),data:C});if(B||B===0){z+=B}z+='</div>\r\n\r\n    <div class="mlt-video fs0 mb10">\r\n        <div >\r\n            <img src="'+c(((B=((B=D.link),B==null||B===false?B:B.photo)),typeof B===d?B.apply(D):B))+'" width=120 >\r\n        </div>\r\n    </div>\r\n\r\n    <div class="mb10">\r\n        <a href="'+c(((B=((B=D.link),B==null||B===false?B:B.url)),typeof B===d?B.apply(D):B))+'" target="_blank">'+c(((B=((B=D.link),B==null||B===false?B:B.title)),typeof B===d?B.apply(D):B))+'</a>\r\n    </div>\r\n\r\n    <div class="mlt-video-rel mb20">\r\n        <a href="/buzz/';if(A=r.raw_id){A=A.call(D,{hash:{},data:C})}else{A=D.raw_id;A=typeof A===d?A.apply(D):A}z+=c(A)+'/" class="sgkred mlt-link" target="_blank">展开</a>\r\n    </div>\r\n\r\n    ';return z}function x(D,C){var z="",B,A;z+="\r\n\r\n    ";A=r["if"].call(D,((B=D.photos),B==null||B===false?B:B.length),{hash:{},inverse:p.program(15,u,C),fn:p.program(12,w,C),data:C});if(A||A===0){z+=A}z+="  \r\n\r\n    ";return z}function w(E,D){var z="",C,B,A;z+='\r\n    <div class="mlt-content mb10">';A={hash:{},data:D};B=((C=r.cutText||E.cutText),C?C.call(E,E.text,A):q.call(E,"cutText",E.text,A));if(B||B===0){z+=B}z+='</div>\r\n    <div class="mlt-pics mb10">\r\n        <div class="mlt-picpreview">\r\n            <img src="';A={hash:{},data:D};z+=c(((C=r.imgURL||E.imgURL),C?C.call(E,"medium",((C=E.photos),C==null||C===false?C:C[0]),A):q.call(E,"imgURL","medium",((C=E.photos),C==null||C===false?C:C[0]),A)))+'" alt>\r\n            <div class="mlt-picnum"><i class="icon icon-picnum"></i>'+c(((C=((C=E.photos),C==null||C===false?C:C.length)),typeof C===d?C.apply(E):C))+'张</div>\r\n        </div>\r\n        <div class="mlt-allpics">\r\n        ';B=r.each.call(E,E.photos,{hash:{},inverse:p.noop,fn:p.program(13,v,D),data:D});if(B||B===0){z+=B}z+='\r\n        </div>\r\n    </div>\r\n    <div class="mb20">\r\n        <a href="/buzz/';if(B=r.raw_id){B=B.call(E,{hash:{},data:D})}else{B=E.raw_id;B=typeof B===d?B.apply(E):B}z+=c(B)+'/" class="sgkred" target="_blank">展开</a>\r\n    </div>\r\n    ';return z}function v(D,C){var z="",B,A;z+='\r\n            <img src="';A={hash:{},data:C};z+=c(((B=r.imgURL||D.imgURL),B?B.call(D,"large",D,A):q.call(D,"imgURL","large",D,A)))+'" alt>\r\n        ';return z}function u(E,D){var z="",C,B,A;z+='\r\n    <div class="mlt-content mb20">\r\n        <div class="mb10">';A={hash:{},data:D};B=((C=r.cutText||E.cutText),C?C.call(E,E.text,A):q.call(E,"cutText",E.text,A));if(B||B===0){z+=B}z+='</div>\r\n        <a href="/buzz/';if(B=r.raw_id){B=B.call(E,{hash:{},data:D})}else{B=E.raw_id;B=typeof B===d?B.apply(E):B}z+=c(B)+'/" class="sgkred" target="_blank">展开</a>\r\n    </div>\r\n    ';return z}s+='\r\n<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(i=r.creator_id){i=i.call(t,{hash:{},data:y})}else{i=t.creator_id;i=typeof i===d?i.apply(t):i}s+=c(i)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';e={hash:{},data:y};s+=c(((i=r.mediaAvatarURL||t.mediaAvatarURL),i?i.call(t,t.creator_id,t.avatar,"midium",e):q.call(t,"mediaAvatarURL",t.creator_id,t.avatar,"midium",e)))+'" alt="';if(g=r.creator_name){g=g.call(t,{hash:{},data:y})}else{g=t.creator_name;g=typeof g===d?g.apply(t):g}s+=c(g)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n    <div class="mb10">\r\n        ';g=r["if"].call(t,t.is_shared,{hash:{},inverse:p.program(3,n,y),fn:p.program(1,o,y),data:y});if(g||g===0){s+=g}s+="\r\n    </div>        \r\n\r\n\r\n\r\n    ";g=r["if"].call(t,t.link,{hash:{},inverse:p.program(11,x,y),fn:p.program(5,l,y),data:y});if(g||g===0){s+=g}s+='\r\n\r\n    <div class="mlt-meta clearfix">\r\n        <div class="fl mlt-date">';e={hash:{},data:y};s+=c(((i=r.getCreatedTime||t.getCreatedTime),i?i.call(t,t.timestamp,e):q.call(t,"getCreatedTime",t.timestamp,e)))+'</div>\r\n        <div class="mlt-operate">\r\n            ';e={hash:{},data:y};g=((i=r.setOperatePermission||t.setOperatePermission),i?i.call(t,t.type,t.creator_id,t.raw_id,e):q.call(t,"setOperatePermission",t.type,t.creator_id,t.raw_id,e));if(g||g===0){s+=g}s+='\r\n        </div>\r\n        <div class="fr mlt-opt">\r\n        ';e={hash:{},data:y};g=((i=r.setActionPermission||t.setActionPermission),i?i.call(t,t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e):q.call(t,"setActionPermission",t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e));if(g||g===0){s+=g}s+="         \r\n        </div>\r\n    </div>\r\n</div>\r\n";return s});a.creation_template=b(function(g,s,q,l,v){this.compilerInfo=[4,">= 1.0.0"];q=this.merge(q,g.helpers);v=v||{};var r="",i,f,e,d="function",c=this.escapeExpression,p=q.helperMissing,o=this;function n(z,y){var w="",x;w+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(x=q.sharer_id){x=x.call(z,{hash:{},data:y})}else{x=z.sharer_id;x=typeof x===d?x.apply(z):x}w+=c(x)+'/">';if(x=q.sharer_username){x=x.call(z,{hash:{},data:y})}else{x=z.sharer_username;x=typeof x===d?x.apply(z):x}w+=c(x)+'</a> 转载 <a href="/r/';if(x=q.creator_id){x=x.call(z,{hash:{},data:y})}else{x=z.creator_id;x=typeof x===d?x.apply(z):x}w+=c(x)+'/" target="_blank" class="colorGreen">';if(x=q.creator_name){x=x.call(z,{hash:{},data:y})}else{x=z.creator_name;x=typeof x===d?x.apply(z):x}w+=c(x)+'</a> 的 <a href="/creation/';if(x=q.raw_id){x=x.call(z,{hash:{},data:y})}else{x=z.raw_id;x=typeof x===d?x.apply(z):x}w+=c(x)+'/" class="colorBlue" target="_blank">作品</a>\r\n        ';return w}function m(z,y){var w="",x;w+='\r\n        <a href="/r/';if(x=q.creator_id){x=x.call(z,{hash:{},data:y})}else{x=z.creator_id;x=typeof x===d?x.apply(z):x}w+=c(x)+'/" target="_blank" class="colorGreen">';if(x=q.creator_name){x=x.call(z,{hash:{},data:y})}else{x=z.creator_name;x=typeof x===d?x.apply(z):x}w+=c(x)+'</a> 发布的 <a href="/creation/';if(x=q.raw_id){x=x.call(z,{hash:{},data:y})}else{x=z.raw_id;x=typeof x===d?x.apply(z):x}w+=c(x)+'/" class="colorBlue" target="_blank">作品</a>\r\n        ';return w}function k(B,A){var w="",z,y,x;w+='\r\n            <div class="fr fs0 mlt-pics">\r\n            ';x={hash:{offset:("0"),limit:("3")},inverse:o.noop,fn:o.programWithDepth(6,j,A,B),data:A};y=((z=q.slice||B.slice),z?z.call(B,B.photos,x):p.call(B,"slice",B.photos,x));if(y||y===0){w+=y}w+="\r\n            </div>\r\n        ";return w}function j(B,z,A){var w="",y,x;w+='\r\n                <a target="_blank" href="/creation/'+c(((y=A.raw_id),typeof y===d?y.apply(B):y))+'/"><img src="';x={hash:{},data:z};w+=c(((y=q.imgURL||B.imgURL),y?y.call(B,"tag",B,x):p.call(B,"imgURL","tag",B,x)))+'" alt="'+c(((y=A.title),typeof y===d?y.apply(B):y))+'"></a>\r\n            ';return w}function h(z,y){var w="",x;w+='\r\n                <div class="sgkred">￥ ';if(x=q.price){x=x.call(z,{hash:{},data:y})}else{x=z.price;x=typeof x===d?x.apply(z):x}w+=c(x)+"元</div>\r\n                ";return w}function u(B,A){var w="",z,y,x;w+='\r\n        <div class="fl mlt-tags">\r\n            标签：\r\n            ';x={hash:{},inverse:o.noop,fn:o.program(11,t,A),data:A};y=((z=q.reverse||B.reverse),z?z.call(B,B.tags,x):p.call(B,"reverse",B.tags,x));if(y||y===0){w+=y}w+="\r\n        </div>\r\n        ";return w}function t(y,x){var w="";w+='\r\n            <a href="/tag/'+c((typeof y===d?y.apply(y):y))+'/" target="_blank">'+c((typeof y===d?y.apply(y):y))+"</a>\r\n            ";return w}r+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(i=q.creator_id){i=i.call(s,{hash:{},data:v})}else{i=s.creator_id;i=typeof i===d?i.apply(s):i}r+=c(i)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';e={hash:{},data:v};r+=c(((i=q.mediaAvatarURL||s.mediaAvatarURL),i?i.call(s,s.creator_id,s.avatar,"midium",e):p.call(s,"mediaAvatarURL",s.creator_id,s.avatar,"midium",e)))+'" alt="';if(f=q.creator_name){f=f.call(s,{hash:{},data:v})}else{f=s.creator_name;f=typeof f===d?f.apply(s):f}r+=c(f)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n\r\n    <div class="mb10">\r\n        ';f=q["if"].call(s,s.is_shared,{hash:{},inverse:o.program(3,m,v),fn:o.program(1,n,v),data:v});if(f||f===0){r+=f}r+='\r\n    </div>\r\n\r\n\r\n    <div class="mb10">\r\n        <div class="mlt-creation-title mb10 fl" target="_blank"><a href="/creation/';if(f=q.raw_id){f=f.call(s,{hash:{},data:v})}else{f=s.raw_id;f=typeof f===d?f.apply(s):f}r+=c(f)+'/" target="_blank">';if(f=q.title){f=f.call(s,{hash:{},data:v})}else{f=s.title;f=typeof f===d?f.apply(s):f}if(f||f===0){r+=f}r+="</a></div>\r\n\r\n        ";f=q["if"].call(s,((i=s.photos),i==null||i===false?i:i.length),{hash:{},inverse:o.noop,fn:o.program(5,k,v),data:v});if(f||f===0){r+=f}r+='\r\n\r\n        <div class="clearfix mlt-creation">\r\n            <div class="fl">\r\n                ';f=q["if"].call(s,s.price,{hash:{},inverse:o.noop,fn:o.program(8,h,v),data:v});if(f||f===0){r+=f}r+='\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="mlt-meta clearfix">\r\n        ';f=q["if"].call(s,((i=s.tags),i==null||i===false?i:i.length),{hash:{},inverse:o.noop,fn:o.program(10,u,v),data:v});if(f||f===0){r+=f}r+='\r\n        <div class="mlt-operate">\r\n            ';e={hash:{},data:v};f=((i=q.setOperatePermission||s.setOperatePermission),i?i.call(s,s.type,s.creator_id,s.raw_id,s.price,e):p.call(s,"setOperatePermission",s.type,s.creator_id,s.raw_id,s.price,e));if(f||f===0){r+=f}r+='\r\n        </div>\r\n        <div class="fr mlt-opt">\r\n            ';e={hash:{},data:v};f=((i=q.setActionPermission||s.setActionPermission),i?i.call(s,s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e):p.call(s,"setActionPermission",s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e));if(f||f===0){r+=f}r+="\r\n        </div>\r\n    </div>\r\n</div>\r\n";return r});a.dynamic_comment=b(function(f,m,e,k,j){this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,f.helpers);j=j||{};var h="",c,p,o,l=e.helperMissing,i=this.escapeExpression,g="function",n=this;function d(u,t){var q="",s,r;q+='\n                <p class="embed-reply-pic preview"><img data-origin_url="';r={hash:{},data:t};q+=i(((s=e.mediaPhotoURL||u.mediaPhotoURL),s?s.call(u,((s=u.photos),s==null||s===false?s:s[0]),r):l.call(u,"mediaPhotoURL",((s=u.photos),s==null||s===false?s:s[0]),r)))+'" data-thumb_url="';r={hash:{},data:t};q+=i(((s=e.mediaPhotoURL||u.mediaPhotoURL),s?s.call(u,((s=u.photos),s==null||s===false?s:s[0]),"small",r):l.call(u,"mediaPhotoURL",((s=u.photos),s==null||s===false?s:s[0]),"small",r)))+'" src="';r={hash:{},data:t};q+=i(((s=e.mediaPhotoURL||u.mediaPhotoURL),s?s.call(u,((s=u.photos),s==null||s===false?s:s[0]),"small",r):l.call(u,"mediaPhotoURL",((s=u.photos),s==null||s===false?s:s[0]),"small",r)))+'" alt></p>\n                ';return q}h+='<li class="clearfix" data-commentID="';if(c=e.id){c=c.call(m,{hash:{},data:j})}else{c=m.id;c=typeof c===g?c.apply(m):c}h+=i(c)+'">\n<a class="fl fs0 avatar" href="/r/';if(c=e.user_id){c=c.call(m,{hash:{},data:j})}else{c=m.user_id;c=typeof c===g?c.apply(m):c}h+=i(c)+'/"><img src=';o={hash:{},data:j};h+=i(((c=e.mediaAvatarURL||m.mediaAvatarURL),c?c.call(m,m.user_id,m.avatar,"small",o):l.call(m,"mediaAvatarURL",m.user_id,m.avatar,"small",o)))+' alt="';if(p=e.username){p=p.call(m,{hash:{},data:j})}else{p=m.username;p=typeof p===g?p.apply(m):p}h+=i(p)+'"></a>\n    <div class="fr comment-main">\n        <div class="commenter"><a href="">';if(p=e.username){p=p.call(m,{hash:{},data:j})}else{p=m.username;p=typeof p===g?p.apply(m):p}h+=i(p)+'</a></div>\n        <div class="comment">\n            <div class="comment-content">\n                ';o={hash:{},data:j};p=((c=e.lineBreaksBR||m.lineBreaksBR),c?c.call(m,m.comment,o):l.call(m,"lineBreaksBR",m.comment,o));if(p||p===0){h+=p}h+='\n                <!-- 注意：内嵌回应中用户上传的图片需要缩小，点击展开，这里只需要加上class="embed-reply-pic preview"即可，如果直接在详情页的评论中，图片是直接展开，没有此点击操作 -->\n                ';p=e["if"].call(m,m.photos,{hash:{},inverse:n.noop,fn:n.program(1,d,j),data:j});if(p||p===0){h+=p}h+='\n            </div>\n        </div>\n        <div class="comment-meta clearfix">\n            <div class="fl">';o={hash:{},data:j};h+=i(((c=e.getCreatedTime||m.getCreatedTime),c?c.call(m,m.timestamp,o):l.call(m,"getCreatedTime",m.timestamp,o)))+'</div>\n            <div class="fr">\n                ';o={hash:{},data:j};p=((c=e.setCommentPermission||m.setCommentPermission),c?c.call(m,m.user_id,m.username,m.id,o):l.call(m,"setCommentPermission",m.user_id,m.username,m.id,o));if(p||p===0){h+=p}h+="\n            </div>\n        </div>\n    </div>\n</li>\n";return h});a.dynamic_comment_form=b(function(e,l,d,j,i){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,e.helpers);i=i||{};var g="",c,n,m,f="function",h=this.escapeExpression,k=d.helperMissing;g+='<ul class="clearfix">\r\n    <li class="reply">\r\n        <a class="fl fs0 avatar" href="/r/';if(c=d.user_id){c=c.call(l,{hash:{},data:i})}else{c=l.user_id;c=typeof c===f?c.apply(l):c}g+=h(c)+'/"><img src=';m={hash:{},data:i};g+=h(((c=d.mediaAvatarURL||l.mediaAvatarURL),c?c.call(l,l.user_id,l.user_avatar,"midium",m):k.call(l,"mediaAvatarURL",l.user_id,l.user_avatar,"midium",m)))+' alt="阿辛"></a>\r\n        <div class="fr comment-main">\r\n            <form name="reply-form" action="/comments/post/';if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"/";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+'/" method="post">\r\n            <p style="display:none;">\r\n                <input type="text" name="honeypot" id="id_honeypot">\r\n            </p>\r\n\r\n            <div class="mb10 reply-form">\r\n                <textarea class="t-autosize"></textarea><!-- 未登录需要加上 onclick="globalLogin();" -->\r\n                <a href="javascript:;" class="fs0 upload-images" id="comment-upload-image-';if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"_";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+'" title="上传图片"><i class="icon icon-upload-img" id="comment-upload-image-';if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"_";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+'-btn"></i></a>\r\n            </div>\r\n            <button type="submit" class="btn btn-lightgreen fr">回应</button>\r\n            </form>\r\n            <script>\r\n                var photoReplyImg = $(\'#comment-upload-image-';if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"_";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+"-btn');\r\n                var init = {\r\n                    Error:function(up, error) {\r\n                        switch(error.code) {\r\n                        case plupload.INIT_ERROR:\r\n                        $('#uploader_notice').css({'color':'#FFB2B0'}).html(sogoke.PLUPLOAD_ERROR_MESSAGES['INIT_ERROR']);\r\n                        break;\r\n                        case plupload.HTTP_ERROR:\r\n                        $('#uploader_notice').css({'color':'#FFB2B0'}).html(sogoke.PLUPLOAD_ERROR_MESSAGES['HTTP_ERROR']);\r\n                        break;\r\n                        default:\r\n                        $('#uploader_notice').css({'color':'#FFB2B0'}).html(sogoke.PLUPLOAD_ERROR_MESSAGES['DEFAULT']);\r\n                        }\r\n            \r\n                    },             \r\n                    FilesAdded: function(up, files) {\r\n                        up.start();\r\n                        photoReplyImg.css({'background':'url(/static/img/loading.gif)'});\r\n                    },\r\n                    FileUploaded: function(up, file, info) {\r\n                        var response = JSON.parse(info.response);\r\n                        file.id = response.suid;\r\n                        photoReplyImg.data('id', response.suid); \r\n                        photoReplyImg.css({'background':'url('+response.url+')'});\r\n                        photoReplyImg.addClass('picAdded');\r\n                    },\r\n                    UploadComplete: function(up, files) {\r\n                    }\r\n                };\r\n                uploader = sogoke.uploader({\r\n                    'init':init,\r\n                    'location':\"create_comment\",\r\n                    'container':'comment-upload-image-";if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"_";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+"',\r\n                    'browse_button': 'comment-upload-image-";if(n=d.type){n=n.call(l,{hash:{},data:i})}else{n=l.type;n=typeof n===f?n.apply(l):n}g+=h(n)+"_";if(n=d.raw_id){n=n.call(l,{hash:{},data:i})}else{n=l.raw_id;n=typeof n===f?n.apply(l):n}g+=h(n)+"-btn',\r\n                    'csrf_token': sogoke.getCookie('csrftoken')\r\n                    });\r\n                uploader.init();\r\n            <\/script>\r\n        </div>\r\n    </li>\r\n</ul>\r\n";return g});a.dynamic_comments=b(function(g,n,f,l,k){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,g.helpers);k=k||{};var i="",c,m=f.helperMissing,j=this.escapeExpression,h="function",o=this;function e(u,t){var p="",s,r,q;p+='\r\n    <li class="clearfix" data-commentID="';if(s=f.id){s=s.call(u,{hash:{},data:t})}else{s=u.id;s=typeof s===h?s.apply(u):s}p+=j(s)+'">\r\n    <a class="fl fs0 avatar" href="/r/';if(s=f.user_id){s=s.call(u,{hash:{},data:t})}else{s=u.user_id;s=typeof s===h?s.apply(u):s}p+=j(s)+'/"><img src=';q={hash:{},data:t};p+=j(((s=f.mediaAvatarURL||u.mediaAvatarURL),s?s.call(u,u.user_id,u.avatar,"small",q):m.call(u,"mediaAvatarURL",u.user_id,u.avatar,"small",q)))+' alt="';if(r=f.username){r=r.call(u,{hash:{},data:t})}else{r=u.username;r=typeof r===h?r.apply(u):r}p+=j(r)+'"></a>\r\n        <div class="fr comment-main">\r\n            <div class="commenter"><a href="/r/';if(r=f.user_id){r=r.call(u,{hash:{},data:t})}else{r=u.user_id;r=typeof r===h?r.apply(u):r}p+=j(r)+'/">';if(r=f.username){r=r.call(u,{hash:{},data:t})}else{r=u.username;r=typeof r===h?r.apply(u):r}p+=j(r)+'</a></div>\r\n            <div class="comment">\r\n                <div class="comment-content">\r\n                    ';q={hash:{},data:t};r=((s=f.lineBreaksBR||u.lineBreaksBR),s?s.call(u,u.comment,q):m.call(u,"lineBreaksBR",u.comment,q));if(r||r===0){p+=r}p+='\r\n                    <!-- 注意：内嵌回应中用户上传的图片需要缩小，点击展开，这里只需要加上class="embed-reply-pic preview"即可，如果直接在详情页的评论中，图片是直接展开，没有此点击操作 -->\r\n                    ';r=f["if"].call(u,u.photos,{hash:{},inverse:o.noop,fn:o.program(2,d,t),data:t});if(r||r===0){p+=r}p+='\r\n                </div>\r\n            </div>\r\n            <div class="comment-meta clearfix">\r\n                <div class="fl">';q={hash:{},data:t};p+=j(((s=f.prettifyDate||u.prettifyDate),s?s.call(u,u.timestamp,q):m.call(u,"prettifyDate",u.timestamp,q)))+'</div>\r\n                <div class="fr">\r\n                    ';q={hash:{},data:t};r=((s=f.setFullCommentPermission||u.setFullCommentPermission),s?s.call(u,u.user_id,u.username,u.id,q):m.call(u,"setFullCommentPermission",u.user_id,u.username,u.id,q));if(r||r===0){p+=r}p+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </li>\r\n";return p}function d(t,s){var p="",r,q;p+='\r\n                    <p class="embed-reply-pic preview"><img data-origin_url="';q={hash:{},data:s};p+=j(((r=f.mediaPhotoURL||t.mediaPhotoURL),r?r.call(t,((r=t.photos),r==null||r===false?r:r[0]),q):m.call(t,"mediaPhotoURL",((r=t.photos),r==null||r===false?r:r[0]),q)))+'" data-thumb_url="';q={hash:{},data:s};p+=j(((r=f.mediaPhotoURL||t.mediaPhotoURL),r?r.call(t,((r=t.photos),r==null||r===false?r:r[0]),"small",q):m.call(t,"mediaPhotoURL",((r=t.photos),r==null||r===false?r:r[0]),"small",q)))+'" src="';q={hash:{},data:s};p+=j(((r=f.mediaPhotoURL||t.mediaPhotoURL),r?r.call(t,((r=t.photos),r==null||r===false?r:r[0]),"small",q):m.call(t,"mediaPhotoURL",((r=t.photos),r==null||r===false?r:r[0]),"small",q)))+'"  alt></p>\r\n                    ';return p}i+='<ul class="comments">\r\n';c=f.each.call(n,n.comments,{hash:{},inverse:o.noop,fn:o.program(1,e,k),data:k});if(c||c===0){i+=c}i+="\r\n</ul>\r\n";return i});a.dynamic_comments_paginator=b(function(e,j,d,h,g){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,e.helpers);g=g||{};var f="",c,l,k,i=d.helperMissing;k={hash:{},data:g};l=((c=d.setDynamicCommentsPagenation||j.setDynamicCommentsPagenation),c?c.call(j,j.fetchURL,j.comments_number,j.page,k):i.call(j,"setDynamicCommentsPagenation",j.fetchURL,j.comments_number,j.page,k));if(l||l===0){f+=l}f+="\r\n";return f});a.link_template=b(function(g,s,q,l,t){this.compilerInfo=[4,">= 1.0.0"];q=this.merge(q,g.helpers);t=t||{};var r="",i,f,e,d="function",c=this.escapeExpression,p=q.helperMissing,o=this;function n(x,w){var u="",v;u+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(v=q.sharer_id){v=v.call(x,{hash:{},data:w})}else{v=x.sharer_id;v=typeof v===d?v.apply(x):v}u+=c(v)+'/">';if(v=q.sharer_username){v=v.call(x,{hash:{},data:w})}else{v=x.sharer_username;v=typeof v===d?v.apply(x):v}u+=c(v)+'</a> 转载 <a href="/r/';if(v=q.creator_id){v=v.call(x,{hash:{},data:w})}else{v=x.creator_id;v=typeof v===d?v.apply(x):v}u+=c(v)+'/" target="_blank" class="colorGreen">';if(v=q.creator_name){v=v.call(x,{hash:{},data:w})}else{v=x.creator_name;v=typeof v===d?v.apply(x):v}u+=c(v)+'</a> 的 <a href="/link/';if(v=q.raw_id){v=v.call(x,{hash:{},data:w})}else{v=x.raw_id;v=typeof v===d?v.apply(x):v}u+=c(v)+'/" class="colorBlue" target="_blank">链接</a>\r\n        ';return u}function m(x,w){var u="",v;u+='\r\n        <a href="/r/';if(v=q.creator_id){v=v.call(x,{hash:{},data:w})}else{v=x.creator_id;v=typeof v===d?v.apply(x):v}u+=c(v)+'/" target="_blank" class="colorGreen">';if(v=q.creator_name){v=v.call(x,{hash:{},data:w})}else{v=x.creator_name;v=typeof v===d?v.apply(x):v}u+=c(v)+'</a> 分享的 <a href="/link/';if(v=q.raw_id){v=v.call(x,{hash:{},data:w})}else{v=x.raw_id;v=typeof v===d?v.apply(x):v}u+=c(v)+'/" class="colorBlue" target="_blank">链接</a>\r\n        ';return u}function k(y,x){var u="",w,v;u+='\r\n            <img src="';v={hash:{},data:x};u+=c(((w=q.imgURL||y.imgURL),w?w.call(y,"large",y,v):p.call(y,"imgURL","large",y,v)))+'" alt>\r\n        ';return u}function j(z,y){var u="",x,w,v;u+="\r\n            ";v={hash:{},inverse:o.noop,fn:o.program(8,h,y),data:y};w=((x=q.reverse||z.reverse),x?x.call(z,z.tags,v):p.call(z,"reverse",z.tags,v));if(w||w===0){u+=w}u+="\r\n            ";return u}function h(w,v){var u="";u+='\r\n            <a href="/tag/'+c((typeof w===d?w.apply(w):w))+'/" target="_blank">'+c((typeof w===d?w.apply(w):w))+"</a>\r\n            ";return u}r+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(i=q.creator_id){i=i.call(s,{hash:{},data:t})}else{i=s.creator_id;i=typeof i===d?i.apply(s):i}r+=c(i)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';e={hash:{},data:t};r+=c(((i=q.mediaAvatarURL||s.mediaAvatarURL),i?i.call(s,s.creator_id,s.avatar,"midium",e):p.call(s,"mediaAvatarURL",s.creator_id,s.avatar,"midium",e)))+'" alt="';if(f=q.creator_name){f=f.call(s,{hash:{},data:t})}else{f=s.creator_name;f=typeof f===d?f.apply(s):f}r+=c(f)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n    <div class="mlt-title mb10" target="_blank"><a target="_blank" href="/link/';if(f=q.raw_id){f=f.call(s,{hash:{},data:t})}else{f=s.raw_id;f=typeof f===d?f.apply(s):f}r+=c(f)+'/">';if(f=q.title){f=f.call(s,{hash:{},data:t})}else{f=s.title;f=typeof f===d?f.apply(s):f}r+=c(f)+'</a></div>\r\n\r\n    <div class="mb20">\r\n        ';f=q["if"].call(s,s.is_shared,{hash:{},inverse:o.program(3,m,t),fn:o.program(1,n,t),data:t});if(f||f===0){r+=f}r+='\r\n    </div>\r\n\r\n    <div class="mlt-pics mb15">\r\n        <div class="mlt-picpreview">\r\n            <img src="';e={hash:{},data:t};r+=c(((i=q.imgURL||s.imgURL),i?i.call(s,"medium",((i=s.photos),i==null||i===false?i:i[0]),e):p.call(s,"imgURL","medium",((i=s.photos),i==null||i===false?i:i[0]),e)))+'" alt>\r\n            <div class="mlt-picnum"><i class="icon icon-picnum"></i>'+c(((i=((i=s.photos),i==null||i===false?i:i.length)),typeof i===d?i.apply(s):i))+'张</div>\r\n        </div>\r\n        <div class="mlt-allpics">\r\n        ';f=q.each.call(s,s.photos,{hash:{},inverse:o.noop,fn:o.program(5,k,t),data:t});if(f||f===0){r+=f}r+='\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="mlt-link mb10">\r\n        via: <a href="';if(f=q.url){f=f.call(s,{hash:{},data:t})}else{f=s.url;f=typeof f===d?f.apply(s):f}r+=c(f)+'" class="colorBlue" target="_blank">';e={hash:{},data:t};f=((i=q.site||s.site),i?i.call(s,s.url,e):p.call(s,"site",s.url,e));if(f||f===0){r+=f}r+='<i class="icon icon-external"></i></a>\r\n    </div>\r\n\r\n    <div class="mb10">推荐理由：</div>\r\n\r\n    <div class="mb20">';if(f=q.description){f=f.call(s,{hash:{},data:t})}else{f=s.description;f=typeof f===d?f.apply(s):f}r+=c(f)+'</div>\r\n\r\n    <div class="mlt-meta clearfix">\r\n        <div class="fl mlt-tags">\r\n            标签：\r\n            ';f=q["if"].call(s,((i=s.tags),i==null||i===false?i:i.length),{hash:{},inverse:o.noop,fn:o.program(7,j,t),data:t});if(f||f===0){r+=f}r+='\r\n        </div>\r\n        <div class="mlt-operate">\r\n            ';e={hash:{},data:t};f=((i=q.setOperatePermission||s.setOperatePermission),i?i.call(s,s.type,s.creator_id,s.raw_id,e):p.call(s,"setOperatePermission",s.type,s.creator_id,s.raw_id,e));if(f||f===0){r+=f}r+='\r\n        </div>\r\n        <div class="fr mlt-opt">\r\n        ';e={hash:{},data:t};f=((i=q.setActionPermission||s.setActionPermission),i?i.call(s,s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e):p.call(s,"setActionPermission",s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e));if(f||f===0){r+=f}r+="         \r\n        </div>\r\n    </div>\r\n</div>\r\n";return r});a.share=b(function(g,l,f,k,j){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,g.helpers);j=j||{};var i="",c,h="function",o=this;function e(t,s){var q="",r;q+='\n<span class="sync">\n    同时分享到：\n    ';r=f["if"].call(t,t.sina,{hash:{},inverse:o.noop,fn:o.program(2,d,s),data:s});if(r||r===0){q+=r}q+="\n    ";r=f["if"].call(t,t.qq,{hash:{},inverse:o.noop,fn:o.program(4,p,s),data:s});if(r||r===0){q+=r}q+="\n    ";r=f["if"].call(t,t.douban,{hash:{},inverse:o.noop,fn:o.program(6,n,s),data:s});if(r||r===0){q+=r}q+="\n</span>\n";return q}function d(t,s){var q="",r;q+='\n    <input name="share_to_sina" checked="checked" class="share_checkbox" type="checkbox">\r\n    <img class="share_img" src="';if(r=f.staticURL){r=r.call(t,{hash:{},data:s})}else{r=t.staticURL;r=typeof r===h?r.apply(t):r}if(r||r===0){q+=r}q+='img/sinamicroblog_hover.png"/>\n    ';return q}function p(t,s){var q="",r;q+='\n    <input name="share_to_qq"  class="share_checkbox" type="checkbox">\r\n    <img class="share_img" src="';if(r=f.staticURL){r=r.call(t,{hash:{},data:s})}else{r=t.staticURL;r=typeof r===h?r.apply(t):r}if(r||r===0){q+=r}q+='img/qqzone_hover.png"/>\n    ';return q}function n(t,s){var q="",r;q+='\n    <input name="share_to_douban" checked="checked" class="share_checkbox" type="checkbox">\r\n    <img class="share_img" src="';if(r=f.staticURL){r=r.call(t,{hash:{},data:s})}else{r=t.staticURL;r=typeof r===h?r.apply(t):r}if(r||r===0){q+=r}q+='img/douban_hover.png"/>\n    ';return q}function m(r,q){return'\n<span class="sync" >将信息同步更新到微博，豆瓣，QQ空间，只需10秒 <a href="/accounts/settings/sync/" target="_blank">绑定一下帐号</a></span>\n'}c=f["if"].call(l,l.count,{hash:{},inverse:o.program(8,m,j),fn:o.program(1,e,j),data:j});if(c||c===0){i+=c}i+="\n";return i});a.tag_recommend=b(function(e,k,d,j,i){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,e.helpers);i=i||{};var g="",c,f="function",h=this.escapeExpression;g+='<div class="tag_new">\r\n  <a class="tag_newtitle" href="/tag/';if(c=d.name){c=c.call(k,{hash:{},data:i})}else{c=k.name;c=typeof c===f?c.apply(k):c}g+=h(c)+'/">';if(c=d.name){c=c.call(k,{hash:{},data:i})}else{c=k.name;c=typeof c===f?c.apply(k):c}g+=h(c)+'</a>\r\n  <a class="tag_newnumber" href="/tag/';if(c=d.name){c=c.call(k,{hash:{},data:i})}else{c=k.name;c=typeof c===f?c.apply(k):c}g+=h(c)+'/">';if(c=d.followers_number){c=c.call(k,{hash:{},data:i})}else{c=k.followers_number;c=typeof c===f?c.apply(k):c}g+=h(c)+'</a>\r\n  <a data-url="/actions/follow/tag/';if(c=d.name){c=c.call(k,{hash:{},data:i})}else{c=k.name;c=typeof c===f?c.apply(k):c}g+=h(c)+"/-/";if(c=d.getLocation){c=c.call(k,{hash:{},data:i})}else{c=k.getLocation;c=typeof c===f?c.apply(k):c}g+=h(c)+'/" class="follow_tag_recommend">关注</a>\r\n</div>\r\n<a data-url="/actions/blacklist/tag/';if(c=d.name){c=c.call(k,{hash:{},data:i})}else{c=k.name;c=typeof c===f?c.apply(k):c}g+=h(c)+"/-/";if(c=d.getLocation){c=c.call(k,{hash:{},data:i})}else{c=k.getLocation;c=typeof c===f?c.apply(k):c}g+=h(c)+'/" class="blacklist_tag">\r\n  <!---->\r\n</a>                 \r\n';return g});a.topic_template=b(function(h,s,q,l,u){this.compilerInfo=[4,">= 1.0.0"];q=this.merge(q,h.helpers);u=u||{};var r="",i,g,e,d="function",c=this.escapeExpression,p=q.helperMissing,o=this;function n(y,x){var v="",w;v+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(w=q.sharer_id){w=w.call(y,{hash:{},data:x})}else{w=y.sharer_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/">';if(w=q.sharer_username){w=w.call(y,{hash:{},data:x})}else{w=y.sharer_username;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 转载 <a href="/r/';if(w=q.creator_id){w=w.call(y,{hash:{},data:x})}else{w=y.creator_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" target="_blank" class="colorGreen">';if(w=q.creator_name){w=w.call(y,{hash:{},data:x})}else{w=y.creator_name;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 的 <a href="/topic/';if(w=q.raw_id){w=w.call(y,{hash:{},data:x})}else{w=y.raw_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" class="colorBlue" target="_blank">问答</a>\r\n        ';return v}function m(y,x){var v="",w;v+='\r\n        <a href="/r/';if(w=q.creator_id){w=w.call(y,{hash:{},data:x})}else{w=y.creator_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" target="_blank" class="colorGreen">';if(w=q.creator_name){w=w.call(y,{hash:{},data:x})}else{w=y.creator_name;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 发布的 <a href="/topic/';if(w=q.raw_id){w=w.call(y,{hash:{},data:x})}else{w=y.raw_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" class="colorBlue" target="_blank">问答</a>\r\n        ';return v}function k(A,z){var v="",y,x,w;v+='\r\n    <div class="mlt-content-withPhoto clearfix"> \r\n        <div class="mlt-topicPics mb20 fl">\r\n            <a href="/topic/';if(y=q.raw_id){y=y.call(A,{hash:{},data:z})}else{y=A.raw_id;y=typeof y===d?y.apply(A):y}v+=c(y)+'/">\r\n                <img src="';w={hash:{},data:z};v+=c(((y=q.imgURL||A.imgURL),y?y.call(A,"medium",((y=A.photos),y==null||y===false?y:y[0]),w):p.call(A,"imgURL","medium",((y=A.photos),y==null||y===false?y:y[0]),w)))+'" alt>\r\n                <div class="mlt-picnum"><i class="icon icon-picnum"></i>'+c(((y=((y=A.photos),y==null||y===false?y:y.length)),typeof y===d?y.apply(A):y))+'张</div>\r\n            </a>\r\n        </div>\r\n\r\n        <div class="mlt-content mb20 fr">\r\n            <div class="mb10">\r\n                ';w={hash:{},data:z};x=((y=q.cutText||A.cutText),y?y.call(A,A.text,w):p.call(A,"cutText",A.text,w));if(x||x===0){v+=x}v+='\r\n            </div>\r\n            <a href="/topic/';if(x=q.raw_id){x=x.call(A,{hash:{},data:z})}else{x=A.raw_id;x=typeof x===d?x.apply(A):x}v+=c(x)+'/" class="sgkred" target="_blank">查看问答</a>\r\n        </div>\r\n    </div>\r\n    ';return v}function j(A,z){var v="",y,x,w;v+='  \r\n\r\n    <div class="mlt-content mb20 mlt-pureText">\r\n        <div class="mb10">\r\n            ';w={hash:{},data:z};x=((y=q.cutText||A.cutText),y?y.call(A,A.text,w):p.call(A,"cutText",A.text,w));if(x||x===0){v+=x}v+='\r\n        </div>\r\n        <a href="/topic/';if(x=q.raw_id){x=x.call(A,{hash:{},data:z})}else{x=A.raw_id;x=typeof x===d?x.apply(A):x}v+=c(x)+'/" class="sgkred" target="_blank">查看问答</a>\r\n    </div>\r\n\r\n    ';return v}function f(A,z){var v="",y,x,w;v+="\r\n            ";w={hash:{},inverse:o.noop,fn:o.program(10,t,z),data:z};x=((y=q.reverse||A.reverse),y?y.call(A,A.tags,w):p.call(A,"reverse",A.tags,w));if(x||x===0){v+=x}v+="\r\n            ";return v}function t(x,w){var v="";v+='\r\n            <a href="/tag/'+c((typeof x===d?x.apply(x):x))+'/" target="_blank">'+c((typeof x===d?x.apply(x):x))+"</a>\r\n            ";return v}r+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(i=q.creator_id){i=i.call(s,{hash:{},data:u})}else{i=s.creator_id;i=typeof i===d?i.apply(s):i}r+=c(i)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';e={hash:{},data:u};r+=c(((i=q.mediaAvatarURL||s.mediaAvatarURL),i?i.call(s,s.creator_id,s.avatar,"midium",e):p.call(s,"mediaAvatarURL",s.creator_id,s.avatar,"midium",e)))+'" alt="';if(g=q.creator_name){g=g.call(s,{hash:{},data:u})}else{g=s.creator_name;g=typeof g===d?g.apply(s):g}r+=c(g)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n    <div class="mlt-title mb10" target="_blank"><a target="_blank" href="/topic/';if(g=q.raw_id){g=g.call(s,{hash:{},data:u})}else{g=s.raw_id;g=typeof g===d?g.apply(s):g}r+=c(g)+'/">';if(g=q.title){g=g.call(s,{hash:{},data:u})}else{g=s.title;g=typeof g===d?g.apply(s):g}r+=c(g)+'</a></div>\r\n\r\n    <div class="mb20">\r\n        ';g=q["if"].call(s,s.is_shared,{hash:{},inverse:o.program(3,m,u),fn:o.program(1,n,u),data:u});if(g||g===0){r+=g}r+="\r\n    </div>\r\n\r\n    ";g=q["if"].call(s,((i=s.photos),i==null||i===false?i:i.length),{hash:{},inverse:o.program(7,j,u),fn:o.program(5,k,u),data:u});if(g||g===0){r+=g}r+='\r\n\r\n    <div class="mlt-meta clearfix">\r\n        <div class="fl mlt-tags">\r\n            标签：\r\n            ';g=q["if"].call(s,((i=s.tags),i==null||i===false?i:i.length),{hash:{},inverse:o.noop,fn:o.program(9,f,u),data:u});if(g||g===0){r+=g}r+='\r\n        </div>\r\n        <div class="mlt-operate">\r\n            ';e={hash:{},data:u};g=((i=q.setOperatePermission||s.setOperatePermission),i?i.call(s,s.type,s.creator_id,s.raw_id,e):p.call(s,"setOperatePermission",s.type,s.creator_id,s.raw_id,e));if(g||g===0){r+=g}r+='\r\n        </div>\r\n        <div class="fr mlt-opt">\r\n            ';e={hash:{},data:u};g=((i=q.setActionPermission||s.setActionPermission),i?i.call(s,s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e):p.call(s,"setActionPermission",s.type,s.creator_id,s.raw_id,s.shared_by,s.commented_by,s.favoured_by,s.comments_number,e));if(g||g===0){r+=g}r+="\r\n        </div>\r\n    </div>\r\n</div>\r\n";return r});a.tutorial_template=b(function(l,C,A,r,J){this.compilerInfo=[4,">= 1.0.0"];A=this.merge(A,l.helpers);J=J||{};var B="",n,k,g,d="function",c=this.escapeExpression,w=this,z=A.helperMissing;function t(N,M){var K="",L;K+='\r\n        <a target="_blank" href="/videoclass/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/">';if(L=A.title){L=L.call(N,{hash:{},data:M})}else{L=N.title;L=typeof L===d?L.apply(N):L}K+=c(L)+"</a>\r\n        ";return K}function s(N,M){var K="",L;K+='\r\n        <a target="_blank" href="/tutorial/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/">';if(L=A.title){L=L.call(N,{hash:{},data:M})}else{L=N.title;L=typeof L===d?L.apply(N):L}K+=c(L)+"</a>\r\n        ";return K}function q(P,O){var K="",N,M,L;K+='\r\n        <a target="_blank" class="colorGreen" href="/r/';if(N=A.sharer_id){N=N.call(P,{hash:{},data:O})}else{N=P.sharer_id;N=typeof N===d?N.apply(P):N}K+=c(N)+'/">';if(N=A.sharer_username){N=N.call(P,{hash:{},data:O})}else{N=P.sharer_username;N=typeof N===d?N.apply(P):N}K+=c(N)+'</a> 转载 <a href="/r/';if(N=A.creator_id){N=N.call(P,{hash:{},data:O})}else{N=P.creator_id;N=typeof N===d?N.apply(P):N}K+=c(N)+'/" target="_blank" class="colorGreen">';if(N=A.creator_name){N=N.call(P,{hash:{},data:O})}else{N=P.creator_name;N=typeof N===d?N.apply(P):N}K+=c(N)+"</a> 的 \r\n            ";L={hash:{},inverse:w.program(8,m,O),fn:w.program(6,p,O),data:O};M=((N=A.isVideoTutorial||P.isVideoTutorial),N?N.call(P,P.video,L):z.call(P,"isVideoTutorial",P.video,L));if(M||M===0){K+=M}K+="\r\n        ";return K}function p(N,M){var K="",L;K+='\r\n            <a href="/videoclass/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/" class="colorBlue" target="_blank">教程</a>\r\n            ';return K}function m(N,M){var K="",L;K+='\r\n            <a href="/tutorial/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/" class="colorBlue" target="_blank">教程</a>\r\n            ';return K}function I(P,O){var K="",N,M,L;K+='\r\n        <a href="/r/';if(N=A.creator_id){N=N.call(P,{hash:{},data:O})}else{N=P.creator_id;N=typeof N===d?N.apply(P):N}K+=c(N)+'/" target="_blank" class="colorGreen">';if(N=A.creator_name){N=N.call(P,{hash:{},data:O})}else{N=P.creator_name;N=typeof N===d?N.apply(P):N}K+=c(N)+"</a> 发布的 \r\n            ";L={hash:{},inverse:w.program(8,m,O),fn:w.program(6,p,O),data:O};M=((N=A.isVideoTutorial||P.isVideoTutorial),N?N.call(P,P.video,L):z.call(P,"isVideoTutorial",P.video,L));if(M||M===0){K+=M}K+="\r\n        ";return K}function H(L,K){return'\r\n    <div class="content-wrap clearfix video-content">\r\n    '}function G(O,N){var K="",M,L;K+="\r\n        ";L=A["if"].call(O,((M=O.videos),M==null||M===false?M:M.length),{hash:{},inverse:w.program(17,E,N),fn:w.program(15,F,N),data:N});if(L||L===0){K+=L}K+="\r\n    ";return K}function F(L,K){return'\r\n    <div class="content-wrap clearfix video-content">\r\n        '}function E(L,K){return'\r\n    <div class="content-wrap clearfix">\r\n        '}function D(P,O){var K="",N,M,L;K+="\r\n            ";L={hash:{},inverse:w.program(22,j,O),fn:w.program(20,o,O),data:O};M=((N=A.isVideoTutorial||P.isVideoTutorial),N?N.call(P,P.video,L):z.call(P,"isVideoTutorial",P.video,L));if(M||M===0){K+=M}K+="\r\n        ";return K}function o(P,O){var K="",N,M,L;K+='\r\n                <div class="mlt-tutorial-pics fl image-line fs0 clearfix mb15">\r\n                ';L={hash:{},data:O};M=((N=A.videoPostCover||P.videoPostCover),N?N.call(P,P.type,P.photos,P.raw_id,P.title,P.video,L):z.call(P,"videoPostCover",P.type,P.photos,P.raw_id,P.title,P.video,L));if(M||M===0){K+=M}K+="\r\n                </div>\r\n            ";return K}function j(O,N){var K="",M,L;K+="\r\n                ";L=A["if"].call(O,((M=O.videos),M==null||M===false?M:M.length),{hash:{},inverse:w.program(25,h,N),fn:w.program(23,i,N),data:N});if(L||L===0){K+=L}K+="\r\n            ";return K}function i(P,O){var K="",N,M,L;K+='\r\n                    <div class="mlt-tutorial-pics fl image-line fs0 clearfix mb15">\r\n                    ';L={hash:{},data:O};M=((N=A.videoPostCover||P.videoPostCover),N?N.call(P,P.type,P.photos,P.raw_id,P.title,P.video,L):z.call(P,"videoPostCover",P.type,P.photos,P.raw_id,P.title,P.video,L));if(M||M===0){K+=M}K+="\r\n                    </div>\r\n                ";return K}function h(N,M){var K="",L;K+='\r\n                    <div class="mlt-tutorial-pics image-line fs0 clearfix mb15">\r\n                    ';L=A["if"].call(N,N.steps,{hash:{},inverse:w.program(28,e,M),fn:w.program(26,f,M),data:M});if(L||L===0){K+=L}K+="\r\n                    </div>\r\n                ";return K}function f(P,O){var K="",N,M,L;K+="\r\n                        ";L={hash:{},data:O};M=((N=A.tutorialPics||P.tutorialPics),N?N.call(P,P.photos,P.raw_id,P.title,P.steps,L):z.call(P,"tutorialPics",P.photos,P.raw_id,P.title,P.steps,L));if(M||M===0){K+=M}K+="\r\n                    ";return K}function e(P,O){var K="",N,M,L;K+="\r\n                        ";L={hash:{},data:O};M=((N=A.tutorialPics||P.tutorialPics),N?N.call(P,P.photos,P.raw_id,P.title,L):z.call(P,"tutorialPics",P.photos,P.raw_id,P.title,L));if(M||M===0){K+=M}K+="      \r\n                    ";return K}function y(N,M){var K="",L;K+='\r\n            <a href="/videoclass/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/" class="sgkred" target="_blank">阅读全文</a>\r\n            ';return K}function x(N,M){var K="",L;K+='\r\n            <a href="/tutorial/';if(L=A.raw_id){L=L.call(N,{hash:{},data:M})}else{L=N.raw_id;L=typeof L===d?L.apply(N):L}K+=c(L)+'/" class="sgkred" target="_blank">阅读全文</a>\r\n            ';return K}function v(P,O){var K="",N,M,L;K+="\r\n            ";L={hash:{},inverse:w.noop,fn:w.program(35,u,O),data:O};M=((N=A.reverse||P.reverse),N?N.call(P,P.tags,L):z.call(P,"reverse",P.tags,L));if(M||M===0){K+=M}K+="\r\n            ";return K}function u(M,L){var K="";K+='\r\n            <a href="/tag/'+c((typeof M===d?M.apply(M):M))+'/" target="_blank">'+c((typeof M===d?M.apply(M):M))+"</a>\r\n            ";return K}B+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\r\n    <a href="/r/';if(n=A.creator_id){n=n.call(C,{hash:{},data:J})}else{n=C.creator_id;n=typeof n===d?n.apply(C):n}B+=c(n)+'/" class="fl fs0 avatar" target="_blank">\r\n        <img src="';g={hash:{},data:J};B+=c(((n=A.mediaAvatarURL||C.mediaAvatarURL),n?n.call(C,C.creator_id,C.avatar,"midium",g):z.call(C,"mediaAvatarURL",C.creator_id,C.avatar,"midium",g)))+'" alt="';if(k=A.creator_name){k=k.call(C,{hash:{},data:J})}else{k=C.creator_name;k=typeof k===d?k.apply(C):k}B+=c(k)+'">\r\n    </a>\r\n</div>\r\n\r\n<div class="fr mlt-main">\r\n    <div class="mlt-title mb10" target="_blank">\r\n        ';g={hash:{},inverse:w.program(3,s,J),fn:w.program(1,t,J),data:J};k=((n=A.isVideoTutorial||C.isVideoTutorial),n?n.call(C,C.video,g):z.call(C,"isVideoTutorial",C.video,g));if(k||k===0){B+=k}B+='\r\n    </div>\r\n\r\n    <div class="mb20">\r\n        ';k=A["if"].call(C,C.is_shared,{hash:{},inverse:w.program(10,I,J),fn:w.program(5,q,J),data:J});if(k||k===0){B+=k}B+="\r\n    </div>\r\n\r\n    ";g={hash:{},inverse:w.program(14,G,J),fn:w.program(12,H,J),data:J};k=((n=A.isVideoTutorial||C.isVideoTutorial),n?n.call(C,C.video,g):z.call(C,"isVideoTutorial",C.video,g));if(k||k===0){B+=k}B+="\r\n        ";k=A["if"].call(C,((n=C.photos),n==null||n===false?n:n.length),{hash:{},inverse:w.noop,fn:w.program(19,D,J),data:J});if(k||k===0){B+=k}B+='\r\n        \r\n        <div class="mlt-content mb20">\r\n            <div class="mb10">\r\n                ';g={hash:{},data:J};k=((n=A.cutText||C.cutText),n?n.call(C,C.text,g):z.call(C,"cutText",C.text,g));if(k||k===0){B+=k}B+="\r\n            </div>\r\n            ";g={hash:{},inverse:w.program(32,x,J),fn:w.program(30,y,J),data:J};k=((n=A.isVideoTutorial||C.isVideoTutorial),n?n.call(C,C.video,g):z.call(C,"isVideoTutorial",C.video,g));if(k||k===0){B+=k}B+='\r\n        </div>\r\n    </div>\r\n\r\n    <div class="mlt-meta clearfix">\r\n        <div class="fl mlt-tags">\r\n            标签：\r\n            ';k=A["if"].call(C,((n=C.tags),n==null||n===false?n:n.length),{hash:{},inverse:w.noop,fn:w.program(34,v,J),data:J});if(k||k===0){B+=k}B+='\r\n        </div>\r\n        <div class="mlt-operate">\r\n            ';g={hash:{},data:J};k=((n=A.setOperatePermission||C.setOperatePermission),n?n.call(C,C.type,C.creator_id,C.raw_id,g):z.call(C,"setOperatePermission",C.type,C.creator_id,C.raw_id,g));if(k||k===0){B+=k}B+='\r\n        </div>\r\n        <div class="fr mlt-opt">\r\n            ';g={hash:{},data:J};k=((n=A.setActionPermission||C.setActionPermission),n?n.call(C,C.type,C.creator_id,C.raw_id,C.shared_by,C.commented_by,C.favoured_by,C.comments_number,g):z.call(C,"setActionPermission",C.type,C.creator_id,C.raw_id,C.shared_by,C.commented_by,C.favoured_by,C.comments_number,g));if(k||k===0){B+=k}B+="\r\n        </div>\r\n    </div>\r\n</div>";return B});a.user_recommend=b(function(e,l,d,j,i){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,e.helpers);i=i||{};var g="",c,n,m,f="function",h=this.escapeExpression,k=d.helperMissing;g+='<li class="clearfix mb15">\r\n<a href="/r/';if(c=d.id){c=c.call(l,{hash:{},data:i})}else{c=l.id;c=typeof c===f?c.apply(l):c}g+=h(c)+'/" class="avatar fs0 fl"><img src=';m={hash:{},data:i};g+=h(((c=d.mediaAvatarURL||l.mediaAvatarURL),c?c.call(l,l.id,l.avatar,"small",m):k.call(l,"mediaAvatarURL",l.id,l.avatar,"small",m)))+' alt="';if(n=d.username){n=n.call(l,{hash:{},data:i})}else{n=l.username;n=typeof n===f?n.apply(l):n}g+=h(n)+'"></a>\r\n    <div class="dc-content fr">\r\n        <a href="/r/';if(n=d.id){n=n.call(l,{hash:{},data:i})}else{n=l.id;n=typeof n===f?n.apply(l):n}g+=h(n)+'/">';if(n=d.username){n=n.call(l,{hash:{},data:i})}else{n=l.username;n=typeof n===f?n.apply(l):n}g+=h(n)+'</a>\r\n        <a href="javascript:;" class="follow-user" title="加关注" data-url="/actions/follow/user/';if(n=d.id){n=n.call(l,{hash:{},data:i})}else{n=l.id;n=typeof n===f?n.apply(l):n}g+=h(n)+"/-/";if(n=d.getLocation){n=n.call(l,{hash:{},data:i})}else{n=l.getLocation;n=typeof n===f?n.apply(l):n}g+=h(n)+'/"><b>关注</b></a>\r\n        <div class="reason">';m={hash:{},data:i};g+=h(((c=d.cutIntro||l.cutIntro),c?c.call(l,l.intro,m):k.call(l,"cutIntro",l.intro,m)))+'</div>\r\n    </div>\r\n    <a href="javascript:;" class="change" title="换一个" data-url="/actions/blacklist/user/';if(n=d.id){n=n.call(l,{hash:{},data:i})}else{n=l.id;n=typeof n===f?n.apply(l):n}g+=h(n)+"/-/";if(n=d.getLocation){n=n.call(l,{hash:{},data:i})}else{n=l.getLocation;n=typeof n===f?n.apply(l):n}g+=h(n)+'/" data-id="';if(n=d.id){n=n.call(l,{hash:{},data:i})}else{n=l.id;n=typeof n===f?n.apply(l):n}g+=h(n)+'" ><i class="icon icon-cross-small"></i></a>\r\n</li>\r\n';return g});a.wishlist_template=b(function(h,t,r,m,u){this.compilerInfo=[4,">= 1.0.0"];r=this.merge(r,h.helpers);u=u||{};var s="",j,g,e,d="function",c=this.escapeExpression,q=r.helperMissing,p=this;function o(y,x){var v="",w;v+='\n                <a target="_blank" class="colorGreen" href="/r/';if(w=r.sharer_id){w=w.call(y,{hash:{},data:x})}else{w=y.sharer_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/">';if(w=r.sharer_username){w=w.call(y,{hash:{},data:x})}else{w=y.sharer_username;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 转载 <a href="/r/';if(w=r.creator_id){w=w.call(y,{hash:{},data:x})}else{w=y.creator_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" target="_blank" class="colorGreen">';if(w=r.creator_name){w=w.call(y,{hash:{},data:x})}else{w=y.creator_name;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 的 <a href="/wishlist/';if(w=r.raw_id){w=w.call(y,{hash:{},data:x})}else{w=y.raw_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" class="colorBlue" target="_blank">愿望清单</a>\n                ';return v}function n(y,x){var v="",w;v+='\n                <a href="/r/';if(w=r.creator_id){w=w.call(y,{hash:{},data:x})}else{w=y.creator_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" target="_blank" class="colorGreen">';if(w=r.creator_name){w=w.call(y,{hash:{},data:x})}else{w=y.creator_name;w=typeof w===d?w.apply(y):w}v+=c(w)+'</a> 更新的 <a href="/wishlist/';if(w=r.raw_id){w=w.call(y,{hash:{},data:x})}else{w=y.raw_id;w=typeof w===d?w.apply(y):w}v+=c(w)+'/" class="colorBlue" target="_blank">愿望清单</a>\n                ';return v}function l(A,z){var v="",y,x,w;v+="\n            ";w={hash:{offset:("0"),limit:("3")},inverse:p.noop,fn:p.programWithDepth(6,k,z,A),data:z};x=((y=r.slice||A.slice),y?y.call(A,A.photos,w):q.call(A,"slice",A.photos,w));if(x||x===0){v+=x}v+="\n            ";return v}function k(A,y,z){var v="",x,w;v+='\n            <a href="/wishlist/'+c(((x=z.raw_id),typeof x===d?x.apply(A):x))+'/" class="fl" target="_blank"><img src="';w={hash:{},data:y};v+=c(((x=r.imgURL||A.imgURL),x?x.call(A,"tag",A,w):q.call(A,"imgURL","tag",A,w)))+'"></a>\n            ';return v}function i(A,z){var v="",y,x,w;v+="\n            ";w={hash:{},inverse:p.noop,fn:p.program(9,f,z),data:z};x=((y=r.reverse||A.reverse),y?y.call(A,A.tags,w):q.call(A,"reverse",A.tags,w));if(x||x===0){v+=x}v+="\n            ";return v}function f(x,w){var v="";v+='\n            <a href="/tag/'+c((typeof x===d?x.apply(x):x))+'/" target="_blank">'+c((typeof x===d?x.apply(x):x))+"</a>\n            ";return v}s+='<div class="fl fs0 mt5 mlt-reprinted-avatar">\n    <a href="/r/';if(j=r.creator_id){j=j.call(t,{hash:{},data:u})}else{j=t.creator_id;j=typeof j===d?j.apply(t):j}s+=c(j)+'/" class="fl fs0 avatar" target="_blank">\n        <img src="';e={hash:{},data:u};s+=c(((j=r.mediaAvatarURL||t.mediaAvatarURL),j?j.call(t,t.creator_id,t.avatar,"midium",e):q.call(t,"mediaAvatarURL",t.creator_id,t.avatar,"midium",e)))+'" alt="';if(g=r.creator_name){g=g.call(t,{hash:{},data:u})}else{g=t.creator_name;g=typeof g===d?g.apply(t):g}s+=c(g)+'">\n    </a>\n</div>\n\n<div class="fr mlt-main">\n    <div class="clearfix mb20">\n        <div class="fl mlt-wl-left">\n            <div class="mlt-author mb5">\n                ';g=r["if"].call(t,t.is_shared,{hash:{},inverse:p.program(3,n,u),fn:p.program(1,o,u),data:u});if(g||g===0){s+=g}s+='\n            </div>\n            <a target="_blank" href="/wishlist/';if(g=r.raw_id){g=g.call(t,{hash:{},data:u})}else{g=t.raw_id;g=typeof g===d?g.apply(t):g}s+=c(g)+'/" class="wishlist-name">';if(g=r.title){g=g.call(t,{hash:{},data:u})}else{g=t.title;g=typeof g===d?g.apply(t):g}s+=c(g)+'</a>\n        </div>\n\n        <div class="fr mlt-wl-right">\n            ';g=r["if"].call(t,((j=t.photos),j==null||j===false?j:j.length),{hash:{},inverse:p.noop,fn:p.program(5,l,u),data:u});if(g||g===0){s+=g}s+='\n            <span class="fr wishitems-count"> ';if(g=r.item_count){g=g.call(t,{hash:{},data:u})}else{g=t.item_count;g=typeof g===d?g.apply(t):g}s+=c(g)+' <span>项目</span></span>\n        </div>\n    </div>\n\n    <div class="mlt-meta clearfix">\n        <div class="fl mlt-tags">\n            标签：\n            ';g=r["if"].call(t,((j=t.tags),j==null||j===false?j:j.length),{hash:{},inverse:p.noop,fn:p.program(8,i,u),data:u});if(g||g===0){s+=g}s+='\n        </div>\n        <div class="mlt-operate">\n            ';e={hash:{},data:u};g=((j=r.setOperatePermission||t.setOperatePermission),j?j.call(t,t.type,t.creator_id,t.raw_id,e):q.call(t,"setOperatePermission",t.type,t.creator_id,t.raw_id,e));if(g||g===0){s+=g}s+='\n        </div>\n        <div class="fr mlt-opt">\n            ';e={hash:{},data:u};g=((j=r.setActionPermission||t.setActionPermission),j?j.call(t,t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e):q.call(t,"setActionPermission",t.type,t.creator_id,t.raw_id,t.shared_by,t.commented_by,t.favoured_by,t.comments_number,e));if(g||g===0){s+=g}s+="\n        </div>\n    </div>\n</div>\n";return s})})();
$(function(){$(".follow_tag").on("click",function(g){var f=$(this),d=f.data("url"),c=f.closest("div.widget_container");if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("关注失败！")},success:function(e){sogoke.showFntext2_bingo("关注成功！");f.addClass("followed").html("已关注")}})}});$(".unfollow_tag").on("click",function(h){console.log($(this).data("url"));var g=$(this),f=encodeURI($(this).data("url")),d=$(this).closest("div.widget_container"),c=$(this).closest("li.widget_container_ui");if(f){$.ajax({url:f,dataType:"json",error:function(e,j,i){sogoke.showFntext2_error("取消关注失败--！");console.log(e.status);console.log(f)},success:function(e){sogoke.showFntext2_bingo("取消关注成功！");g.addClass("follow_tag").removeClass("followed").html("关注")}})}});$(".follow_user").on("click",function(g){var f=$(this),d=$(this).data("url"),c=$(this).closest("div.widget_container");if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("关注失败！")},success:function(e){sogoke.showFntext2_bingo("关注成功！");f.attr({"class":"unfollow_user"}).html("取消关注")}})}});$(".unfollow_user").on("click",function(g){var f=$(this),d=$(this).data("url"),c=$(this).closest("div.widget_container");if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("取消关注失败！")},success:function(e){sogoke.showFntext2_bingo("取消关注成功！");f.attr({"class":"follow_user"}).html("关注")}})}});$(".blog_love, .blog_love_bf").on("click",function(i){var d=a();if(d){var g=$(this),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);if(f){$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("喜欢失败！")},success:function(e){sogoke.showFntext2_bingo("喜欢成功！");c.html(h+1);g.attr({"class":"blog_unlove"}).html('取消喜欢&nbsp;<span class="nocolor">'+(++h)+"</span>")}})}}});$(".tag_blog_love").on("click",function(i){var d=a();if(d){var g=$(this),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);if(f){$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("喜欢失败！")},success:function(e){sogoke.showFntext2_bingo("喜欢成功！");c.html(h+1);g.attr({"class":"tag_blog_unlove"}).html('<span class="nocolor">'+(++h)+"</span>")}})}}});$(".tag_blog_unlove").on("click",function(h){var f=$(this),d=f.data("url"),c=f.children("span.nocolor"),g=parseInt(c.html(),10);$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("取消喜欢失败！")},success:function(e){sogoke.showFntext2_bingo("取消喜欢成功！");c.html(g-1);f.attr({"class":"tag_blog_love"}).html('<span class="nocolor">'+(--g)+"</span>")}})});$("li.activity .blog_unlove, li.discovery .blog_unlove").on("click",function(h){var f=$(this),d=f.data("url"),c=f.children("span.nocolor"),g=parseInt(c.html(),10);$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("取消喜欢失败！")},success:function(e){sogoke.showFntext2_bingo("取消喜欢成功！");c.html(g-1);f.attr({"class":"blog_love"}).html('喜欢&nbsp;<span class="nocolor">'+(--g)+"</span>")}})});$(".blog_reprint, .blog_reprint_bf").on("click",function(i){var d=a();if(d){var g=$(this),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);if(f){$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("转载失败！")},success:function(m){sogoke.showFntext2_bingo("转载成功！");g.attr({"class":"blog_unreprint"}).html('取消转载<span class="nocolor">'+(h+1)+"</span>");if($("#activities").length>0&&g.closest("li.activity").length>0){var l=g.closest("li.activity").html();var j=window.user.id;var e=window.user.avatar;var o=sogoke.MEDIA_AVATAR_URL;var n=o+"user/"+j+"/"+e+"/avatar!midium";var k='<li class="home_activity_ui"><img class="home_reserved_ui" width="20" height="20" alt="noticer_reply" src="http://sogoke-static.b0.upaiyun.com/static/v1/img/noticer_reprint.png"><img class="home_avatar_ui" width="20" height="20" src="'+n+'">'+l+"</li>";$("#activities").prepend(k)}}})}}});$(".tag_blog_reprint").on("click",function(i){var d=a();if(d){var g=$(this),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);if(f){$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("转载失败！")},success:function(e){sogoke.showFntext2_bingo("转载成功！");g.attr({"class":"tag_blog_unreprint"});c.html(h+1)}})}}});$(".confirm_blog, .confirm_blog_bf").on("click",function(n){n.preventDefault();var h=$(this),d=$(this).closest("li.activity, li.discovery, div.widget_container"),j=d.find(".loading");if(parseInt(h.data("sending"),10)===1){sogoke.showFntext2_notice("发送中，请耐心等待");return}else{var f=$(this).data("posturl");var g=d.find("form.dynamic_comments_form"),c=d.find("div.hidden_comments div.reply_details"),m=d.find("div.dynamic_comments"),o=d.find("textarea.mailin_textarea_blog_more"),i=o.data("mentions"),l=sogoke.stripNewLineHTML(o.val());if(o.val().length>sogoke.MIN_LENGTH_OF_COMMENT){var k={action:f,comment:l};var p={data:k,error:function(e){j.hide();sogoke.showFntext2_error("回应发布失败！")},success:function(y,e,x,r){var w=Handlebars.templates;sogoke.showFntext2_bingo("回应发布成功！");o.val("");if(x.status===201||x.statusText==="created"||x.statusText==="CREATED"){var v=new Date(),u=parseInt(v.getTime()/1000,10),t=sogoke.renderMentions(l,i),s={id:y,user_id:user.id,username:user.username,avatar:user.avatar,comment:t,timestamp:u};var q=c.length;if(q<10){m.append(w.dynamic_comment(s))}j.hide();h.data("sending",0)}}};j.show();g.ajaxSubmit(p);h.data("sending",1)}else{sogoke.showFntext2_notice("多说一些吧")}}});$(".load_more_comments").on("click",function(l){var j="",f=$(this),c=$(this).closest("li.activity, li.discovery, div.widget_container"),i=c.data("data"),g=c.find(".loading"),h=c.find(".hidden_comments"),k=c.find(".dynamic_comments"),d=c.find(".dynamic_comments_pagenation"),m=Handlebars.templates;if($(this).text()==="加载其他"){k.html(m.dynamic_comments(i)).slideDown("slow");$(this).html("收拢");d.show()}else{k.html(m.dynamic_comments({comments:i.comments.slice(0,3)})).slideDown("slow");$(this).html("加载其他");d.hide()}$("html, body").animate({scrollTop:c.offset().top+c.height()-$(window).height()},1000)});$("li.reply_paging_element > a").on("click",function(m){m.preventDefault();var p={},n=$(this).parent(),c=$(this).data("fetchurl"),d=$(this).closest("li.activity, li.discovery, div.widget_container"),h=d.find(".loading"),f=d.find(".reply_others_mailin_messager_blog_in, .reply_others, .mailin_messager_blog_in"),k=f.children("div.dynamic_comments_control_panel"),g=f.children("div.hidden_comments"),i=f.children("div.dynamic_comments"),j=i.find("div.reply_details"),l=i.find("div.list_display_navi_line_longer_blank"),o=f.children("div.dynamic_comments_pagenation");h.show();$.ajax({url:c,dataType:"json",error:function(e){h.hide();sogoke.showFntext2_error("读取评论失败")},success:function(q){var e=Handlebars.templates;d.data("data",q);h.hide();q.fetchURL=c;k.html(e.dynamic_comments_control_panel(q));g.html(e.dynamic_comments(q));$("li.reply_paging_element_hover").attr({"class":"reply_paging_element"});n.attr({"class":"reply_paging_element_hover"});$(".roll_up_all").css("display","none");j.remove();l.remove()}});$("html, body").animate({scrollTop:f.offset().top},0)});$("a.noticer_reply_now_taller_more").on("click",function(i){i.preventDefault();var f=$(this).closest("li.activity, li.discovery, div.widget_container"),j=$(this).data("username"),h=$(this).data("uid"),g="@"+j+" ",d=f.find("textarea.mailin_textarea_blog_more"),c=d.data("mentions")?d.data("mentions"):[];d.focus().val(d.val()+g);c.push({uid:h,username:j});d.data("mentions",c)});$("a.wanna_more").on("click",function(g){var c="",i=$(this).closest("li.activity, li.discovery, div.widget_container").find("div.photos"),h=$(this).closest("li.activity, li.discovery, div.widget_container").find(".hidden_text"),f=$(this).closest("li.activity, li.discovery, div.widget_container").find(".showing_text"),d=$(this).closest("li.activity, li.discovery, div.widget_container").find("img.photos_preview");if(d.length===0){c=f.html();f.html(h.html());h.html(c)}else{d.trigger("click")}$(this).attr({"class":"wanna_less s_plugin"}).html("收拢")});$("a.wanna_less").on("click",function(f){var c="",h=$(this).closest("li.activity, li.discovery, div.widget_container").find("div.photos"),g=$(this).closest("li.activity, li.discovery, div.widget_container").find(".hidden_text"),d=$(this).closest("li.activity, li.discovery, div.widget_container").find(".showing_text");c=d.html();d.html(g.html());g.html(c);$(this).attr({"class":"wanna_more s_plugin"}).html("展开此信息");h.trigger("click")});$("img.photos_preview").on("click",function(k){var f=$(this).closest("li.activity, li.discovery, div.widget_container"),h,j,n="",p,g,l=$(this).closest(".photos_preview_trigger"),d=$(this).prev().val().split(","),o=f.find("div.photos"),m=f.find("a.wanna_more"),c=f.find("a.wanna_less");if(o.is(":visible")){o.slideUp("slow")}else{if(!o.html()){for(h=0;h<d.length;++h){j='<img src="'+sogoke.MEDIA_PHOTO_URL+"photos/"+d[h]+'!large" alt="" />';o.append(j)}}o.slideDown("slow")}if(o.is(":visible")){p=f.find(".hidden_text");g=f.find(".showing_text");n=g.html();g.html(p.html());p.html(n);m.attr({"class":"wanna_less s_plugin"}).html("收拢")}else{p=f.find(".hidden_text");g=f.find(".showing_text");n=g.html();g.html(p.html());p.html(n);c.attr({"class":"wanna_more s_plugin"}).html("展开此信息")}l.hide()});$("div.photos").on("click",function(g){var c=$(this).closest("li.activity, li.discovery, div.widget_container"),f=c.find(".photos_preview_trigger"),d=c.find(".wanna_less"),h=c.find("a.wanna_more");if($(this).is(":visible")){$(this).hide();d.trigger("click");f.show();document.body.scrollTop=c.offset().top}});$("a.blog_delete, a.blog_delete_bf").on("click",function(f){var d=$(this).data("url"),c=$(this).closest("li.activity, li.discovery, div.widget_container");if(d&&confirm("你确定要删除？")){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("删除失败！")},success:function(e){sogoke.showFntext2_bingo("删除成功！");c.remove()}})}});$(".noticer_delete_now_taller_more").on("click",function(){var h=0,d=$(this),l=$(this).data("suid"),c=$(this).closest("li.activity, li.discovery","div.widget_container"),g=c.data("data"),n=c.find(".load_more_comments"),e=c.find("div.hidden_comments"),j=c.find("div.dynamic_comments"),m=c.find("div.dynamic_comments_pagenation"),k=c.find("div.dynamic_comments_control_panel"),o=$(this).closest(".reply_details"),f=o.next(".list_display_navi_line_longer_blank");commentsNumber=c.find(".comments_number");if(l&&confirm("你确定要删除这条评论？")){$.ajax({url:"/comments/delete/"+l+"/",dataType:"json",error:function(i){sogoke.showFntext2_error("删除失败")},success:function(i){var p=Handlebars.templates;sogoke.showFntext2_bingo("删除成功！");o.remove();f.remove();for(;h<g.comments.length;++h){if(g.comments[h].id===l){g.comments.splice(h,1);--g.comments_number;break}}if(n.text()==="加载其他"){g.show=false;k.html(p.dynamic_comments_control_panel(g));e.html(p.dynamic_comments(g))}else{g.show=true;k.html(p.dynamic_comments_control_panel(g));e.html(p.dynamicComments(g))}commentsNumber.html(parseInt(commentsNumber.text(),10)-1)}})}});$("div.widget_container a.blog_reply").on("click",function(u){$(".replyer_image_home").remove();var r=a();var h=window.user.id;var f=window.user.avatar;var i=sogoke.MEDIA_AVATAR_URL;var v=i+"user/"+h+"/"+f+"/avatar!small";var n='<div class="replyer_image_home"><img width="32" height="32" src="'+v+'"></div>';$("div.mailin_textarea_hover_blog").before(n);$("div.mailin_textarea_hover_more").before(n);var r=a();if(r){u.preventDefault();var m=$(this),q={},c=$(this).data("fetchurl"),l=$(this).closest("div.widget_container"),d=l.find(".loading"),t=$("div.widget_container").not(l),k=l.find(".reply_others"),g=l.find("div.dynamic_comments_control_panel"),j=l.find("div.hidden_comments"),p=l.find("div.dynamic_comments"),o=l.find("div.dynamic_comments_pagenation"),s=parseInt($(this).prev().html(),10);t.find("a.blog_reply").text("回应");t.find(".reply_others_mailin_messager_blog_in, .reply_others, .mailin_messager_blog_in").hide();if($.trim(m.text())==="回应"){p.show();g.show();k.show();l.find(".widget_container").addClass("my_dynamic_bg");m.text("取消")}else{if($.trim(m.text())==="取消"){k.hide();m.text("回应");l.find(".widget_container").removeClass("my_dynamic_bg")}else{}}if(s>0&&!p.html()){d.show();$.ajax({url:c,dataType:"json",error:function(e){sogoke.showFntext2_error("读取评论失败");d.hide()},success:function(w){var e=Handlebars.templates;l.data("data",w);w.fetchURL=c;o.show();j.show();p.html(e.dynamic_comments(q));g.html(e.dynamic_comments_control_panel(w));j.html(e.dynamic_comments(w));o.html(e.dynamic_comments_paginator(w));$(".roll_up_all").css("display","none");$("img.loading").remove();var x=g.find("div.noticer_others_details span").text();if(x<10){g.remove()}}})}else{if(s<=0){d.css("display","none")}}}l.find(".mailin_textarea_blog_more").focus()});$("div.widget_container a.blog_unlove").on("click",function(i){var g=$(this),d=$(this).closest("div.widget_container"),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("取消喜欢失败！")},success:function(e){sogoke.showFntext2_bingo("取消喜欢成功！");d.remove()}})});$("div.widget_container .blog_unreprint").on("click",function(i){var g=$(this),d=$(this).closest("div.widget_container"),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("取消转载失败！")},success:function(e){sogoke.showFntext2_bingo("取消转载成功！");if(h<=1){h=1}g.attr({"class":"blog_reprint"}).html('转载<span class="nocolor">'+(h-1)+"</span>")}})});$(".tag_blog_unreprint").on("click",function(i){var g=$(this),d=$(this).closest("div.widget_container"),f=g.data("url"),c=g.children("span.nocolor"),h=parseInt(c.html(),10);$.ajax({url:f,dataType:"json",error:function(e){sogoke.showFntext2_error("取消转载失败！")},success:function(e){sogoke.showFntext2_bingo("取消转载成功！");d.remove();c.html(h-1);g.attr({"class":"tag_blog_reprint"})}})});$("li.activity a.blog_reply, li.discovery a.blog_reply").on("click",function(u){u.preventDefault();var r=a();$(".replyer_image_home").remove();var h=window.user.id;var f=window.user.avatar;var i=sogoke.MEDIA_AVATAR_URL;var v=i+"user/"+h+"/"+f+"/avatar!small";var n='<div class="replyer_image_home"><img width="32" height="32" src="'+v+'"></div>';$("div.mailin_textarea_hover_blog").before(n);$("div.mailin_textarea_hover_more").before(n);var m=$(this),q={},c=$(this).data("fetchurl"),l=$(this).closest("li.activity, li.discovery"),t=$("li.activity, li.discovery").not(l),d=l.find(".loading"),k=l.find(".reply_others_mailin_messager_blog_in, .reply_others, .mailin_messager_blog_in"),g=k.children("div.dynamic_comments_control_panel"),j=k.children("div.hidden_comments"),p=k.children("div.dynamic_comments"),o=k.children("div.dynamic_comments_pagenation"),s=parseInt($(this).prev().html(),10);t.find("a.blog_reply").text("回应");t.find(".reply_others_mailin_messager_blog_in, .reply_others, .mailin_messager_blog_in").hide();if(m.text()==="回应"){p.show();g.show();k.show();l.find(".widget_container").addClass("my_dynamic_bg");m.text("取消")}else{if(m.text()==="取消"){k.hide();l.find(".widget_container").removeClass("my_dynamic_bg");m.text("回应")}}if(s>0&&!p.html()){$.ajax({url:c,dataType:"json",error:function(e){d.hide();sogoke.showFntext2_error("读取评论失败")},success:function(w){var e=Handlebars.templates;l.data("data",w);w.fetchURL=c;j.show();o.show();p.html(e.dynamic_comments(q));g.html(e.dynamic_comments_control_panel(w));j.html(e.dynamic_comments(w));o.html(e.dynamic_comments_paginator(w));d.hide();$(".roll_up_all").css("display","none");var x=g.find("div.noticer_others_details span").text();if(x<10){g.remove()}}})}l.find(".mailin_textarea_blog_more").focus()});$("li.activity .blog_unreprint, li.discovery .blog_unreprint").on("click",function(h){var f=$(this),d=f.data("url"),c=f.children("span.nocolor"),g=parseInt(c.html(),10);$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("取消转载失败！")},success:function(e){sogoke.showFntext2_bingo("取消转载成功！");if(g<=1){g=1}f.attr({"class":"blog_reprint"}).html('转载<span class="nocolor">'+(g-1)+"</span>")}})});$(".home_below .blog_unreprint").on("click",function(h){var f=$(this),d=f.data("url"),c=f.children("span.nocolor"),g=parseInt(c.html(),10);$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("取消转载失败！")},success:function(e){sogoke.showFntext2_bingo("取消转载成功！");c.html(g-1);f.attr({"class":"blog_reprint"});f.closest("li.activity,li.home_activity_ui").remove()}})});$(".box div").click(function(){var c=$(this).find("a").attr("href");window.location.href=c});$(".box div").hover(function(){$(this).find(".menuInfo").slideDown()},function(){$(this).find(".menuInfo").slideUp()});$(".box_pic div").click(function(){var c=$(this).find("a").attr("href");window.location.href=c});$(".box_pic div").hover(function(){$(this).find(".menuInfo_pic").slideDown()},function(){$(this).find(".menuInfo_pic").slideUp()});$(".box_one div").click(function(){var c=$(this).find("a").attr("href");window.location.href=c});$(".box_one div").hover();$("a.takenotice_txt").on("click",function(){var d=a();if(d){var f=$(this),h=$(this).data("type"),e=$(this).data("url"),g=$(this).data("uid"),c=sogoke.getLocation();if(e){$.ajax({url:e,dataType:"json",error:function(i){sogoke.showFntext2_error("关注失败!")},success:function(i){sogoke.showFntext2_bingo("关注成功!");f.attr({"class":"cancelnotice_txt"}).text("取消关注");f.data("url","/actions/unfollow/"+h+"/"+g+"/-/"+c+"/")}})}}});$("a.cancelnotice_txt").on("click",function(){var e=$(this),g=$(this).data("type"),d=$(this).data("url"),f=$(this).data("uid"),c=sogoke.getLocation();if(d){$.ajax({url:d,dataType:"json",error:function(h){sogoke.showFntext2_error("取消关注失败!")},success:function(h){sogoke.showFntext2_bingo("取消关注成功!");e.attr({"class":"takenotice_txt"}).text("关注");e.data("url","/actions/follow/"+g+"/"+f+"/-/"+c+"/")}})}});function b(){$(".covering").show();$("#alertLogin").show().animate({opacity:1},800)}function a(){var c=true;var d=$("#auth_key").val();if(!d){c=false;b()}return c}$("a.reprintit").on("click",function(){var c=a();if(c){var e=$(this),d=$(this).data("url"),f=parseInt($(this).find("span").html(),10)||0;if(d){$.ajax({url:d,dataType:"json",error:function(g){sogoke.showFntext2_error("转载失败")},success:function(g){sogoke.showFntext2_bingo("转载成功!");e.attr({"class":"unreprintit"}).html("取消转载&nbsp;<span>"+(++f)+"</span>")}})}}});$("a.unreprintit").on("click",function(g){var d=$(this),c=$(this).data("url"),f=parseInt($(this).find("span").html(),10)||0;if(c){$.ajax({url:c,dataType:"json",error:function(e){sogoke.showFntext2_error("取消转载失败")},success:function(e){sogoke.showFntext2_bingo("取消转载成功!");d.attr({"class":"reprintit"}).html("转载&nbsp;<span>"+(--f)+"</span>")}})}});$("a.loveit").on("click",function(h){var c=a();if(c){var f=$(this),d=$(this).data("url"),g=parseInt($(this).find("span").html(),10)||0;if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("喜欢失败")},success:function(e){sogoke.showFntext2_bingo("喜欢成功!");f.attr({"class":"unloveit"}).html("取消喜欢&nbsp;<span>"+(++g)+"</span>")}})}}});$("a.unloveit").on("click",function(g){var d=$(this),c=$(this).data("url"),f=parseInt($(this).find("span").html(),10)||0;if(c){$.ajax({url:c,dataType:"json",error:function(e){sogoke.showFntext2_error("取消关注失败")},success:function(e){sogoke.showFntext2_bingo("取消关注成功!");d.attr({"class":"loveit"}).html("喜欢&nbsp;<span>"+(--f)+"</span>")}})}});$("a.deleteit").on("click",function(){var d=$(this),c=$(this).data("url");if(c&&confirm("你确定要删除？")){$.ajax({url:c,dataType:"json",error:function(e){sogoke.showFntext2_error("")},success:function(e){sogoke.showFntext2_bingo("已经删除，请等待回到主页",1000,function(){window.location.href="/home/"})}})}});$(document).on({click:function(i){i.preventDefault();var d=$(this).closest("div.notice_container"),k=d.find("textarea.noticer_textarea_noticer"),h=d.find(".noticer_name_noticer").text(),f=d.find(".reply"),c=$("div.noticer_now div.noticer_reply_now_tall"),g=$("div.notice_container").find(".reply").not(f),j=$(this).text();$("div.notice_container").find("div.noticer_now,div.noticer_reply_now_tall").text("回应");g.hide();if(!f.is(":visible")){c.text("回应");$(this).text("取消");k.focus().val("@"+h+" ");f.slideDown()}else{$(this).text("回应");k.focus().val("@"+h+" ");f.slideUp()}}},"div.noticer_reply_now_tall");$(".noticer_control").on("click",function(f){f.preventDefault();var c=$(this).closest("div.notice_container"),d=$(this).data("url");if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("删除通知成功！")},success:function(e){sogoke.showFntext2_bingo("删除通知成功！");c.remove()}})}});$(".noticer_confirm").on("click",function(i){i.preventDefault();var f=$(this),c=$(this).closest("div.notice_container"),g=c.find(".reply"),h=c.find("form.notice_comments_form"),j=c.find("textarea.noticer_textarea_noticer");if(j.val().length>sogoke.MIN_LENGTH_OF_COMMENT){var d={data:{comment:j.val()},error:function(e){sogoke.showFntext2_error("回应发布失败！")},success:function(e,m,l,k){sogoke.showFntext2_bingo("回应发布成功！");j.val("");g.slideUp();$(c).find("div.noticer_now,div.noticer_reply_now_tall").text("回应")}};h.ajaxSubmit(d)}});$(".browse_found_article_star_give").raty({readOnly:($(this).data("can")==="yes")?false:true,path:sogoke.static_url+"img/raty/",start:$(this).data("score"),click:function(e,c){var d="/actions/rate/creation/"+$(this).data("cid")+"/-/creations/";$.ajax({url:d,data:{score:e},dataType:"json",error:function(f){sogoke.showFntext2_error("评分失败!")},success:function(f){sogoke.showFntext2_bingo("评分成功!")}})}});$(function(){$(".control_taker, .mailbutton_txt, .alert_login").click(function(){var c=a();return c});$(".replyer_intextarea").focus(function(){a()})});$(function(){$(".blogin").each(function(){var c=$(this).html();$(this).html(c.replace(/(<br>)+/g,"<br>"))});$(".my_blog_txt").each(function(){var c=$(this).html();$(this).html(c.replace(/(<br>)+/g,"<br>"))})});$("a.loveittop").on("click",function(h){var c=a();if(c){var f=$(this),d=$(this).data("url"),g=parseInt($(this).find("span").html(),10)||0;if(d){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("喜欢失败")},success:function(e){sogoke.showFntext2_bingo("喜欢成功!");f.attr({"class":"unloveittop"}).html("<span>"+(++g)+"</span>")}})}}});$("a.unloveittop").on("click",function(g){var d=$(this),c=$(this).data("url"),f=parseInt($(this).find("span").html(),10)||0;if(c){$.ajax({url:c,dataType:"json",error:function(e){sogoke.showFntext2_error("取消关注失败")},success:function(e){sogoke.showFntext2_bingo("取消关注成功!");d.attr({"class":"loveittop"}).html("<span>"+(--f)+"</span>")}})}});$(".mailin_control").on("click",function(f){f.preventDefault();var c=$(this).closest("div.widget_container"),d=$(this).data("url");if(d&&confirm("你确定要删除？")){$.ajax({url:d,dataType:"json",error:function(e){sogoke.showFntext2_error("删除消息失败！")},success:function(e){sogoke.showFntext2_bingo("删除消息成功！");c.remove()}})}})});
$(function(){$(".formactive").click(function(){var b=$("#auth_key").attr("title");var a="抱歉,你已成功注册,但邮箱未激活!";if(!b){sogoke.showFntext2_error(a);return false}})});